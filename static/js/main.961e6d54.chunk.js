(this.webpackJsonppiximi=this.webpackJsonppiximi||[]).push([[0],{716:function(e,t){},717:function(e,t){},725:function(e,t){},728:function(e,t){},729:function(e,t){},730:function(e,t){},912:function(e,t,n){"use strict";n.r(t);var a,i=n(1),r=n.n(i),c=n(163),o=n.n(c),s=n(30),l=n(999),u=n(398),d=n(1011),p=n(996),j=n(19),b=n(7),g=n.n(b),f=n(38),m=n(1014),h=n(984),O=n(977),x=n(599),y=n.n(x),v=n(630),C=n(1028),S=n(1020),k=n(986),w=n(170),I=n.n(w),A=n(143);!function(e){e.Light="light",e.Dark="dark"}(a||(a={}));var E,M,P,D,z={selectedImages:[],tileSize:1,themeMode:a.Light},B=Object(A.b)({name:"settings",initialState:z,reducers:{updateTileSize:function(e,t){e.tileSize=t.payload.newValue},selectImage:function(e,t){e.selectedImages.push(t.payload.id)},selectOneImage:function(e,t){e.selectedImages=[],e.selectedImages.push(t.payload.id)},selectAllImages:function(e,t){e.selectedImages=[],e.selectedImages=t.payload.ids},deselectImage:function(e,t){e.selectedImages=e.selectedImages.filter((function(e){return e!==t.payload.id}))},deselectImages:function(e,t){e.selectedImages=e.selectedImages.filter((function(e){return!t.payload.ids.includes(e)}))},clearSelectedImages:function(e){e.selectedImages=[]},setThemeMode:function(e,t){e.themeMode=t.payload.mode}}}),R=B.actions,F=(R.updateTileSize,R.selectImage,R.selectOneImage,R.deselectImage,R.deselectImages),T=(R.clearSelectedImages,R.setThemeMode);!function(e){e.AbsoluteDifference="Absolute difference",e.CategoricalCrossEntropy="Categorical cross entropy",e.CosineDistance="Cosine distance",e.Hinge="Hinge",e.Huber="Huber",e.Log="Log",e.MeanSquaredError="Mean squared error (MSE)",e.SigmoidCrossEntropy="Sigmoid cross entropy"}(E||(E={})),function(e){e.BinaryAccuracy="Binary accuracy",e.BinaryCrossEntropy="Binary cros-sentropy",e.CategoricalAccuracy="Categorical accuracy",e.CategoricalCrossEntropy="Categorical cross-entropy",e.CosineProximity="Cosine proximity",e.MeanAbsoluteError="Mean absolute error (MAE)",e.MeanAbsolutePercentageError="Mean absolute percentage error",e.MeanSquaredError="Mean squared error",e.Precision="Precision",e.Recall="Recall",e.SparseCategoricalAccuracy="Sparse categorical accuracy"}(M||(M={})),function(e){e.Adadelta="Adadelta",e.Adagrad="Adagrad",e.Adam="Adam",e.Adamax="Adamax",e.Momentum="Momentum",e.RMSProp="RMSProp",e.StochasticGradientDescent="Stochastic gradient descent (SGD)"}(P||(P={})),function(e){e[e.SimpleCNN=0]="SimpleCNN",e[e.MobileNet=1]="MobileNet",e[e.UserUploaded=2]="UserUploaded"}(D||(D={}));var N,H,L,W=[{modelName:"SimpleCNN",modelType:D.SimpleCNN},{modelName:"MobileNet",requiredChannels:3,modelType:D.MobileNet}],U={evaluating:!1,inputShape:{height:256,width:256,channels:3,planes:1,frames:1},fitOptions:{epochs:10,batchSize:32,initialEpoch:0,shuffle:!0},fitting:!1,learningRate:.01,lossFunction:E.CategoricalCrossEntropy,selectedModel:W[0],metrics:[M.CategoricalAccuracy],optimizationAlgorithm:P.Adam,predicting:!1,rescaleOptions:{rescale:!0,rescaleMinMax:{min:0,max:1}},trainingPercentage:.75},V=Object(A.b)({name:"classifier",initialState:U,reducers:{fit:function(e,t){e.fitting=!0},predict:function(e,t){e.predicting=!0},setClassifier:function(e,t){var n=t.payload.classifier;e.fitOptions=n.fitOptions,e.inputShape=n.inputShape,e.learningRate=n.learningRate,e.lossFunction=n.lossFunction,e.metrics=n.metrics,e.optimizationAlgorithm=n.optimizationAlgorithm,e.trainingPercentage=n.trainingPercentage,e.selectedModel=W[0],e.evaluating=!1,e.evaluations=n.evaluations,e.fitting=!1,e.history=n.history,e.predicting=!1,e.predictions=n.predictions},updateBatchSize:function(e,t){var n=t.payload.batchSize;e.fitOptions.batchSize=n},updateCompiled:function(e,t){var n=t.payload.compiled;e.compiled=n},updateEpochs:function(e,t){var n=t.payload.epochs;e.fitOptions.epochs=n},updateFitted:function(e,t){var n=t.payload,a=n.fitted,i=n.status;e.fitted=a,e.history=i,e.fitting=!1},addFitted:function(e,t){var n=t.payload.fitted;e.fitted=n},updateInputShape:function(e,t){e.inputShape=t.payload.inputShape},updateLearningRate:function(e,t){var n=t.payload.learningRate;e.learningRate=n},updateLossFunction:function(e,t){var n=t.payload.lossFunction;e.lossFunction=n},updateMetrics:function(e,t){var n=t.payload.metrics;e.metrics=n},updateSelectedModel:function(e,t){e.selectedModel=t.payload.model},uploadUserSelectedModel:function(e,t){e.inputShape=t.payload.inputShape,e.fitted=t.payload.model,e.compiled=t.payload.model,e.selectedModel=t.payload.modelSelection,e.userUploadedModel=t.payload.modelSelection},updateOptimizationAlgorithm:function(e,t){var n=t.payload.optimizationAlgorithm;e.optimizationAlgorithm=n},updatePreprocessed:function(e,t){var n=t.payload.data;e.data=n},updateRescaleOptions:function(e,t){e.rescaleOptions=t.payload.rescaleOptions},updateTrainingPercentage:function(e,t){var n=t.payload.trainingPercentage;e.trainingPercentage=n}}}),q=V.actions,G=(q.fit,q.updateBatchSize,q.updateCompiled,q.updateEpochs,q.updateFitted,q.updateLearningRate,q.updateLossFunction,q.updateMetrics,q.updateOptimizationAlgorithm,q.updatePreprocessed,q.updateTrainingPercentage,n(12)),Q=n(16),K="00000000-0000-0000-0000-000000000000";!function(e){e[e.ColorAdjustment=0]="ColorAdjustment",e[e.ColorAnnotation=1]="ColorAnnotation",e[e.EllipticalAnnotation=2]="EllipticalAnnotation",e[e.Hand=3]="Hand",e[e.LassoAnnotation=4]="LassoAnnotation",e[e.MagneticAnnotation=5]="MagneticAnnotation",e[e.ObjectAnnotation=6]="ObjectAnnotation",e[e.PenAnnotation=7]="PenAnnotation",e[e.Pointer=8]="Pointer",e[e.PolygonalAnnotation=9]="PolygonalAnnotation",e[e.QuickAnnotation=10]="QuickAnnotation",e[e.RectangularAnnotation=11]="RectangularAnnotation",e[e.Zoom=12]="Zoom"}(N||(N={})),function(e){e[e.Add=0]="Add",e[e.Intersect=1]="Intersect",e[e.New=2]="New",e[e.Subtract=3]="Subtract"}(H||(H={})),function(e){e[e.Blank=0]="Blank",e[e.Annotating=1]="Annotating",e[e.Annotated=2]="Annotated"}(L||(L={}));var Z,J=n.p+"static/media/cell-painting.f118ef08.png";!function(e){e.Arabic="Arabic",e.English="English",e.Farsi="Farsi",e.Finnish="Finnish",e.French="French",e.German="German",e.Greek="Greek",e.Hindi="Hindi",e.Hungarian="Hungarian",e.Spanish="Spanish"}(Z||(Z={}));var _,X=n(6),Y=n(48),$=n(68),ee=n(297),te=n.n(ee),ne=n(1006);!function(e){e.Training="Training",e.Validation="Validation",e.Inference="Inference"}(_||(_={}));var ae,ie=function(){var e=Object(j.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){return t.arrayBuffer().then((function(n){$.a.load(n).then((function(n){e(re(n,t.name))}))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e,t){var n,a,i,r=1,c=[];if(Array.isArray(e)){r=e.length,n=e[0].height,a=e[0].width,i=e[0].components;for(var o=0;o<r;o++)c.push(e[o].toDataURL("image/png",{useCanvas:!0}))}else c=[e.toDataURL("image/png",{useCanvas:!0})],n=e.height,a=e.width,i=e.components;var s={channels:i,frames:1,height:n,planes:r,width:a};return{categoryId:K,id:Object(ne.a)(),annotations:[],name:t,shape:s,originalSrc:c,partition:_.Inference,src:c[Math.floor(r/2)]}},ce={activePlane:0,avatar:J,categoryId:K,id:"f8eecf66-8776-4e14-acd2-94b44603a1a7",annotations:[],name:"example.png",partition:_.Inference,shape:{channels:3,frames:1,height:512,planes:1,width:512},originalSrc:[J],src:J},oe=[{color:"#AAAAAA",id:K,name:"Unknown",visible:!0},{color:"#a08cd2",id:"00000000-0000-0000-0000-000000000001",name:"Cell membrane",visible:!0},{color:"#b8ddf3",id:"00000000-0000-0000-0000-000000000002",name:"Cell nucleus",visible:!0}],se={annotationState:L.Blank,boundingClientRect:new DOMRect,brightness:0,categories:oe.length>0?oe:[],channels:[{range:[0,255],visible:!0},{range:[0,255],visible:!0},{range:[0,255],visible:!0}],currentIndex:0,cursor:"default",contrast:0,exposure:0,hue:0,activeImageId:ce?ce.id:void 0,activeImagePlane:0,images:ce?[ce]:[],language:Z.English,offset:{x:0,y:0},penSelectionBrushSize:32,pointerSelection:{dragging:!1,minimum:void 0,maximum:void 0,selecting:!1},quickSelectionBrushSize:40,saturation:0,selectedAnnotation:void 0,selectedAnnotations:[],selectedCategoryId:K,selectionMode:H.New,soundEnabled:!0,stageHeight:1e3,stageScale:1,stageWidth:1e3,stagePosition:{x:0,y:0},toolType:N.RectangularAnnotation,vibrance:0,zoomSelection:{dragging:!1,minimum:void 0,maximum:void 0,selecting:!1}},le=Object(A.b)({initialState:se,name:"image-viewer-application",reducers:{addImages:function(e,t){var n,a=e.images.map((function(e){return e.name.split(".")[0]})),i=t.payload.newImages.map((function(e){var t=function(e,t){for(var n=e,a=1;t.includes(n);)n=e+"_".concat(a),a+=1;return n}(e.name.split(".")[0],a)+"."+e.name.split(".")[1];return Object(f.a)(Object(f.a)({},e),{},{name:t})}));(n=e.images).push.apply(n,Object(Q.a)(i))},clearCategoryAnnotations:function(e,t){var n,a=Object(G.a)(e.images);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.annotations=i.annotations.filter((function(e){return e.categoryId!==t.payload.category.id}))}}catch(r){a.e(r)}finally{a.f()}},deleteCategory:function(e,t){e.categories=e.categories.filter((function(e){return e.id!==t.payload.category.id}))},deleteImage:function(e,t){e.images=e.images.filter((function(e){return e.id!==t.payload.id})),e.images.length?e.activeImageId===t.payload.id&&e.images.length&&(e.activeImageId=e.images[0].id):e.activeImageId=void 0},deleteAllInstances:function(e,t){e.images=e.images.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{annotations:[]})}))},deleteAllImageInstances:function(e,t){e.images=e.images.map((function(e){return e.id===t.payload.imageId?Object(f.a)(Object(f.a)({},e),{},{annotations:[]}):e}))},deleteImageInstances:function(e,t){e.activeImageId&&(e.images=e.images.map((function(n){if(n.id===e.activeImageId){var a=n.annotations.filter((function(e){return!t.payload.ids.includes(e.id)}));return Object(f.a)(Object(f.a)({},n),{},{annotations:a})}return n})))},openAnnotations:function(e,t){var n;if(e.activeImageId){var a=t.payload.file.annotations.map((function(t){var n=function(e,t){var n=e.annotationMask.split(" ").map((function(e){return parseInt(e)})),a=t;if(!t.map((function(e){return e.id})).includes(e.annotationCategoryId)){var i={color:e.annotationCategoryColor,id:e.annotationCategoryId,name:e.annotationCategoryName,visible:!0};a=[].concat(Object(Q.a)(a),[i])}var r=e.annotationPlane;return r||(r=0),{annotation_out:{boundingBox:[e.annotationBoundingBoxX,e.annotationBoundingBoxY,e.annotationBoundingBoxWidth,e.annotationBoundingBoxHeight],categoryId:e.annotationCategoryId,id:e.annotationId,mask:n,plane:r},categories:a}}(t,e.categories),a=n.annotation_out,i=n.categories;return e.categories=i,a})),i={categoryId:K,id:t.payload.file.imageId,src:t.payload.file.imageData[0],originalSrc:t.payload.file.imageData,name:t.payload.file.imageFilename,annotations:a,partition:_.Inference,shape:{channels:t.payload.file.imageChannels,frames:t.payload.file.imageFrames,height:t.payload.file.imageHeight,planes:t.payload.file.imagePlanes,width:t.payload.file.imageWidth}};(n=e.images).push.apply(n,[i])}},setAnnotationState:function(e,t){e.annotationState=t.payload.annotationState},setBoundingClientRect:function(e,t){e.boundingClientRect=t.payload.boundingClientRect},setBrightness:function(e,t){e.brightness=t.payload.brightness},setCategories:function(e,t){e.categories=t.payload.categories},setCategoryVisibility:function(e,t){var n=Y.find(e.categories,(function(e){return e.id===t.payload.category.id}));n&&(n.visible=t.payload.visible,e.categories=[].concat(Object(Q.a)(e.categories.filter((function(e){return e.id!==t.payload.category.id}))),[n]))},setContrast:function(e,t){e.contrast=t.payload.contrast},setCurrentIndex:function(e,t){e.currentIndex=t.payload.currentIndex},setExposure:function(e,t){e.exposure=t.payload.exposure},setHue:function(e,t){e.hue=t.payload.hue},setActiveImage:function(e,t){e.activeImageId=t.payload.image;var n=e.images.find((function(e){return e.id===t.payload.image}));if(n){for(var a=[],i=0;i<n.shape.channels;i++)a.push({range:[0,255],visible:!0});e.channels=a}},setActiveImagePlane:function(e,t){e.activeImagePlane=t.payload.activeImagePlane},setImageSrc:function(e,t){e.activeImageId&&(e.images=e.images.map((function(n){return e.activeImageId!==n.id?n:Object(f.a)(Object(f.a)({},n),{},{src:t.payload.src})})))},setImages:function(e,t){e.images=t.payload.images,t.payload.images.length&&(e.activeImageId=t.payload.images[0].id)},setChannels:function(e,t){e.channels=t.payload.channels},setCursor:function(e,t){e.cursor=t.payload.cursor},setImageInstances:function(e,t){e.images=e.images.map((function(e){return t.payload.imageId!==e.id?e:Object(f.a)(Object(f.a)({},e),{},{annotations:t.payload.instances})}))},setLanguage:function(e,t){e.language=t.payload.language},setOffset:function(e,t){e.offset=t.payload.offset},setOperation:function(e,t){e.toolType=t.payload.operation},setPenSelectionBrushSize:function(e,t){e.penSelectionBrushSize=t.payload.penSelectionBrushSize},setPointerSelection:function(e,t){e.pointerSelection=t.payload.pointerSelection},setQuickSelectionBrushSize:function(e,t){e.quickSelectionBrushSize=t.payload.quickSelectionBrushSize},setSaturation:function(e,t){e.saturation=t.payload.saturation},setSelectedCategoryId:function(e,t){e.selectedCategoryId=t.payload.selectedCategoryId},setSelectedAnnotations:function(e,t){e.selectedAnnotations=t.payload.selectedAnnotations,e.selectedAnnotation=t.payload.selectedAnnotation},setSelectionMode:function(e,t){e.selectionMode=t.payload.selectionMode},setStageHeight:function(e,t){e.stageHeight=t.payload.stageHeight},setStagePosition:function(e,t){e.stagePosition=t.payload.stagePosition},setStageScale:function(e,t){e.stageScale=t.payload.stageScale},setStageWidth:function(e,t){e.stageWidth=t.payload.stageWidth},setSoundEnabled:function(e,t){e.soundEnabled=t.payload.soundEnabled},setVibrance:function(e,t){e.vibrance=t.payload.vibrance},setZoomSelection:function(e,t){e.zoomSelection=t.payload.zoomSelection}},extraReducers:{"thunks/loadLayersModel/fulfilled":function(e,t){console.info(t.payload)}}}),ue=le.actions,de=(ue.addImages,ue.deleteCategory,ue.deleteAllInstances,ue.deleteImage,ue.openAnnotations,ue.setActiveImage),pe=(ue.setAnnotationState,ue.setBoundingClientRect,ue.setBrightness,ue.setCategories,ue.setCategoryVisibility,ue.setChannels,ue.setContrast,ue.setCurrentIndex,ue.setCursor,ue.setExposure,ue.setHue,ue.setImages,ue.setLanguage,ue.setOffset,ue.setOperation,ue.setPenSelectionBrushSize,ue.setPointerSelection,ue.setQuickSelectionBrushSize,ue.setSaturation,ue.setSelectedAnnotations),je=(ue.setSelectionMode,ue.setSelectedCategoryId,ue.setSoundEnabled,ue.setStageHeight,ue.setStagePosition,ue.setStageScale,ue.setStageWidth,ue.setVibrance,ue.setZoomSelection,n.p+"static/media/317832f90f02c5e916b2ac0f3bcb8da9928d8e400b747b2c68e544e56adacf6b.b6972107.png");!function(e){e[e.Classify=0]="Classify",e[e.Segment=1]="Segment",e[e.Annotate=2]="Annotate"}(ae||(ae={}));var be,ge={id:"a860a94c-58aa-44eb-88e7-9538cb48be29",categoryId:K,annotations:[],name:"nuclei",originalSrc:[je],src:je,shape:{height:256,width:256,channels:3,planes:1,frames:1},partition:_.Inference},fe={categories:[{color:"#AAAAAA",id:K,name:"Unknown",visible:!0}],images:[ge],name:"Untitled project",task:ae.Classify,trainFlag:0},me=Object(A.b)({name:"project",initialState:fe,reducers:{createCategory:function(e,t){var n={color:t.payload.color,id:Object(ne.a)().toString(),name:t.payload.name,visible:!0};e.categories.push(n)},createImage:function(e,t){e.images.push(t.payload.image)},createProject:function(e,t){e.categories=t.payload.project.categories,e.name=t.payload.project.name,e.images=t.payload.project.images},deleteCategory:function(e,t){e.categories=Object(Y.filter)(e.categories,(function(e){return e.id!==t.payload.id})),e.images=e.images.map((function(e){return e.categoryId===t.payload.id&&(e.categoryId=K),e}))},deleteImages:function(e,t){e.images=Object(Y.filter)(e.images,(function(e){return!t.payload.ids.includes(e.id)}))},openImages:function(e,t){var n=[];t.payload.images.forEach((function(e){var t={categoryId:e.imageCategoryId,id:e.imageId,annotations:e.annotations,name:e.imageFilename,partition:e.imagePartition,shape:{width:e.imageWidth,height:e.imageHeight,channels:e.imageChannels,planes:e.imagePlanes,frames:e.imageFrames},originalSrc:e.imageData,src:e.imageData[Math.floor(e.imagePlanes/2)]};n.push(t)})),e.images=n},openProject:function(e,t){e.categories=t.payload.categories,e.name=t.payload.name;var n=[];t.payload.images.forEach((function(e){var t=Array.isArray(e.imageData)?e.imageData:[e.imageData],a={categoryId:e.imageCategoryId,id:e.imageId,annotations:e.annotations,name:e.imageFilename,partition:e.imagePartition,shape:{width:e.imageWidth,height:e.imageHeight,channels:e.imageChannels,planes:e.imagePlanes,frames:e.imageFrames},originalSrc:e.imageData,src:t[Math.floor(e.imagePlanes/2)]};n.push(a)})),e.images=n},setCategories:function(e,t){e.categories=[].concat(Object(Q.a)(e.categories),Object(Q.a)(t.payload.categories))},setImages:function(e,t){e.images=t.payload.images},setProjectName:function(e,t){e.name=t.payload.name},updateCategory:function(e,t){var n=Object(Y.findIndex)(e.categories,(function(e){return e.id===t.payload.id}));e.categories[n].name=t.payload.name,e.categories[n].color=t.payload.color},updateCategoryVisibility:function(e,t){var n=Object(Y.findIndex)(e.categories,(function(e){return e.id===t.payload.id}));e.categories[n].visible=t.payload.visible},updateOtherCategoryVisibility:function(e,t){var n,a=Object(Y.filter)(e.categories,(function(e){return e.id!==t.payload.id})),i=Object(G.a)(a);try{for(i.s();!(n=i.n()).done;){n.value.visible=!1}}catch(r){i.e(r)}finally{i.f()}},updateImageCategory:function(e,t){var n=Object(Y.findIndex)(e.images,(function(e){return e.id===t.payload.id}));n>=0&&(e.images[n].categoryId=t.payload.categoryId)},updateImageCategories:function(e,t){t.payload.ids.forEach((function(n){var a=Object(Y.findIndex)(e.images,(function(e){return e.id===n}));a>=0&&(e.images[a].categoryId=t.payload.categoryId,t.payload.categoryId===K?e.images[a].partition=_.Inference:e.images[a].partition=_.Training)}))},updateImagesCategories:function(e,t){t.payload.ids.forEach((function(n,a){var i=Object(Y.findIndex)(e.images,(function(e){return e.id===n}));i>=0&&(e.images[i].categoryId=t.payload.categoryIds[a])}))},updateImagesPartition:function(e,t){t.payload.ids.forEach((function(n,a){var i=Object(Y.findIndex)(e.images,(function(e){return e.id===n}));i>=0&&(e.images[i].partition=t.payload.partition)}))},updateTask:function(e,t){e.task=t.payload.task},updateTrainFlag:function(e,t){e.trainFlag=t.payload.trainFlag}}}),he=me.actions,Oe=he.createCategory,xe=he.createImage,ye=(he.createProject,he.deleteCategory),ve=he.updateCategory,Ce=he.updateCategoryVisibility,Se=he.updateImageCategories,ke=(he.updateImageCategory,he.updateOtherCategoryVisibility);!function(e){e[e.In=0]="In",e[e.Out=1]="Out"}(be||(be={}));var we={colorAdjustment:{blackPoint:0,brightness:0,contrast:0,exposure:0,highlights:0,hue:0,saturation:0,shadows:0,vibrance:0},zoom:{automaticCentering:!0,mode:be.In,scale:1,toActualSize:!1,toFit:!1}},Ie=Object(A.b)({initialState:we,name:"image-viewer-tool-options",reducers:{setColorAdjustmentOptions:function(e,t){e.colorAdjustment=t.payload.options},setZoomToolOptions:function(e,t){e.zoom=t.payload.options}}}),Ae=Ie.actions,Ee=(Ae.setColorAdjustmentOptions,Ae.setZoomToolOptions,n(2)),Me=function(e){var t=e.popupState,n=Object(s.c)();return Object(Ee.jsxs)(S.a,{component:"label",children:[Object(Ee.jsx)(O.a,{primary:"Open project"}),Object(Ee.jsx)("input",{accept:"application/json",hidden:!0,id:"open-project-file",onChange:function(e){return function(e,a){if(t.close(),e.persist(),a(),e.currentTarget.files){var i=e.currentTarget.files[0],r=new FileReader;r.onload=function(){var e=Object(j.a)(g.a.mark((function e(t){var a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target&&t.target.result){a=JSON.parse(t.target.result);try{n(me.actions.openProject({images:a.project.serializedImages,categories:a.project.categories,name:a.project.name})),n(V.actions.setClassifier({classifier:a.classifier}))}catch(r){i=r,alert("Error while opening the project file: "+i.name+"\n"+i.message)}}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(i)}}(e,t.close)},type:"file"})]})},Pe=n(1021),De=n(983),ze=n(1023),Be=n(305),Re=n(1004),Fe=n(1025),Te=n(1013),Ne=n(54),He=n(596),Le=n.n(He),We=function(e){var t=e.onClose,n=e.open,a=e.popupState,i=r.a.useState(),c=Object(X.a)(i,2),o=c[0],l=c[1],u=r.a.useState(!1),d=Object(X.a)(u,2),p=d[0],b=d[1],m=r.a.useState(""),x=Object(X.a)(m,2),y=x[0],v=x[1],C=r.a.useState({height:256,width:256,channels:3,planes:1,frames:1}),k=Object(X.a)(C,2),w=k[0],I=k[1],A=r.a.useState(!1),E=Object(X.a)(A,2),M=E[0],P=E[1],z=r.a.useState(""),B=Object(X.a)(z,2),R=B[0],F=B[1],T=Object(s.c)(),N=function(){var e=Object(j.a)(g.a.mark((function e(t){var n,a,i,r,c,o,s,u,d,p,j,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),t.currentTarget.files){e.next=3;break}return e.abrupt("return");case 3:return t.currentTarget.files[0].name.includes(".bin")?(n=t.currentTarget.files[0],a=t.currentTarget.files[1]):(n=t.currentTarget.files[1],a=t.currentTarget.files[0]),e.next=6,a.text();case 6:return i=e.sent,r=n.name,c='paths":["./'+r.substring(0,r.length-4)+'.bin"]',o=new RegExp('paths":\\["./(.)*weights.bin"]'),s=i.replace(o,c),u=new File([s],a.name,{type:a.type}),e.prev=12,e.next=15,Ne.g(Ne.e.browserFiles([u,n]));case 15:d=e.sent,l(d),b(!0),p=d.inputs[0].shape.slice(1),I((function(e){return Object(f.a)(Object(f.a)({},e),{},{height:p[0],width:p[1],channels:p[2]})})),j=a.name.replace(/\..+$/,""),v(j),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(12),m=e.t0,F("Invalid files selected:\n"+m.name+"\n"+m.message),P(!0);case 29:case"end":return e.stop()}}),e,null,[[12,24]])})));return function(t){return e.apply(this,arguments)}}();return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,maxWidth:"xs",onClose:t,open:n,children:[Object(Ee.jsx)(De.a,{children:"Open classifier"}),Object(Ee.jsx)("input",{accept:"application/json|.bin",hidden:!0,type:"file",multiple:!0,id:"open-classifier-file",onChange:function(e){return N(e)}}),Object(Ee.jsx)(ze.a,{children:Object(Ee.jsx)(Be.a,{gutterBottom:!0,children:"Tensowflow requires a .json files containing the model description as well as the corresponding model weights (.bin file)."})}),Object(Ee.jsx)("label",{htmlFor:"open-classifier-file",children:Object(Ee.jsxs)(S.a,{component:"span",dense:!0,children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(Le.a,{})}),Object(Ee.jsx)(O.a,{primary:"Select classifier files"})]})}),M?Object(Ee.jsx)(Re.a,{severity:"error",children:R}):Object(Ee.jsx)(Ee.Fragment,{}),Object(Ee.jsxs)(Fe.a,{children:[Object(Ee.jsx)(Te.a,{onClick:function(){t()},color:"primary",children:"Cancel"}),Object(Ee.jsx)(Te.a,{onClick:function(){T(V.actions.uploadUserSelectedModel({inputShape:w,modelSelection:{modelName:y+" - uploaded",modelType:D.UserUploaded},model:o})),t(),a.close()},color:"primary",disabled:!p,children:"Open Classifier"})]})]})};var Ue=function(){var e=Object(i.useState)(!1),t=Object(X.a)(e,2),n=t[0],a=t[1];return{onClose:Object(i.useCallback)((function(){a(!n)}),[n]),onOpen:Object(i.useCallback)((function(){a(!n)}),[n]),open:n}},Ve=function(){var e=r.a.useState(null),t=Object(X.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(!1),o=Object(X.a)(c,2),s=o[0],l=o[1];return{anchorEl:n,onClose:Object(i.useCallback)((function(e){a(null),l(!1)}),[]),onOpen:Object(i.useCallback)((function(e){l(!0),a(e.currentTarget)}),[]),open:s}};n(5),n(4),n(17),n(18);n(597),n(200),n(598);var qe,Ge=function(e){return e.classifier},Qe=function(e){return e.project.categories},Ke=function(e){var t=e.project.categories.filter((function(e){return e.id!==K}));return Object(Y.sortBy)(t,"name")},Ze=function(e){var t=e.imageViewer;if(t.images.length){var n=t.images.find((function(e){return e.id===t.activeImageId}));if(n)return n.annotations}},Je=function(e){var t=e.imageViewer;return Y.find(t.categories,(function(e){return e.id===t.selectedCategoryId}))},_e=function(e){return e.imageViewer.selectionMode},Xe=function(e){return e.imageViewer.toolType},Ye=function(e){return e.project.categories.find((function(e){return e.id===K}))},$e=function(e){return e.project.images.filter((function(e){return e.partition!==_.Inference}))},et=function(e){return e.classifier.compiled},tt=function(e){return e.project.categories.length-1},nt=function(e){return e.classifier.fitOptions},at=function(e){return e.classifier.trainingPercentage},it=function(e){var t=e.classifier;return{learningRate:t.learningRate,lossFunction:t.lossFunction,metrics:t.metrics,optimizationAlgorithm:t.optimizationAlgorithm}},rt=function(e){var t=e.project,n=e.settings;return Array.from(n.selectedImages).filter((function(e){var n=t.categories.filter((function(e){return e.visible})).map((function(e){return e.id}));return t.images.filter((function(t){return e===t.id})).filter((function(e){return e.categoryId&&n.includes(e.categoryId)})).map((function(e){return e.id}))}))},ct=function(e){var t=e.project;return t.images.filter((function(e){var n=t.categories.find((function(t){return t.id===e.categoryId}));return!n||n.visible}))},ot=n(1024),st=n(388),lt=n.n(st),ut=function(e){return e.imageViewer.language},dt={translation:{Cancel:"Abbrechen",Categories:"Kategorien","Create category":"Neue Kategorie","Create new classifier":"Neuer Classifier","Delete category":"L\xf6sche Kategorie","Delete images":"L\xf6sche Bilder",Description:"Beschreibung",Edit:"Edit","Edit category":"Bearbeite Kategorie",Help:"Hilfe","Hide other categories":"Blende andere Kategorien aus","Hide sidebar":"Blende Sidebar aus","Import images":"Bilder hinzuf\xfcgen",Logo:"Logo",Model:"Modell","Open classifier":"\xd6ffne Classifier","Open example classifier":"\xd6ffne Beispiel Classifier","Open weights":"\xd6ffne Gewichte",Open:"\xd6ffnen","Run classifier":"Starte Classfier","Save annotations and predictions":"Speicher Labels und Predictions","Save classifier":"Speicher Classifier","Save weights":"Speicher Gewichte",Save:"Speichern","Search images":"Durchsuche Bilder","Send feedback":"Sende Feedback",Settings:"Einstellungen","Show sidebar":"Blende Sidebar ein",Unknown:"Unbekannt"}},pt={translation:{Cancel:"Cancel",Categories:"Categories","Create category":"Create category","Create new classifier":"Create new classifier","Delete category":"Delete category","Delete images":"Delete images",Description:"Description",Edit:"Edit","Edit category":"Edit category",Help:"Help","Hide other categories":"Hide other categories","Hide sidebar":"Hide sidebar","Import images":"Import images",Logo:"Logo",Model:"Model","Open classifier":"Open classifier","Open example classifier":"Open example classifier","Open weights":"Open weights",Open:"Open","Run classifier":"Run classifier","Save annotations and predictions":"Save annotations and predictions","Save classifier":"Save classifier","Save weights":"Save weights",Save:"Save","Search images":"Search images","Send feedback":"Send feedback",Settings:"Settings","Show sidebar":"Show sidebar",Unknown:"Unknown"}},jt={translation:{"Actual size":"\u0633\u0627\u06cc\u0632 \u0627\u0635\u0644\u06cc","Add area":"\u0646\u0627\u062d\u06cc\u0647 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","Annotation mode":"\u062d\u0627\u0644\u062a \u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc",Cancel:"\u0644\u0641\u0648 \u06a9\u0631\u062f\u0646",Categories:"\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc \u06a9\u0631\u062f\u0646","Center image automatically":"\u062a\u0635\u0648\u06cc\u0631 \u0631\u0627 \u0628\u0647 \u0637\u0648\u0631 \u0627\u062a\u0648\u0645\u0627\u062a\u06cc\u06a9 \u062f\u0631 \u0645\u0631\u06a9\u0632 \u0642\u0631\u0627\u0631 \u0645\u06cc \u062f\u0647\u062f","Color annotation":"\u062a\u0648\u0636\u06cc\u062d \u0631\u0646\u06af \u0647\u0627","Create category":"\u0627\u06cc\u062c\u0627\u062f \u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc","Create new classifier":"\u0627\u06cc\u062c\u0627\u062f \u0637\u0628\u0642\u0647 \u0628\u0646\u062f\u06cc \u062c\u062f\u06cc\u062f",Create:"\u0627\u06cc\u062c\u0627\u062f","Delete category":"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646 \u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc","Delete images":"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646 \u062a\u0635\u0648\u06cc\u0631",Description:"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a",Edit:"\u0648\u06cc\u0631\u0627\u06cc\u0634","Edit category":"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc","Elliptical annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u0628\u06cc\u0636\u0648\u06cc",Export:"\u0641\u0631\u0633\u062a\u0627\u062f\u0646","Export annotations":"\u0641\u0631\u0633\u062a\u0627\u062f\u0646 \u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc","Freehand annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u0622\u0632\u0627\u062f",Help:"\u06a9\u0645\u06a9 \u06cc\u0627\u0628\u06cc","Hide category":"\u067e\u0646\u0647\u0627\u0646 \u0633\u0627\u0632\u06cc \u0637\u0628\u0642\u0647 \u0628\u0646\u062f\u06cc","Hide other categories":"\u067e\u0646\u0647\u0627\u0646 \u0633\u0627\u0632\u06cc \u0633\u0627\u06cc\u0631 \u0637\u0628\u0642\u0647 \u0628\u0646\u062f\u06cc \u0647\u0627","Hide sidebar":"\u067e\u0646\u0647\u0627\u0646 \u0633\u0627\u0632\u06cc \u0645\u0646\u0648\u06cc \u06a9\u0646\u0627\u0631\u06cc","Import images":"\u0622\u0648\u0631\u062f\u0646 \u062a\u0635\u0627\u0648\u06cc\u0631",Intersection:"\u062a\u0644\u0627\u0642\u06cc \u06a9\u0631\u062f\u0646","Invert annotation":"\u0645\u0639\u06a9\u0648\u0633 \u06a9\u0631\u062f\u0646 \u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc","Lasso annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u06a9\u0645\u0646\u062f",Logo:"\u0639\u0644\u0627\u0645\u062a","Magnetic annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u0622\u0647\u0646\u0631\u0628\u0627\u06cc\u06cc",Model:"\u0646\u0645\u0648\u0646\u0647","Object annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u0647\u062f\u0641","Open classifier":"\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646 \u0637\u0628\u0642\u0647 \u0628\u0646\u062f\u06cc","Open example classifier":"\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646 \u0637\u0628\u0642\u0647 \u0628\u0646\u062f\u06cc \u0646\u0645\u0648\u0646\u0647","Open image":"\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646 \u062a\u0635\u0648\u06cc\u0631","Open weights":"\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646 \u0648\u0632\u0646 \u0647\u0627",Open:"\u0628\u0627\u0632 \u06a9\u0631\u062f\u0646","Pen annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u062e\u0648\u062f\u06a9\u0627\u0631",Pointer:"\u0646\u0634\u0627\u0646\u0647 \u06af\u0631","Polygonal annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u0686\u0646\u062f \u0638\u0644\u0639\u06cc",Name:"\u0646\u0627\u0645","New annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u062c\u062f\u06cc\u062f","Quick annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u0633\u0631\u06cc\u0639","Rectangular annotation":"\u06af\u0631\u0648\u0647 \u062a\u0648\u0636\u06cc\u062d\u06cc \u0645\u0633\u062a\u0637\u06cc\u0644\u06cc","Run classifier":"\u0627\u062c\u0631\u0627 \u06a9\u0631\u062f\u0646 \u0637\u0628\u0642\u0647 \u0628\u0646\u062f\u06cc","Save annotations and predictions":"\u0630\u062e\u06cc\u0631\u0647 \u06a9\u0631\u062f\u0646 \u06af\u0631\u0648\u0647 \u0647\u0627\u06cc \u062a\u0648\u0636\u06cc\u062d\u06cc \u0648 \u067e\u06cc\u0634 \u0628\u06cc\u0646\u06cc \u0647\u0627","Save classifier":"\u0630\u062e\u06cc\u0631\u0647 \u06a9\u0631\u062f\u0646 \u0637\u0628\u0642\u0647 \u0628\u0646\u062f\u06cc","Save weights":"\u0630\u062e\u06cc\u0631\u0647 \u06a9\u0631\u062f\u0646 \u0648\u0632\u0646 \u0647\u0627",Save:"\u0630\u062e\u06cc\u0631\u0647 \u06a9\u0631\u062f\u0646","Search images":"\u062c\u0633\u062a\u062c\u0648\u06cc \u062a\u0635\u0627\u0648\u06cc\u0631","Send feedback":"\u0641\u0631\u0633\u062a\u0627\u062f\u0646 \u067e\u06cc\u0634\u0646\u0647\u0627\u062f\u0627\u062a",Settings:"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a","Show category":"\u0646\u0634\u0627\u0646 \u062f\u0627\u062f\u0646 \u06af\u0631\u0648\u0647 \u0647\u0627","Show sidebar":"\u0646\u0634\u0627\u0646 \u062f\u0627\u062f\u0646 \u0645\u0646\u0648\u06cc \u06a9\u0646\u0627\u0631\u06cc","Subtract area":"\u06a9\u0645 \u06a9\u0631\u062f\u0646 \u0646\u0627\u062d\u06cc\u0647",Unknown:"\u062a\u0639\u0631\u06cc\u0641 \u0646\u0634\u062f\u0647",Zoom:"\u0628\u0632\u0631\u06af \u0646\u0645\u0627\u06cc\u06cc","Zoom in":"\u0628\u0632\u0631\u06af \u0646\u0645\u0627\u06cc\u06cc \u06a9\u0631\u062f\u0646","Zoom mode":"\u062d\u0627\u0644\u062a \u0628\u0632\u0631\u06af \u0646\u0645\u0627\u06cc\u06cc","Zoom out":"\u06a9\u0648\u0686\u06a9 \u0646\u0645\u0627\u06cc\u06cc \u06a9\u0631\u062f\u0646"}},bt={translation:{Cancel:"Peruuta",Categories:"Kategoriat","Create category":"Luo kategoria","Create new classifier":"Luo uusi luokittelija","Delete category":"Poista kategoria","Delete images":"Poista kuvat",Description:"Kuvaus",Edit:"Edit","Edit category":"Muokkaa kategoriaa",Help:"Apua","Hide other categories":"Piilota muut kategoriat","Hide sidebar":"Piilota sivupalkki","Import images":"Tuo kuvat",Logo:"Logo",Model:"Malli","Open classifier":"Avaa luokittelija","Open example classifier":"Avaa esimerkkiluokittelija","Open weights":"Avaa painot",Open:"Avaa","Run classifier":"Suorita luokittelija","Save annotations and predictions":"Tallenna annotaatiot ja luokittelun tulos","Save classifier":"Tallenna luokittelija","Save weights":"Tallenna painot",Save:"Tallenna","Search images":"Etsi kuvia","Send feedback":"L\xe4het\xe4 palautetta",Settings:"Asetukset","Show sidebar":"N\xe4yt\xe4 sivupalkki",Unknown:"Tuntematon"}},gt={translation:{Cancel:"\u0386\u03ba\u03c5\u03c1\u03bf",Categories:"\u039a\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b5\u03c2","Create category":"\u0394\u03b7\u03bc\u03b9\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1\u03c2","Create new classifier":"\u039d\u03ad\u03bf\u03c2 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae\u03c2","Delete category":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1\u03c2","Delete images":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03b9\u03ba\u03cc\u03bd\u03c9\u03bd",Description:"\u03a0\u03b5\u03c1\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae",Edit:"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1","Edit category":"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03af\u03b1\u03c2",Help:"\u0392\u03bf\u03ae\u03b8\u03b5\u03b9\u03b1","Hide other categories":"\u0391\u03c0\u03cc\u03ba\u03c1\u03c5\u03c8\u03b7 \u03ac\u03bb\u03bb\u03c9\u03bd \u03ba\u03b1\u03c4\u03b7\u03b3\u03bf\u03c1\u03b9\u03ce\u03bd","Hide sidebar":"\u0391\u03c0\u03cc\u03ba\u03c1\u03c5\u03c8\u03b7 \u03c0\u03bb\u03b5\u03c5\u03c1\u03b9\u03ba\u03ae\u03c2 \u03b3\u03c1\u03b1\u03bc\u03bc\u03ae\u03c2","Import images":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b5\u03b9\u03ba\u03cc\u03bd\u03c9\u03bd",Logo:"\u039b\u03bf\u03b3\u03cc\u03c4\u03c5\u03c0\u03bf",Model:"M\u03bf\u03bd\u03c4\u03ad\u03bb\u03bf","Open classifier":"\u0386\u03bd\u03bf\u03b9\u03b3\u03bc\u03b1 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Open example classifier":"\u03a0\u03b1\u03c1\u03ac\u03b4\u03b5\u03b9\u03b3\u03bc\u03b1 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Open weights":"\u0386\u03bd\u03bf\u03b9\u03b3\u03bc\u03b1 \u03c0\u03b1\u03c1\u03b1\u03bc\u03ad\u03c4\u03c1\u03c9\u03bd",Open:"\u0386\u03bd\u03bf\u03b9\u03b3\u03bc\u03b1","Run classifier":"\u0395\u03ba\u03c4\u03ad\u03bb\u03b5\u03c3\u03b7 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Save annotations and predictions":"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03b5\u03c4\u03b9\u03ba\u03b5\u03c4\u03ce\u03bd \u03ba\u03b1\u03b9 \u03c0\u03c1\u03bf\u03b2\u03bb\u03ad\u03c8\u03b5\u03c9\u03bd","Save classifier":"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c4\u03b1\u03be\u03b9\u03bd\u03bf\u03bc\u03b7\u03c4\u03ae","Save weights":"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7 \u03c0\u03b1\u03c1\u03b1\u03bc\u03ad\u03c4\u03c1\u03c9\u03bd",Save:"\u0391\u03c0\u03bf\u03b8\u03ae\u03ba\u03b5\u03c5\u03c3\u03b7","Search images":"\u0391\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7 \u03b5\u03b9\u03ba\u03cc\u03bd\u03c9\u03bd","Send feedback":"E\u03c0\u03b9\u03ba\u03bf\u03b9\u03bd\u03c9\u03bd\u03b9\u03b1",Settings:"\u03a1\u03c5\u03b8\u03bc\u03af\u03c3\u03b5\u03b9\u03c2","Show sidebar":"\u0395\u03bc\u03c6\u03ac\u03bd\u03b9\u03c3\u03b7 \u03c0\u03bb\u03b5\u03c5\u03c1\u03b9\u03ba\u03ae\u03c2 \u03b3\u03c1\u03b1\u03bc\u03bc\u03ae\u03c2",Unknown:"\u0386\u03b3\u03bd\u03c9\u03c3\u03c4\u03bf"}},ft={translation:{Cancel:"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902",Categories:"\u0938\u093e\u0930\u0947 \u0935\u0930\u094d\u0917","Create category":"\u0935\u0930\u094d\u0917 \u092c\u0928\u093e\u090f\u0901","Create new classifier":"\u0928\u092f\u093e \u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u092c\u0928\u093e\u090f\u0902","Delete category":"\u0935\u0930\u094d\u0917 \u0939\u091f\u093e\u090f\u0901","Delete images":"\u091a\u093f\u0924\u094d\u0930\u094b\u0902 \u0915\u094b \u0939\u091f\u093e\u090f\u0901",Description:"\u0935\u093f\u0935\u0930\u0923","Edit category":"\u0935\u0930\u094d\u0917 \u0915\u093e \u092c\u0926\u0932\u093e\u0935 \u0915\u0930\u0947\u0902",Help:"\u0938\u0939\u093e\u092f\u0924\u093e","Hide other categories":"\u092c\u093e\u0915\u093f \u0935\u0930\u094d\u0917\u094b\u0902 \u0915\u094b \u091b\u093f\u092a\u093e\u090f\u0902","Hide sidebar":"\u0938\u093e\u0907\u0921\u092c\u093e\u0930 \u091b\u093f\u092a\u093e\u090f\u0902","Import images":"\u091a\u093f\u0924\u094d\u0930\u094b\u0902 \u0915\u094b \u0906\u092f\u093e\u0924 \u0915\u0930\u0947\u0902",Logo:"\u0932\u094b\u0917\u094b",Model:"\u092e\u0949\u0921\u0932","Open classifier":"\u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0916\u094b\u0932\u0947\u0902","Open example classifier":"\u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u093e \u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0916\u094b\u0932\u0947\u0902","Open weights":"\u0935\u0947\u0907\u091f\u094d\u0938 \u0916\u094b\u0932\u0947\u0902",Open:"\u0916\u094b\u0932\u0947\u0902","Run classifier":"\u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0915\u094b \u091a\u0932\u093e\u090f\u0902","Save annotations and predictions":"\u091f\u093f\u092a\u094d\u092a\u0923\u0940 \u0924\u0925\u093e \u0905\u0928\u0941\u092e\u093e\u0928 \u0938\u0939\u0947\u091c\u0947\u0902","Save classifier":"\u0935\u0930\u094d\u0917\u0940\u0915\u0930\u094d\u0924\u094d\u0924\u093e \u0938\u0939\u0947\u091c\u0947\u0902","Save weights":"\u0935\u0947\u0907\u091f\u094d\u0938 \u0938\u0939\u0947\u091c\u0947\u0902",Save:"\u0938\u0939\u0947\u091c\u0947\u0902","Search images":"\u091a\u093f\u0924\u094d\u0930 \u0916\u094b\u091c\u0947\u0902","Send feedback":"\u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e \u092d\u0947\u091c\u0947\u0902",Settings:"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938","Show sidebar":"\u0938\u093e\u0907\u0921\u092c\u093e\u0930 \u0926\u093f\u0916\u093e\u090f\u0902",Unknown:"\u0905\u091c\u094d\u091e\u093e\u0924"}},mt={translation:{Cancel:"M\xe9gse",Categories:"Oszt\xe1lyok","Create category":"\xdaj oszt\xe1ly l\xe9trehoz\xe1sa","Create new classifier":"\xdaj oszt\xe1lyoz\xf3 l\xe9trehoz\xe1sa","Delete category":"Oszt\xe1ly t\xf6rl\xe9se","Delete images":"K\xe9pek t\xf6rl\xe9se",Description:"Le\xedr\xe1s",Edit:"Edit","Edit category":"Kateg\xf3ria szerkeszt\xe9se",Help:"S\xfag\xf3","Hide other categories":"T\xf6bbi oszt\xe1ly elrejt\xe9se","Hide sidebar":"Oldals\xe1v elrejt\xe9se","Import images":"K\xe9pek import\xe1l\xe1sa",Logo:"Log\xf3",Model:"Modell","Open classifier":"Oszt\xe1lyoz\xf3 bet\xf6lt\xe9se","Open example classifier":"P\xe9lda oszt\xe1lyoz\xf3 bet\xf6lt\xe9se","Open weights":"S\xfalyok bet\xf6lt\xe9se",Open:"Megnyit\xe1s","Run classifier":"Oszt\xe1lyoz\xf3 futtat\xe1sa","Save annotations and predictions":"C\xedmk\xe9k \xe9s predikci\xf3k ment\xe9se","Save classifier":"Oszt\xe1lyoz\xf3 ment\xe9se","Save weights":"S\xfalyok ment\xe9se",Save:"Ment\xe9s","Search images":"K\xe9pek keres\xe9se","Send feedback":"Visszajelz\xe9s k\xfcld\xe9se",Settings:"Be\xe1ll\xedt\xe1sok","Show sidebar":"Oldals\xe1v megjelen\xedt\xe9se",Unknown:"Ismeretlen"}},ht={translation:{"Actual size":"Taille r\xe9elle","Add area":"Ajouter r\xe9gion","Annotation mode":"Mode d'annotation",Cancel:"Annuler",Categories:"Cat\xe9gories","Center image automatically":"Centrer image automatiquement","Color annotation":"Annotation couleur","Create category":"Nouvelle cat\xe9gorie","Create new classifier":"Nouveau classifieur",Create:"Ajouter","Delete category":"Supprimer cat\xe9gorie","Delete images":"Supprimer images",Description:"Description",Edit:"Modifier","Edit category":"Modifier cat\xe9gorie","Elliptical annotation":"Annotation elliptique",Export:"Exporter","Export annotations":"Exporter annotations","Freehand annotation":"Annotation main-libres",Help:"Aide","Hide category":"Cacher cat\xe9gorie","Hide other categories":"Cacher autres cat\xe9gories","Hide sidebar":"Cacher sidebar","Import images":"Importer images",Intersection:"Intersection","Invert annotation":"Inverser annotation","Lasso annotation":"Annotation lasso",Logo:"Logo","Magnetic annotation":"Annotation magn\xe9tique",Model:"Mod\xe8le","Object annotation":"Annotation objet","Open classifier":"Ouvrir classifieur","Open example classifier":"Ouvrir example classifieur","Open image":"Ouvrir image","Open weights":"Ouvrir poids",Open:"Ouvrir","Pen annotation":"Annotation pinceau",Pointer:"Pointeur","Polygonal annotation":"Annotation polygonale",Name:"Nom","New annotation":"Nouvelle annotation","Quick annotation":"Annotation rapide","Rectangular annotation":"Annotation rectangulaire","Run classifier":"Initier classifieur","Save annotations and predictions":"Sauver annotations et predictions","Save classifier":"Sauver classifieur","Save weights":"Sauver poids",Save:"Sauver","Search images":"Rechercher images","Send feedback":"Envoyer feedback",Settings:"Pr\xe9f\xe9rences","Show category":"Montrer cat\xe9gorie","Show sidebar":"Montrer sidebar","Subtract area":"Soustraire r\xe9gion",Unknown:"Inconnu",Zoom:"Zoom","Zoom in":"Zoom int\xe9rieur","Zoom mode":"Mode zoom","Zoom out":"Zoom ext\xe9rieur"}},Ot=n(1027),xt=n(1015);!function(e){e[e.Mnist=0]="Mnist",e[e.CElegans=1]="CElegans",e[e.HumanU2OSCells=2]="HumanU2OSCells"}(qe||(qe={}));var yt=function(e){var t=e.exampleProject,a=e.projectName,i=e.projectIcon,r=e.popupState,c=e.onClose,o=Object(s.c)(),l=function(){var e=Object(j.a)(g.a.mark((function e(){var a,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===qe.Mnist?3:e.t0===qe.CElegans?7:e.t0===qe.HumanU2OSCells?11:15;break;case 3:return e.next=5,n.e(5).then(n.t.bind(null,1047,3));case 5:return a=e.sent,e.abrupt("break",16);case 7:return e.next=9,n.e(3).then(n.t.bind(null,1048,3));case 9:return a=e.sent,e.abrupt("break",16);case 11:return e.next=13,n.e(4).then(n.t.bind(null,1049,3));case 13:return a=e.sent,e.abrupt("break",16);case 15:return e.abrupt("return");case 16:i=a.project,s=a.classifier,r.close(),c(),o(me.actions.openProject({images:i.serializedImages,categories:i.categories,name:i.name})),o(V.actions.setClassifier({classifier:s}));case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ee.jsxs)(m.a,{button:!0,onClick:l,children:[Object(Ee.jsx)(Ot.a,{children:Object(Ee.jsx)(xt.a,{src:i})}),Object(Ee.jsx)(O.a,{primary:a})]})},vt=n.p+"static/media/cElegansExampleProjectIcon.ec038762.png",Ct=n.p+"static/media/humanU2OSCellsExampleProjectIcon.59ecbfc8.png",St=function(e){var t=function(){var e=Object(s.d)(ut);return function(t){switch(e){case Z.English:return pt.translation[t]?pt.translation[t]:t;case Z.Farsi:return jt.translation[t]?jt.translation[t]:t;case Z.Finnish:return bt.translation[t]?bt.translation[t]:t;case Z.French:return ht.translation[t]?ht.translation[t]:t;case Z.German:return dt.translation[t]?dt.translation[t]:t;case Z.Greek:return gt.translation[t]?gt.translation[t]:t;case Z.Hindi:return ft.translation[t]?ft.translation[t]:t;case Z.Hungarian:return mt.translation[t]?mt.translation[t]:t;default:return t}}}(),n=e.open,a=e.onClose,i=e.popupState;return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,maxWidth:"sm",open:n,children:[Object(Ee.jsxs)(De.a,{sx:{borderBottom:function(e){return"1px solid ".concat(e.palette.divider)},margin:0,padding:function(e){return e.spacing(2)}},children:[t("Open example project"),Object(Ee.jsx)(ot.a,{"aria-label":"Close",sx:function(e){return{color:e.palette.grey[500],position:"absolute",right:e.spacing(1),top:e.spacing(1)}},onClick:function(){a()},children:Object(Ee.jsx)(lt.a,{})})]}),Object(Ee.jsx)(ze.a,{sx:{borderTop:function(e){return"1px solid ".concat(e.palette.divider)},margin:0,padding:function(e){return e.spacing(1)}},children:Object(Ee.jsxs)(C.a,{children:[Object(Ee.jsx)(yt,{exampleProject:qe.Mnist,projectName:"Open MNIST example project",projectIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAmdJREFUSEvtlb9LamEcxh8tRNTBP0DEwEGSDMVfkyBIiSEO6mSloI0qOCiCIJYOWmur4K9BpXAzhHIIRNoaGiSktqDJ0EEnL+97r+Gly/Ucraa+cIZzDuf7eb/P+zzn5QCY4huL8wP8bLV/JP2gKI/Hw8nJCdxuN2QyGSqVCoLBIAaDASP1GUsqEolgNBpxfn4OuVwODoeD6fR3osrlMsLhMCMoI6BQKMTd3R0UCsX7FMViEc/Pz1Cr1bDb7YjH48jlcgunZARsNpvY2dmhzQg4m82i0WjQez6fj1KpBJPJBKlUislk8l/oQuDGxgb6/T6Vj+xXKBT6SzqVSoVIJIKDgwPk83kcHR2tBoxGo3Siy8tLOJ3OD81arRYsFgt9fnV1BZvNthqwUCjQ1W9tbeHh4QEajQZer5c21Wq10Ol0WFtbewfu7e2tBvR4PHSPXl9f8fb2BolEQvdtNBqBOHdWw+EQp6enyGQyqwHJFLe3tyD5m1UymaQS+3w++P1+iMViur+Hh4ef49Lt7W0QaYmspNrtNshEZBHEnQKBAOl0GmQhi2qhS+cbEMeS6+bmBolEgubv6ekJFxcXqNfri1j0PSvgfEcC2N3dxf39PQKBAHq93tcB9/f3Qf40JJupVArHx8eMYEtNyOVyad5I9oiUJDLj8fjrgC6XC9VqFS8vLzCbzXh8fGQMW2rCbrcLvV5PI0BOCbbFyjS1Wg0OhwPr6+vY3NxkbJT5RbECEieSs5Bp5v41PWOgUqmkRxMJu9VqxfX1NVs12eXQYDCg0+ng7OwMsVhsKdhSplma9OdDxpKuCpp9/wsa/u4BrNHtvwAAAABJRU5ErkJggg==",popupState:i,onClose:a}),Object(Ee.jsx)(yt,{exampleProject:qe.CElegans,projectName:"Open C. elegans example project",projectIcon:vt,popupState:i,onClose:a}),Object(Ee.jsx)(yt,{exampleProject:qe.HumanU2OSCells,projectName:"Open human U2OS-cells example project",projectIcon:Ct,popupState:i,onClose:a})]})}),Object(Ee.jsx)(Fe.a,{})]})},kt=function(e){var t=e.popupState,n=Ue(),a=n.onClose,i=n.onOpen,r=n.open,c=Ue(),o=c.onClose,s=c.onOpen,l=c.open;return Object(Ee.jsxs)(v.a,Object(f.a)(Object(f.a)({},Object(w.bindMenu)(t)),{},{children:[Object(Ee.jsxs)(C.a,{dense:!0,variant:"menu",children:[Object(Ee.jsx)(Me,{popupState:t}),Object(Ee.jsx)(S.a,{onClick:s,children:"Open example project"}),Object(Ee.jsx)(k.a,{}),Object(Ee.jsx)(S.a,{onClick:i,children:"Open classifier"})]}),Object(Ee.jsx)(St,{onClose:o,open:l,popupState:t}),Object(Ee.jsx)(We,{onClose:a,open:r,popupState:t})]}))},wt=function(){return Object(Ee.jsx)(I.a,{variant:"popover",children:function(e){return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,Object(f.a)(Object(f.a)({button:!0},Object(w.bindTrigger)(e)),{},{children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(y.a,{})}),Object(Ee.jsx)(O.a,{primary:"Open"})]})),Object(Ee.jsx)(kt,{popupState:e})]})}})},It=n(1016),At=n(1005),Et=function(e){var t=e.project;return{serializedImages:t.images.map((function(e){return{imageCategoryId:e.categoryId?e.categoryId:K,imageChannels:e.shape.channels,imageChecksum:"",imageData:e.originalSrc,imageFilename:e.name,imageFrames:e.shape.frames,imageHeight:e.shape.height,imageId:e.id,imagePlanes:e.shape.planes,imageWidth:e.shape.width,imagePartition:e.partition,annotations:e.annotations}})),categories:t.categories,name:t.name}},Mt=function(e){var t=e.onClose,n=e.open,a=e.popupState,r=Object(s.d)(Ge),c=Object(s.d)(Et),o=Object(i.useState)(c.name),l=Object(X.a)(o,2),u=l[0],d=l[1];return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,maxWidth:"xs",onClose:t,open:n,children:[Object(Ee.jsx)(De.a,{children:"Save Project"}),Object(Ee.jsx)(ze.a,{children:Object(Ee.jsx)(It.a,{container:!0,spacing:1,children:Object(Ee.jsx)(It.a,{item:!0,xs:10,children:Object(Ee.jsx)(At.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Project file name",margin:"dense",onChange:function(e){d(e.target.value)}})})})}),Object(Ee.jsxs)(Fe.a,{children:[Object(Ee.jsx)(Te.a,{onClick:function(){t()},color:"primary",children:"Cancel"}),Object(Ee.jsx)(Te.a,{onClick:function(){var e={classifier:r,project:c,version:"0.0.0"};e.project.name=u;var n=[JSON.stringify(e)],i=new Blob(n,{type:"application/json;charset=utf-8"});te()(i,"".concat(u,".json")),t(),a.close()},color:"primary",children:"Save Project"})]})]})},Pt=function(e){return e.classifier.fitted},Dt=function(e){return e.classifier.selectedModel},zt=function(e){var t=e.onClose,n=e.open,a=e.popupState,r=Object(s.d)(Pt),c=Object(s.d)(Dt),o=Object(i.useState)(c.modelName),l=Object(X.a)(o,2),u=l[0],d=l[1],p=!r,b=function(){var e=Object(j.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.save("downloads://".concat(u));case 2:t(),a.close();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,maxWidth:"xs",onClose:t,open:n,children:[Object(Ee.jsx)(De.a,{children:"Save Classifier"}),Object(Ee.jsx)(ze.a,{children:Object(Ee.jsx)(It.a,{container:!0,spacing:1,children:Object(Ee.jsx)(It.a,{item:!0,xs:10,children:Object(Ee.jsx)(At.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Classifier name",margin:"dense",onChange:function(e){d(e.target.value)},helperText:p?"There is no trained model that could be saved.":"",error:p})})})}),Object(Ee.jsxs)(Fe.a,{children:[Object(Ee.jsx)(Te.a,{onClick:function(){t()},color:"primary",children:"Cancel"}),Object(Ee.jsx)(Te.a,{onClick:b,color:"primary",disabled:p,children:"Save Classifier"})]})]})},Bt=function(e){var t=e.popupState,n=Ue(),a=n.onClose,i=n.onOpen,r=n.open,c=Ue(),o=c.onClose,s=c.onOpen,l=c.open;return Object(Ee.jsxs)(v.a,Object(f.a)(Object(f.a)({},Object(w.bindMenu)(t)),{},{children:[Object(Ee.jsx)(S.a,{onClick:i,children:"Save project"}),Object(Ee.jsx)(S.a,{onClick:s,children:"Save classifier"}),Object(Ee.jsx)(Mt,{onClose:a,open:r,popupState:t}),Object(Ee.jsx)(zt,{onClose:o,open:l,popupState:t})]}))},Rt=n(600),Ft=n.n(Rt),Tt=function(){return Object(Ee.jsx)(I.a,{variant:"popover",children:function(e){return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,Object(f.a)(Object(f.a)({button:!0},Object(w.bindTrigger)(e)),{},{children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(Ft.a,{})}),Object(Ee.jsx)(O.a,{primary:"Save"})]})),Object(Ee.jsx)(Bt,{popupState:e})]})}})},Nt=n(1029),Ht=function(){return Object(Ee.jsxs)(Nt.a,{dense:!0,children:[Object(Ee.jsx)(wt,{}),Object(Ee.jsx)(Tt,{})]})},Lt=n(1034),Wt=n(141),Ut=n.n(Wt),Vt=n(142),qt=n.n(Vt),Gt=function(e){var t=e.children,n=e.primary,a=r.a.useState(!0),i=Object(X.a)(a,2),c=i[0],o=i[1];return Object(Ee.jsxs)(Nt.a,{dense:!0,children:[Object(Ee.jsxs)(m.a,{button:!0,dense:!0,onClick:function(){o(!c)},children:[Object(Ee.jsx)(h.a,{children:c?Object(Ee.jsx)(Ut.a,{}):Object(Ee.jsx)(qt.a,{})}),Object(Ee.jsx)(O.a,{primary:n})]}),Object(Ee.jsx)(Lt.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(Ee.jsx)(Nt.a,{component:"div",dense:!0,disablePadding:!0,children:t})})]})},Qt=n(1009),Kt=n(270),Zt=n.n(Kt),Jt=n(390),_t=n.n(Jt),Xt=function(e){var t=e.category,n=Object(s.c)(),a=Object(s.d)(ct);return Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(Qt.a,{checked:t.visible,checkedIcon:Object(Ee.jsx)(Zt.a,{style:{color:t.color}}),disableRipple:!0,edge:"start",icon:Object(Ee.jsx)(_t.a,{style:{color:t.color}}),tabIndex:-1,onChange:function(){var e={id:t.id,visible:!t.visible};t.visible&&n(F({ids:a.filter((function(e){return e.categoryId===t.id})).map((function(e){return e.id}))})),n(Ce(e))}})})},Yt=function(e){var t=e.category,n=e.onCloseCategoryMenu,a=Object(s.c)();return Object(Ee.jsx)(S.a,{onClick:function(e){n(e);var i={id:t.id,visible:!t.visible};a(Ce(i))},children:Object(Ee.jsxs)(Be.a,{variant:"inherit",children:[t.visible?"Hide":"Show"," category"]})})},$t=function(e){var t=e.category,n=e.onCloseCategoryMenu,a=Object(s.c)();return Object(Ee.jsx)(S.a,{onClick:function(e){n(e),a(ke({id:t.id}))},children:Object(Ee.jsx)(Be.a,{variant:"inherit",children:"Hide other categories"})})},en=function(e){var t=e.anchorElCategoryMenu,n=e.category,a=e.onCloseCategoryMenu,i=e.openCategoryMenu,r=e.onOpenDeleteCategoryDialog,c=e.onOpenEditCategoryDialog;return Object(Ee.jsx)(v.a,{anchorEl:t,anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:a,open:i,transformOrigin:{horizontal:"center",vertical:"top"},children:Object(Ee.jsxs)(C.a,{dense:!0,variant:"menu",children:[Object(Ee.jsx)($t,{category:n,onCloseCategoryMenu:a}),Object(Ee.jsx)(Yt,{category:n,onCloseCategoryMenu:a}),n.id!==K&&Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)(k.a,{}),Object(Ee.jsx)(S.a,{onClick:function(e){c(),a(e)},children:Object(Ee.jsx)(Be.a,{variant:"inherit",children:"Edit category"})}),Object(Ee.jsx)(S.a,{onClick:function(e){r(),a(e)},children:Object(Ee.jsx)(Be.a,{variant:"inherit",children:"Delete category"})})]})]})})},tn=n(627),nn=["#000000","#004949","#009292","#ff6db6","#ffb6db","#490092","#006ddb","#b66dff","#6db6ff","#b6dbff","#920000","#924900","#db6d00","#24ff24","#ffff6d"],an=function(e){var t=e.project.categories.map((function(e){return e.color}));return nn.filter((function(e){return!t.includes(e)}))},rn=n(1030),cn=n(1035),on=n(989),sn=function(e){var t=e.color,n=e.onColorChange,a=Object(s.d)(an),r=i.useState(null),c=Object(X.a)(r,2),o=c[0],l=c[1],u=Boolean(o),d=function(){l(null)};return Object(Ee.jsxs)(i.Fragment,{children:[Object(Ee.jsx)(ot.a,{onClick:function(e){l(e.currentTarget)},children:Object(Ee.jsx)(xt.a,{sx:{backgroundColor:"#F3F3F3"},children:Object(Ee.jsx)(on.a,{sx:{color:t}})})}),Object(Ee.jsx)(rn.a,{id:"color-menu",open:u,anchorEl:o,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(Ee.jsx)(cn.a,{sx:{margin:"16px"},children:Object(Ee.jsx)(tn.a,{colors:a,onChange:function(e){console.info(e),n(e),d()}})})})]})},ln=function(e){var t=e.category,n=e.onCloseDialog,a=e.openDialog,r=Object(s.c)(),c=Object(i.useState)(t.color),o=Object(X.a)(c,2),l=o[0],u=o[1],d=Object(i.useState)(t.name),p=Object(X.a)(d,2),j=p[0],b=p[1];return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,onClose:n,open:a,children:[Object(Ee.jsx)(De.a,{children:"Edit category"}),Object(Ee.jsx)(ze.a,{children:Object(Ee.jsx)("div",{children:Object(Ee.jsxs)(It.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(sn,{color:l,onColorChange:function(e){u(e.hex)}})}),Object(Ee.jsx)(It.a,{item:!0,xs:10,children:Object(Ee.jsx)(At.a,{autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(e){b(e.target.value)},value:j})})]})})}),Object(Ee.jsxs)(Fe.a,{children:[Object(Ee.jsx)(Te.a,{onClick:n,color:"primary",children:"Cancel"}),Object(Ee.jsx)(Te.a,{onClick:function(){r(ve({id:t.id,name:j,color:l})),n()},color:"primary",children:"Update"})]})]})},un=function(e){var t=e.category,n=e.onClose,a=e.open,i=Object(s.c)();return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,onClose:n,open:a,children:[Object(Ee.jsxs)(De.a,{children:['Delete "',t.name,'" category?']}),Object(Ee.jsxs)(ze.a,{children:['Images categorized as "',t.name,'" will not be deleted.']}),Object(Ee.jsxs)(Fe.a,{children:[Object(Ee.jsx)(Te.a,{onClick:n,color:"primary",children:"Cancel"}),Object(Ee.jsx)(Te.a,{onClick:function(){i(ye({id:t.id})),n()},color:"primary",children:"Delete"})]})]})},dn=n(605),pn=n.n(dn),jn=n(1017),bn=n(1026),gn=function(e){var t=e.category,n=e.id,a=Ue(),i=a.onClose,c=a.onOpen,o=a.open,l=Ue(),u=l.onClose,d=l.onOpen,p=l.open,j=Ve(),b=j.anchorEl,g=j.onClose,f=j.onOpen,h=j.open,x=Object(s.d)((function(e){return e.project.images.filter((function(e){return e.categoryId===t.id})).length}));return Object(Ee.jsxs)(r.a.Fragment,{children:[Object(Ee.jsxs)(m.a,{dense:!0,id:n,children:[Object(Ee.jsx)(Xt,{category:t}),Object(Ee.jsx)(O.a,{id:n,primary:t.name,primaryTypographyProps:{noWrap:!0}}),Object(Ee.jsx)(jn.a,{label:x,size:"small",sx:{height:"20px",borderWidth:"2px",fontSize:"0.875rem",color:"white",backgroundColor:t.color}}),Object(Ee.jsx)(bn.a,{children:Object(Ee.jsx)(ot.a,{edge:"end",onClick:f,children:Object(Ee.jsx)(pn.a,{})})})]},n),Object(Ee.jsx)(en,{anchorElCategoryMenu:b,category:t,onCloseCategoryMenu:g,onOpenCategoryMenu:f,onOpenDeleteCategoryDialog:c,onOpenEditCategoryDialog:d,openCategoryMenu:h}),Object(Ee.jsx)(un,{category:t,onClose:i,open:o}),Object(Ee.jsx)(ln,{category:t,onCloseDialog:u,openDialog:p})]})},fn=function(e){var t=e.onClose,n=e.open,a=Object(s.c)(),c=Object(s.d)(an),o=Object(s.d)(Qe).map((function(e){return e.name})),l=r.a.useState(Object(Y.sample)(c)),u=Object(X.a)(l,2),d=u[0],p=u[1],j=Object(i.useState)(""),b=Object(X.a)(j,2),g=b[0],f=b[1],m=Object(i.useState)(""),h=Object(X.a)(m,2),O=h[0],x=h[1],y=Object(i.useState)(!1),v=Object(X.a)(y,2),C=v[0],S=v[1],k=function(){x(""),f(""),S(!1),p(Object(Y.sample)(c)),t()},w=function(e){var t=!0,n="";return""===e?(n="Please type a category name.",t=!1):o.includes(e)&&(n="Category names must be unique. A category with this name already exits.",t=!1),x(n),S(!t),t};return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,maxWidth:"xs",onClose:t,open:n,children:[Object(Ee.jsx)(De.a,{children:"Create category"}),Object(Ee.jsx)(ze.a,{sx:{paddingLeft:"0 !important"},children:Object(Ee.jsx)(cn.a,{sx:{margin:function(e){return e.spacing(1)}},children:Object(Ee.jsxs)(It.a,{container:!0,spacing:1,children:[Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(sn,{color:d,onColorChange:function(e){p(e.hex)}})}),Object(Ee.jsx)(It.a,{item:!0,xs:10,children:Object(Ee.jsx)(At.a,{error:C,autoFocus:!0,fullWidth:!0,id:"name",label:"Name",margin:"dense",onChange:function(e){f(e.target.value),w(e.target.value)},helperText:O})})]})})}),Object(Ee.jsxs)(Fe.a,{children:[Object(Ee.jsx)(Te.a,{onClick:k,color:"primary",children:"Cancel"}),Object(Ee.jsx)(Te.a,{onClick:function(){w(g)&&(a(Oe({name:g,color:d})),k())},color:"primary",children:"Create"})]})]})},mn=n(606),hn=n.n(mn),On=function(){var e=Ue(),t=e.onClose,n=e.onOpen,a=e.open;return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,{button:!0,onClick:n,children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(hn.a,{})}),Object(Ee.jsx)(O.a,{primary:"Create category"})]}),Object(Ee.jsx)(fn,{onClose:t,open:a})]})},xn=function(){var e=Object(s.d)(Ke),t=Object(s.d)(Ye);return Object(Ee.jsxs)(Gt,{primary:"Categories",children:[e.map((function(e){return Object(Ee.jsx)(gn,{category:e,id:e.id},e.id)})),Object(Ee.jsx)(gn,{category:t,id:t.id},t.id),Object(Ee.jsx)(On,{})]})},yn=n(607),vn=n.n(yn),Cn=n(1036),Sn=n(1037),kn=n(1018),wn=n(990),In=n(991),An=n(992),En=function(e){return e.classifier.fitting},Mn=function(e){var t=e.closeDialog,n=e.fit,a=e.disableFitting,i=Object(s.c)(),r=Object(s.d)(et),c=Object(s.d)(En);return Object(Ee.jsx)(Cn.a,{sx:{position:"relative",backgroundColor:"transparent",boxShadow:"none",borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:Object(Ee.jsxs)(Sn.a,{children:[Object(Ee.jsx)(kn.a,{title:"Close Dialog",placement:"bottom",children:Object(Ee.jsx)(ot.a,{edge:"start",color:"primary",onClick:t,"aria-label":"Close",href:"",children:Object(Ee.jsx)(wn.a,{})})}),Object(Ee.jsx)(cn.a,{sx:{flexGrow:1}}),Object(Ee.jsx)(kn.a,{title:a?"Plaese label images before fitting a model.":"Fit the model",placement:"bottom",children:Object(Ee.jsx)("span",{children:Object(Ee.jsx)(ot.a,{onClick:n,href:"",disabled:a,children:Object(Ee.jsx)(In.a,{})})})}),Object(Ee.jsx)(kn.a,{title:"Stop fitting the model",placement:"bottom",children:Object(Ee.jsx)("span",{children:Object(Ee.jsx)(ot.a,{onClick:function(){r&&(r.stopTraining=!0,i(V.actions.updateCompiled({compiled:r})))},href:"",disabled:!c,children:Object(Ee.jsx)(An.a,{})})})})]})})},Pn=n(1033),Dn=n(1008),zn=n(25),Bn=n(1032),Rn=Object(zn.a)(Bn.a)((function(e){return{display:"flex",flexWrap:"wrap",margin:e.theme.spacing(1),width:"100%",minWidth:120}})),Fn=function(e){return e.classifier.learningRate},Tn=function(e){return e.classifier.optimizationAlgorithm},Nn=function(e){return e.classifier.lossFunction},Hn=new RegExp("^[0-9]+$"),Ln=new RegExp("^[0-9]+(.[0-9]*)?$"),Wn=function(e){var t=e.id,n=e.label,a=e.value,r=e.dispatchCallBack,c=e.min,o=void 0===c?Number.MIN_SAFE_INTEGER:c,s=e.max,l=void 0===s?Number.MAX_SAFE_INTEGER:s,u=e.enableFloat,d=void 0!==u&&u,p=e.disabled,j=void 0!==p&&p,b=i.useState(a.toString()),g=Object(X.a)(b,2),f=g[0],m=g[1],h=d?Ln:Hn;return Object(Ee.jsx)(At.a,{id:t,label:n,sx:function(e){return{marginRight:e.spacing(1),flexBasis:300,marginTop:e.spacing(2.75),width:"100%"}},value:f,onChange:function(e){var t=e.target,n=t.value;if(h.test(t.value)){var a=Number(n);isNaN(a)||a<o||a>l||(m(n),r(a))}},type:"text",margin:"normal",autoComplete:"off",disabled:j})},Un=function(e){return Object.keys(e).filter((function(e){return Number.isNaN(+e)}))},Vn=function(){var e=Object(s.c)(),t=Object(s.d)(nt),n=Object(s.d)(Tn),a=Object(s.d)(Nn),i=Object(s.d)(Fn);return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(Rn,{children:[Object(Ee.jsx)(It.a,{container:!0,spacing:2,children:Object(Ee.jsxs)(It.a,{item:!0,xs:4,children:[Object(Ee.jsx)(Pn.a,{children:"Optimization Algorithm"}),Object(Ee.jsx)(Dn.a,{value:n,onChange:function(t){var n=t.target.value;e(V.actions.updateOptimizationAlgorithm({optimizationAlgorithm:n}))},displayEmpty:!0,inputProps:{"aria-label":"Without label"},sx:function(e){return{flexBasis:300,width:"100%",marginRight:e.spacing(1),marginTop:e.spacing(0)}},children:Un(P).map((function(e){return Object(Ee.jsx)(S.a,{value:P[e],children:P[e]},e)}))})]})}),Object(Ee.jsx)(It.a,{container:!0,spacing:2,children:Object(Ee.jsx)(It.a,{item:!0,xs:4,children:Object(Ee.jsx)(Wn,{id:"learning-rate",label:"Learning rate",value:i,dispatchCallBack:function(t){e(V.actions.updateLearningRate({learningRate:t}))},min:0,enableFloat:!0})})})]}),Object(Ee.jsxs)(Rn,{children:[Object(Ee.jsx)(It.a,{container:!0,spacing:2,children:Object(Ee.jsxs)(It.a,{item:!0,xs:4,children:[Object(Ee.jsx)(Pn.a,{children:"Loss Function"}),Object(Ee.jsx)(Dn.a,{value:a,onChange:function(t){var n=t.target.value;e(V.actions.updateLossFunction({lossFunction:n}))},displayEmpty:!0,inputProps:{"aria-label":"Without label"},sx:function(e){return{flexBasis:300,width:"100%",marginRight:e.spacing(1),marginTop:e.spacing(0)}},children:Un(E).map((function(e){return Object(Ee.jsx)(S.a,{value:E[e],children:E[e]},e)}))})]})}),Object(Ee.jsxs)(It.a,{container:!0,direction:"row",spacing:2,children:[Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(Wn,{id:"batch-size",label:"Batch size",value:t.batchSize,dispatchCallBack:function(t){e(V.actions.updateBatchSize({batchSize:t}))},min:1})}),Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(Wn,{id:"epochs",label:"Epochs",value:t.epochs,dispatchCallBack:function(t){e(V.actions.updateEpochs({epochs:t}))},min:1})})]})]})]})},qn=function(){var e=Object(i.useState)(!1),t=Object(X.a)(e,2),n=t[0],a=t[1];return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,{button:!0,onClick:function(){a(!n)},style:{padding:"12px 0px"},children:[Object(Ee.jsx)(h.a,{children:n?Object(Ee.jsx)(Ut.a,{}):Object(Ee.jsx)(qt.a,{})}),Object(Ee.jsx)(O.a,{primary:"Optimization Settings",style:{fontSize:"20px"}})]}),Object(Ee.jsx)(Lt.a,{in:n,timeout:"auto",unmountOnExit:!0,children:Object(Ee.jsx)(Vn,{})})]})},Gn=function(){var e=Object(s.c)(),t=Object(i.useState)(!1),n=Object(X.a)(t,2),a=n[0],r=n[1],c=Object(s.d)(at);return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,{button:!0,onClick:function(){r(!a)},style:{padding:"12px 0px"},children:[Object(Ee.jsx)(h.a,{children:a?Object(Ee.jsx)(Ut.a,{}):Object(Ee.jsx)(qt.a,{})}),Object(Ee.jsx)(O.a,{primary:"Dataset Settings",style:{fontSize:"1em"}})]}),Object(Ee.jsx)(Lt.a,{in:a,timeout:"auto",unmountOnExit:!0,children:Object(Ee.jsxs)("div",{style:{padding:"12px 0px",width:"300"},children:[Object(Ee.jsx)(Be.a,{id:"range-slider",gutterBottom:!0,children:"What fraction of the labeled images should be used for training? (The rest is used for validation)"}),Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(Wn,{id:"test-split",label:"Train percentage",value:c,dispatchCallBack:function(t){e(V.actions.updateTrainingPercentage({trainingPercentage:t}))},min:0,max:1,enableFloat:!0})})]})})]})},Qn=n(1019),Kn=function(e){var t=e.classifier;return{inputShape:t.inputShape,selectedModel:t.selectedModel}},Zn=function(e){return e.classifier.inputShape},Jn=function(e){return e.classifier.userUploadedModel},_n=function(){var e=Object(s.d)(Kn),t=Object(s.d)(Jn),n=Object(s.d)(Zn),a=i.useState(e.selectedModel),r=Object(X.a)(a,2),c=r[0],o=r[1],l=i.useState(!1),u=Object(X.a)(l,2),d=u[0],p=u[1],j=i.useState(""),b=Object(X.a)(j,2),g=b[0],m=b[1],h=Object(s.c)(),O=W.slice();t&&O.push(t),i.useEffect((function(){c.requiredChannels?(p(!0),m("".concat(c.modelName," requires ").concat(c.requiredChannels," channels!"))):(p(!1),m(""))}),[c]);return Object(Ee.jsxs)(Rn,{children:[Object(Ee.jsx)(It.a,{container:!0,spacing:2,children:Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(Qn.a,{disableClearable:!0,options:O,onChange:function(e,t){var a=t;o(a),a.requiredChannels&&h(V.actions.updateInputShape({inputShape:Object(f.a)(Object(f.a)({},n),{},{channels:a.requiredChannels})})),h(V.actions.updateSelectedModel({model:a}))},getOptionLabel:function(e){return e.modelName},sx:{width:300},renderInput:function(e){return Object(Ee.jsx)(At.a,Object(f.a)(Object(f.a)({},e),{},{autoComplete:"off",label:"Model architecture"}))},value:c})})}),Object(Ee.jsxs)(It.a,{container:!0,direction:"row",spacing:2,children:[Object(Ee.jsx)(It.a,{item:!0,xs:1,children:Object(Ee.jsx)(Wn,{id:"shape-rows",label:"Input rows",value:n.height,dispatchCallBack:function(e){h(V.actions.updateInputShape({inputShape:Object(f.a)(Object(f.a)({},n),{},{height:e})}))},min:1})}),Object(Ee.jsx)(It.a,{item:!0,xs:1,children:Object(Ee.jsx)(Wn,{id:"shape-cols",label:"Input cols",value:n.width,dispatchCallBack:function(e){h(V.actions.updateInputShape({inputShape:Object(f.a)(Object(f.a)({},n),{},{width:e})}))},min:1})}),Object(Ee.jsx)(It.a,{item:!0,xs:1,children:Object(Ee.jsx)(Wn,{id:"shape-channels",label:"Input channels",value:n.channels,dispatchCallBack:function(e){h(V.actions.updateInputShape({inputShape:Object(f.a)(Object(f.a)({},n),{},{channels:e})}))},min:1,disabled:d})})]}),Object(Ee.jsx)(It.a,{container:!0,spacing:1,children:Object(Ee.jsx)(It.a,{item:!0,xs:3,marginTop:1,children:d?Object(Ee.jsx)(Re.a,{severity:"info",children:g}):Object(Ee.jsx)(Ee.Fragment,{})})})]})},Xn=function(){var e=Object(i.useState)(!1),t=Object(X.a)(e,2),n=t[0],a=t[1],r=Object(zn.a)("form")({display:"flex",flexWrap:"wrap"});return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,{button:!0,onClick:function(){a(!n)},style:{padding:"12px 0px"},children:[Object(Ee.jsx)(h.a,{children:n?Object(Ee.jsx)(Ut.a,{}):Object(Ee.jsx)(qt.a,{})}),Object(Ee.jsx)(O.a,{primary:"Architecture Settings",style:{fontSize:"20px"}})]}),Object(Ee.jsx)(Lt.a,{in:n,timeout:"auto",unmountOnExit:!0,children:Object(Ee.jsx)(r,{noValidate:!0,autoComplete:"off",children:Object(Ee.jsx)(_n,{})})})]})},Yn=n(1040),$n=n(1039),ea=function(e){return e.classifier.rescaleOptions},ta=function(){var e=Object(s.d)(ea),t=Object(s.c)(),n=i.useState(!e.rescale),a=Object(X.a)(n,2),r=a[0],c=a[1],o=Object(zn.a)("form")({display:"flex",flexWrap:"wrap"}),l=Object(zn.a)(At.a)((function(e){return{marginRight:e.theme.spacing(1),flexBasis:300,width:"100%"}}));return Object(Ee.jsx)(o,{noValidate:!0,autoComplete:"off",children:Object(Ee.jsxs)(It.a,{container:!0,spacing:2,children:[Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)($n.a,{control:Object(Ee.jsx)(Qt.a,{checked:e.rescale,onChange:function(){c(!r),t(V.actions.updateRescaleOptions({rescaleOptions:Object(f.a)(Object(f.a)({},e),{},{rescale:!e.rescale})}))},name:"rescale",color:"primary"}),label:"Rescale pixels?"})}),Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(l,{id:"minimum",label:"Minimum pixel value",disabled:r,value:e.rescaleMinMax.min,onChange:function(n){var a=n.target,i=Number(a.value);i&&t(V.actions.updateRescaleOptions({rescaleOptions:Object(f.a)(Object(f.a)({},e),{},{rescaleMinMax:Object(f.a)(Object(f.a)({},e.rescaleMinMax),{},{min:i})})}))},type:"number",margin:"normal",defaultValue:"0"})}),Object(Ee.jsx)(It.a,{item:!0,xs:2,children:Object(Ee.jsx)(l,{id:"maximum",label:"Maximum pixel value",disabled:r,value:e.rescaleMinMax.max,onChange:function(n){var a=n.target,i=Number(a.value);i&&t(V.actions.updateRescaleOptions({rescaleOptions:Object(f.a)(Object(f.a)({},e),{},{rescaleMinMax:Object(f.a)(Object(f.a)({},e.rescaleMinMax),{},{max:i})})}))},margin:"normal",type:"number",defaultValue:"100"})})]})})},na=function(e){e.closeDialog,e.openedDialog;var t=Object(i.useState)(!1),n=Object(X.a)(t,2),a=n[0],r=n[1];return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,{disabled:!0,button:!0,onClick:function(){r(!a)},style:{padding:"12px 0px"},children:[Object(Ee.jsx)(h.a,{children:a?Object(Ee.jsx)(Ut.a,{}):Object(Ee.jsx)(qt.a,{})}),Object(Ee.jsx)(O.a,{primary:"Preprocessing",style:{fontSize:"1em"}})]}),Object(Ee.jsxs)(Lt.a,{in:a,timeout:"auto",unmountOnExit:!0,children:[Object(Ee.jsx)(Be.a,{id:"rescaling",gutterBottom:!0,children:"Pixel Intensity Rescaling"}),Object(Ee.jsx)(ta,{}),Object(Ee.jsx)(Be.a,{id:"augmentation",gutterBottom:!0,children:"Data Augmentation"}),Object(Ee.jsx)(Yn.a,{row:!0,children:Object(Ee.jsx)($n.a,{control:Object(Ee.jsx)(Qt.a,{value:"randomDataAugmentation"}),label:"Random Data Augmentation"})}),Object(Ee.jsx)(Be.a,{id:"resizing",gutterBottom:!0,children:"Resizing"}),Object(Ee.jsx)(Yn.a,{row:!0,children:Object(Ee.jsx)($n.a,{control:Object(Ee.jsx)(Qt.a,{value:"paddingOption1"}),label:"Padding Option 1"})}),Object(Ee.jsx)(Yn.a,{row:!0,children:Object(Ee.jsx)($n.a,{control:Object(Ee.jsx)(Qt.a,{value:"paddingOption2"}),label:"Padding Option 2"})}),Object(Ee.jsx)(kn.a,{title:"Apply Preprocessing Settings",placement:"bottom",children:Object(Ee.jsx)("div",{children:Object(Ee.jsx)(Te.a,{variant:"contained",color:"primary",onClick:function(){},children:"Apply preprocessing"})})})]})]})},aa=n(993),ia=i.forwardRef((function(e,t){return Object(Ee.jsx)(aa.a,Object(f.a)({direction:"right",ref:t},e))})),ra=function(e){var t=e.closeDialog,n=e.openedDialog,a=e.openedDrawer,r=Object(i.useState)(!1),c=Object(X.a)(r,2),o=c[0],l=c[1],u=Object(i.useState)(!0),d=Object(X.a)(u,2),p=d[0],b=d[1],f=Object(s.d)(at),m=Object(s.d)($e);Object(i.useEffect)((function(){l(0===m.length)}),[m]);var h=Object(s.c)(),O=function(){var e=Object(j.a)(g.a.mark((function e(){var t,n,a,i,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Y.shuffle(m).map((function(e){return e.id})),n=Math.round(f*t.length),a=t.length-n,i=Y.take(t,n),r=Y.takeRight(t,a),h(me.actions.updateImagesPartition({ids:i,partition:_.Training})),h(me.actions.updateImagesPartition({ids:r,partition:_.Validation})),h(V.actions.fit({onEpochEnd:function(e,t){console.info(t),console.info(e+":"+t.loss)}}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ee.jsxs)(Pe.a,{disableEscapeKeyDown:!0,fullScreen:!0,onClose:t,open:n,TransitionComponent:ia,style:{zIndex:1203},children:[Object(Ee.jsx)(Mn,{closeDialog:t,fit:O,openedDrawer:a,disableFitting:o}),o&&p?Object(Ee.jsx)(Re.a,{onClose:function(){b(!1)},severity:"info",children:"Please label images to train a model."}):Object(Ee.jsx)(Ee.Fragment,{}),Object(Ee.jsxs)(ze.a,{children:[Object(Ee.jsxs)(Nt.a,{dense:!0,children:[Object(Ee.jsx)(na,{closeDialog:t,openedDialog:n}),Object(Ee.jsx)(Xn,{}),Object(Ee.jsx)(qn,{}),Object(Ee.jsx)(Gn,{})]}),Object(Ee.jsx)("div",{id:"tfvis-container"})]})]})},ca=n(392),oa=n.n(ca),sa=function(){var e=Ue(),t=e.onClose,n=e.onOpen,a=e.open;return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,{onClick:function(){},children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(vn.a,{})}),Object(Ee.jsx)(O.a,{primary:"Fit"}),Object(Ee.jsx)(ot.a,{edge:"end",onClick:function(){n()},children:Object(Ee.jsx)(oa.a,{})})]}),Object(Ee.jsx)(ra,{openedDialog:a,openedDrawer:!0,closeDialog:t})]})},la=n(393),ua=n.n(la),da=n(608),pa=n.n(da),ja=function(e){var t=e.disabled,n=e.helperText,a=e.children;return Object(Ee.jsx)(kn.a,{componentsProps:{tooltip:{sx:{backgroundColor:"#565656",fontSize:"0.85rem"}},arrow:{sx:{color:"#565656"}}},title:t?n:"",placement:"right",arrow:!0,children:Object(Ee.jsx)(m.a,{disabled:t,children:a})})},ba=function(e){return Object(Ee.jsxs)(ja,Object(f.a)(Object(f.a)({},e),{},{children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(pa.a,{})}),Object(Ee.jsx)(O.a,{primary:"Evaluate"}),Object(Ee.jsx)(ot.a,{onClick:function(){alert("Not yet implemented")},edge:"end",disabled:e.disabled,children:Object(Ee.jsx)(ua.a,{})})]}))},ga=n(394),fa=n.n(ga),ma=function(e){var t=Object(s.c)(),n=function(){var e=Object(j.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(V.actions.predict({}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ee.jsxs)(ja,Object(f.a)(Object(f.a)({},e),{},{children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(fa.a,{})}),Object(Ee.jsx)(O.a,{primary:"Predict"}),Object(Ee.jsx)(ot.a,{onClick:n,edge:"end",disabled:e.disabled,children:Object(Ee.jsx)(ua.a,{})})]}))},ha=function(){var e=r.a.useState(!1),t=Object(X.a)(e,2),n=t[0],a=t[1],c=r.a.useState(!0),o=Object(X.a)(c,2),l=o[0],u=o[1],d=r.a.useState("disabled: no trained model"),p=Object(X.a)(d,2),j=p[0],b=p[1],g=Object(s.d)(Pt),f=Object(s.d)(En);Object(i.useEffect)((function(){f&&(u(!0),b("disabled during training."))}),[f]),Object(i.useEffect)((function(){g&&u(!1)}),[g]);return Object(Ee.jsxs)(Nt.a,{dense:!0,children:[Object(Ee.jsxs)(m.a,{button:!0,dense:!0,onClick:function(){a(!n)},children:[Object(Ee.jsx)(h.a,{children:n?Object(Ee.jsx)(Ut.a,{}):Object(Ee.jsx)(qt.a,{})}),Object(Ee.jsx)(O.a,{primary:"Classifier"})]}),Object(Ee.jsx)(Lt.a,{in:n,timeout:"auto",unmountOnExit:!0,children:Object(Ee.jsxs)(Nt.a,{component:"div",dense:!0,disablePadding:!0,children:[Object(Ee.jsx)(sa,{}),Object(Ee.jsx)(ma,{disabled:l,helperText:j}),Object(Ee.jsx)(ba,{disabled:l,helperText:j})]})})]})},Oa=n(1041),xa=n(1042),ya=Object(zn.a)("div")((function(e){return e.theme.mixins.toolbar})),va=function(e){return e.settings.themeMode},Ca=n.p+"static/media/Sun.81cb4cfc.svg",Sa=n.p+"static/media/Moon.593035e9.svg",ka=function(e){var t=e.onClose,n=e.open,i=Object(s.c)(),r=Object(s.d)(va);return Object(Ee.jsxs)(Pe.a,{fullScreen:!0,onClose:t,open:n,children:[Object(Ee.jsx)(Cn.a,{sx:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)",boxShadow:"none"},color:"inherit",position:"fixed",children:Object(Ee.jsxs)(Sn.a,{children:[Object(Ee.jsx)(Be.a,{sx:{flexGrow:1},variant:"h6",children:"Settings"}),Object(Ee.jsx)(ot.a,{onClick:t,children:Object(Ee.jsx)(lt.a,{})})]})}),Object(Ee.jsx)(ya,{}),Object(Ee.jsx)(ze.a,{sx:{marginTop:function(e){return e.spacing(2)}},children:Object(Ee.jsx)(Oa.a,{maxWidth:"md",children:Object(Ee.jsx)(Yn.a,{children:Object(Ee.jsx)($n.a,{control:Object(Ee.jsx)(wa,{checked:r===a.Dark,onChange:function(){return e=r===a.Dark?a.Light:a.Dark,void i(T({mode:e}));var e}}),label:Object(Ee.jsx)(Be.a,{variant:"h6",children:r===a.Dark?"Dark Mode":"Light Mode"})})})})})]})},wa=Object(zn.a)(xa.a)((function(e){var t=e.theme;return{width:62,height:34,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:"#fff",transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:"url(".concat(Sa,")")},"& + .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#8796A5":"#aab4be"}}},"& .MuiSwitch-thumb":{backgroundColor:"dark"===t.palette.mode?"#003892":"#001e3c",width:32,height:32,"&:before":{content:"''",position:"absolute",width:"100%",height:"100%",left:0,top:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:"url(".concat(Ca,")")}},"& .MuiSwitch-track":{opacity:1,backgroundColor:"dark"===t.palette.mode?"#8796A5":"#aab4be",borderRadius:10}}})),Ia=function(){var e=Ue(),t=e.onClose,n=e.onOpen,a=e.open;return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsxs)(m.a,{button:!0,onClick:n,children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(oa.a,{})}),Object(Ee.jsx)(O.a,{primary:"Settings"})]}),Object(Ee.jsx)(ka,{onClose:t,open:a})]})},Aa=n(609),Ea=n.n(Aa),Ma=function(){return Object(Ee.jsxs)(m.a,{button:!0,disabled:!0,children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(Ea.a,{})}),Object(Ee.jsx)(O.a,{primary:"Help"})]})},Pa=n(610),Da=n.n(Pa),za=function(){return Object(Ee.jsxs)(m.a,{button:!0,disabled:!0,children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(Da.a,{})}),Object(Ee.jsx)(O.a,{primary:"Send feedback"})]})},Ba=function(){return Object(Ee.jsxs)(Nt.a,{dense:!0,children:[Object(Ee.jsx)(Ia,{}),Object(Ee.jsx)(za,{}),Object(Ee.jsx)(Ma,{})]})},Ra=n(1043),Fa=function(){return Object(Ee.jsxs)(Ra.a,{anchor:"left",sx:{flexShrink:0,width:function(e){return e.spacing(32)},"& > \t.MuiDrawer-paper":{zIndex:0,width:function(e){return e.spacing(32)}}},open:!0,variant:"persistent",children:[Object(Ee.jsx)(ya,{}),Object(Ee.jsx)(Ht,{}),Object(Ee.jsx)(k.a,{}),Object(Ee.jsx)(xn,{}),Object(Ee.jsx)(k.a,{}),Object(Ee.jsx)(ha,{}),Object(Ee.jsx)(k.a,{}),Object(Ee.jsx)(Ba,{})]})},Ta=function(e){return e.settings.tileSize},Na=function(e){var t=e.anchorEl,n=e.imageIds,a=e.onClose,i=Object(s.d)(Qe),r=Object(s.c)();return Object(Ee.jsx)(v.a,{anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"},anchorEl:t,open:Boolean(t),onClose:a,children:Object(Ee.jsx)(C.a,{dense:!0,variant:"menu",children:i.map((function(e){return Object(Ee.jsxs)(S.a,{onClick:function(t){return i=e.id,a(),r(Se({ids:n,categoryId:i})),void r(B.actions.clearSelectedImages());var i},children:[Object(Ee.jsx)(Zt.a,{style:{color:e.color,paddingRight:"8px"}}),e.name]},e.id)}))})})},Ha=function(e){var t=e.imageIds,n=e.onClose,a=e.open,i=Object(s.c)();return Object(Ee.jsxs)(Pe.a,{fullWidth:!0,onClose:n,open:a,children:[Object(Ee.jsxs)(De.a,{children:["Delete ",t.length," image",t.length>1&&"s","?"]}),Object(Ee.jsx)(ze.a,{children:"Images will be deleted from the project."}),Object(Ee.jsxs)(Fe.a,{children:[Object(Ee.jsx)(Te.a,{onClick:n,color:"primary",children:"Cancel"}),Object(Ee.jsx)(Te.a,{onClick:function(){i(me.actions.deleteImages({ids:t})),i(B.actions.clearSelectedImages()),n()},color:"primary",children:"Delete"})]})]})},La=n(614),Wa=n.n(La),Ua=n(613),Va=n.n(Ua),qa=n(612),Ga=n.n(qa),Qa=n(611),Ka=n.n(Qa),Za=function(){var e=Object(s.c)(),t=Object(s.d)(ct),n=Object(s.d)(rt),a=r.a.useState(null),i=Object(X.a)(a,2),c=i[0],o=i[1],l=Ue(),u=l.onClose,d=l.onOpen,p=l.open;return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(aa.a,{appear:!1,direction:"down",in:n.length>0,children:Object(Ee.jsx)(Cn.a,{color:"inherit",position:"fixed",children:Object(Ee.jsxs)(Sn.a,{children:[Object(Ee.jsx)(ot.a,{sx:{marginRight:function(e){return e.spacing(2)}},edge:"start",color:"inherit",onClick:function(){e(B.actions.clearSelectedImages())},children:Object(Ee.jsx)(Ka.a,{})}),Object(Ee.jsxs)(Be.a,{sx:{flexGrow:1},children:[n.length," selected images"]}),Object(Ee.jsx)(cn.a,{sx:{flexGrow:1}}),Object(Ee.jsx)(jn.a,{avatar:Object(Ee.jsx)(_t.a,{color:"inherit"}),label:"Categorise",onClick:function(e){o(e.currentTarget)},variant:"outlined",style:{marginRight:15}}),Object(Ee.jsx)(jn.a,{avatar:Object(Ee.jsx)(Ga.a,{color:"inherit"}),label:"Annotate",onClick:function(a){var i=n.map((function(n,a){var i=t.find((function(e){return e.id===n})),r={categoryId:i.categoryId,id:i.id,annotations:i.annotations,name:i.name,partition:_.Inference,shape:i.shape,originalSrc:i.originalSrc,src:i.src};return 0===a&&Object(s.b)((function(){e(de({image:r.id})),e(pe({selectedAnnotations:[],selectedAnnotation:void 0}))})),r}));i&&e(le.actions.setImages({images:i}))},variant:"outlined"}),Object(Ee.jsx)(ot.a,{color:"inherit",onClick:function(){var n=t.map((function(e){return e.id}));e(B.actions.selectAllImages({ids:n}))},children:Object(Ee.jsx)(Va.a,{})}),Object(Ee.jsx)(kn.a,{title:"Delete",children:Object(Ee.jsx)(ot.a,{color:"inherit",onClick:d,children:Object(Ee.jsx)(Wa.a,{})})})]})})}),Object(Ee.jsx)(Na,{anchorEl:c,imageIds:n,onClose:function(){o(null)}}),Object(Ee.jsx)(Ha,{imageIds:n,onClose:u,open:p})]})},Ja=n(1044),_a=n(1045),Xa=n(1046),Ya=n(1001),$a=function(e){var t,n=e.image,a=null!==(t=Object(s.d)(Qe).find((function(e){return e.id===n.categoryId})))&&void 0!==t?t:{color:"undefined",name:"undefined"},i=a.color,r=a.name,c={color:i,marginLeft:"8px",marginTop:"8px"},o=n.partition===_.Inference&&n.categoryId!==K;return Object(Ee.jsx)(kn.a,{title:r,placement:"right",arrow:!0,componentsProps:{tooltip:{sx:{borderRadius:2,backgroundColor:i}},arrow:{sx:{color:i}}},children:o?Object(Ee.jsx)(fa.a,{sx:c}):Object(Ee.jsx)(Zt.a,{sx:c})})},ei=function(e){var t=e.onDrop,n=Object(s.c)(),a=Object(s.d)(ct),i=Object(s.d)(rt),r=Object(Ya.a)((function(){return{accept:[u.b.FILE],drop:function(e){t&&t(e)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}}),[]),c=Object(X.a)(r,2),o=c[0].isOver,l=c[1],d=Object(s.d)(Ta),p=function(e){return{width:(220*e).toString()+"px",height:(220*e).toString()+"px",margin:"2px"}};return Object(Ee.jsx)(cn.a,{component:"main",ref:l,sx:function(e){return{flexGrow:1,height:"100%",paddingTop:e.spacing(3),marginLeft:e.spacing(32),transition:e.transitions.create("margin",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})}},style:{border:o?"5px solid blue":""},children:Object(Ee.jsxs)(Oa.a,{sx:function(e){return{paddingBottom:e.spacing(8),paddingTop:e.spacing(8),height:"100%"}},maxWidth:!1,children:[Object(Ee.jsx)(Ja.a,{sx:{transform:"translateZ(0)",height:"100%"},cols:Math.floor(6/d),rowHeight:"auto",children:a.slice(0,1e3).map((function(e){return Object(Ee.jsxs)(_a.a,{onClick:function(){return function(e){i.includes(e.id)?n(B.actions.deselectImage({id:e.id})):n(B.actions.selectImage({id:e.id}))}(e)},style:p(d),sx:(t=e.id,i.includes(t)?{border:"solid 2px blue",borderRadius:"3px"}:{border:"none"}),children:[Object(Ee.jsx)(cn.a,{component:"img",alt:"",src:e.src,sx:{width:"100%",height:"100%",objectFit:"contain",top:0,transform:"none"}}),Object(Ee.jsx)(Xa.a,{position:"top",actionIcon:Object(Ee.jsx)($a,{image:e}),actionPosition:"left",sx:{background:"transparent"}})]},e.id);var t}))}),Object(Ee.jsx)(Za,{})]})})},ti=n(979),ni=n(397),ai=n.n(ni),ii=n(1038),ri=n(616),ci=Object(zn.a)(S.a)((function(){return{maxWidth:320}})),oi=function(e){e.onClose;var t=Object(ri.a)({appKey:"tetle78x244mpkz",chooserOptions:{multiselect:!0,linkType:"direct"},onSelected:function(e){e.forEach((function(e){}))}}).open;return Object(Ee.jsxs)(ci,{component:"span",dense:!0,onClick:t,children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(ai.a,{})}),Object(Ee.jsx)(O.a,{primary:"Dropbox"})]})},si=function(e){var t=e.anchorEl,n=e.onClose,a=Object(s.c)(),i=function(){var e=Object(j.a)(g.a.mark((function e(t){var i,r,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(t),t.persist(),t.currentTarget.files){e.next=4;break}return e.abrupt("return");case 4:i=t.currentTarget.files,r=0;case 6:if(!(r<i.length)){e.next=15;break}return c=i[r],e.next=10,ie(c);case 10:o=e.sent,a(xe({image:o}));case 12:r++,e.next=6;break;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)("input",{accept:"image/*",hidden:!0,type:"file",multiple:!0,id:"upload-images",onChange:i}),Object(Ee.jsxs)(v.a,{PaperProps:{style:{width:320}},TransitionComponent:ti.a,anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},onClose:n,open:Boolean(t),transformOrigin:{vertical:"top",horizontal:"center"},children:[Object(Ee.jsx)(ii.a,{sx:{color:"#80868b",margin:"16px",letterSpacing:".07272727em",fontSize:".6875rem",fontWeight:500,lineHeight:"1rem",textTransform:"uppercase",maxWidth:320},children:"Upload from"}),Object(Ee.jsx)("label",{htmlFor:"upload-images",children:Object(Ee.jsxs)(ci,{component:"span",dense:!0,onClick:n,children:[Object(Ee.jsx)(h.a,{children:Object(Ee.jsx)(ai.a,{})}),Object(Ee.jsx)(O.a,{primary:"Computer"})]})}),Object(Ee.jsx)(oi,{onClose:n})]})]})},li=n(618),ui=n.n(li),di=function(){var e=Ve(),t=e.anchorEl,n=e.onClose,a=e.onOpen,i=e.open;return Object(Ee.jsxs)(Ee.Fragment,{children:[Object(Ee.jsx)(kn.a,{title:"Open image",children:Object(Ee.jsx)(Te.a,{sx:{margin:function(e){return e.spacing(1)},textTransform:"none"},onClick:a,startIcon:Object(Ee.jsx)(ui.a,{}),children:"Open image"})}),Object(Ee.jsx)(si,{anchorEl:t,onClose:n,open:i})]})},pi=n(15),ji=function(){return Object(Ee.jsx)(Be.a,{sx:function(e){return Object(pi.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})},color:"inherit",noWrap:!0,variant:"h6",children:"Piximi"})},bi=n(1010),gi=n(619),fi=n.n(gi),mi=n(620),hi=n.n(mi),Oi=function(){var e=Object(s.c)(),t=r.a.useState(1),n=Object(X.a)(t,2),a=n[0],i=n[1];return Object(Ee.jsxs)(Sn.a,{children:[Object(Ee.jsx)(ji,{}),Object(Ee.jsx)(cn.a,{sx:{flexGrow:1}}),Object(Ee.jsx)(fi.a,{sx:function(e){return{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}),Object(Ee.jsx)(bi.a,{value:a,min:.6,max:4,step:.1,onChange:function(t,n){i(n),e(B.actions.updateTileSize({newValue:n}))},sx:{width:"10%"}}),Object(Ee.jsx)(hi.a,{sx:function(e){return{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}),Object(Ee.jsx)(di,{})]})},xi=function(){return Object(Ee.jsx)(cn.a,{children:Object(Ee.jsx)(Cn.a,{sx:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)",boxShadow:"none"},color:"inherit",position:"fixed",children:Object(Ee.jsx)(Oi,{})})})},yi=n(994),vi=function(){var e=Object(s.c)(),t=function(e){return e.preventDefault(),e.returnValue="Are you sure you want to exit?"};r.a.useEffect((function(){return window.addEventListener("beforeunload",t),function(){window.removeEventListener("beforeunload",t)}}),[]);var n=Object(i.useCallback)(function(){var t=Object(j.a)(g.a.mark((function t(n){var a,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=10;break}a=0;case 2:if(!(a<n.files.length)){t.next=10;break}return t.next=5,ie(n.files[a]);case 5:i=t.sent,e(xe({image:i}));case 7:a++,t.next=2;break;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(Ee.jsxs)(cn.a,{sx:{height:"100vh"},children:[Object(Ee.jsx)(yi.a,{}),Object(Ee.jsx)(xi,{}),Object(Ee.jsx)(Fa,{}),Object(Ee.jsx)(ei,{onDrop:n})]})},Ci=n(995),Si=n(628),ki=Object(Si.a)({components:{MuiListItemIcon:{styleOverrides:{root:{minWidth:36}}}}}),wi=Object(Si.a)({components:{MuiDrawer:{styleOverrides:{paperAnchorDockedLeft:{borderRight:"1px solid rgba(16, 16, 16)"},paperAnchorDockedRight:{borderLeft:"1px solid rgba(16, 16, 16)"},paper:{}}},MuiListItem:{styleOverrides:{root:{"&.Mui-selected":{backgroundColor:"rgba(60, 61, 62)"}}}},MuiListItemIcon:{styleOverrides:{root:{minWidth:36}}},MuiSlider:{styleOverrides:{rail:{color:"rgba(73, 73, 73)"},thumb:{color:"rgba(201, 201, 201)"},track:{color:"rgba(159, 159, 159)"}}}},palette:{background:{paper:"rgba(40, 40, 40)",default:"rgba(50, 50, 50)"},divider:"rgba(72, 72, 72)",text:{primary:"rgba(190, 190, 190)"},mode:"dark"}}),Ii=function(){var e=function(){var e=Object(s.c)(),t=Object(Ci.a)("(prefers-color-scheme: dark)"),n=Object(i.useState)(t?wi:ki),r=Object(X.a)(n,2),c=r[0],o=r[1],l=Object(s.d)(va);return Object(i.useEffect)((function(){e(T({mode:t?a.Dark:a.Light}))}),[t,e]),Object(i.useEffect)((function(){l===a.Light?o(ki):o(wi)}),[l]),c}();return Object(Ee.jsx)(p.a,{injectFirst:!0,children:Object(Ee.jsx)(d.a,{theme:e,children:Object(Ee.jsx)(vi,{})})})},Ai=n(108),Ei={classifier:V.reducer,imageViewer:le.reducer,project:me.reducer,settings:B.reducer,toolOptions:Ie.reducer},Mi=Object(Ai.b)(Ei),Pi=n(621),Di=n.n(Pi),zi=n(629),Bi=n(60),Ri=function(e){return e.imageViewer.selectedAnnotation},Fi=function(e){return e.imageViewer.activeImagePlane},Ti=g.a.mark(Ni);function Ni(e){var t,n,a,i,r,c,o,s,l,u,d,p,j,b,m,h;return g.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(t=e.payload,n=t.annotationState,a=t.annotationTool){g.next=3;break}return g.abrupt("return");case 3:if(n===L.Annotated){g.next=5;break}return g.abrupt("return");case 5:return g.next=7,Object(Bi.d)(_e);case 7:return i=g.sent,g.next=10,Object(Bi.d)(Fi);case 10:if(r=g.sent,i!==H.New){g.next=22;break}return g.next=14,Object(Bi.d)(Je);case 14:if(c=g.sent,a.annotate(c,r),a.annotation){g.next=18;break}return g.abrupt("return");case 18:return g.next=20,Object(Bi.c)(le.actions.setSelectedAnnotations({selectedAnnotations:[a.annotation],selectedAnnotation:a.annotation}));case 20:g.next=45;break;case 22:return g.next=24,Object(Bi.d)(Xe);case 24:if(g.sent!==N.Zoom){g.next=27;break}return g.abrupt("return");case 27:return g.next=29,Object(Bi.d)(Ri);case 29:if(o=g.sent,a.annotationState===L.Annotated){g.next=32;break}return g.abrupt("return");case 32:if(o){g.next=34;break}return g.abrupt("return");case 34:if(i===H.Add?(u=a.add(o.mask,o.boundingBox),d=Object(X.a)(u,2),s=d[0],l=d[1]):i===H.Subtract?(p=a.subtract(o.mask,o.boundingBox),j=Object(X.a)(p,2),s=j[0],l=j[1]):i===H.Intersect&&(b=a.intersect(o.mask,o.boundingBox),m=Object(X.a)(b,2),s=m[0],l=m[1]),a.mask=s,a.boundingBox=l,a.boundingBox&&a.mask){g.next=39;break}return g.abrupt("return");case 39:return g.next=41,Object(Bi.c)(le.actions.setSelectedAnnotations({selectedAnnotations:[Object(f.a)(Object(f.a)({},o),{},{boundingBox:a.boundingBox,mask:a.mask})],selectedAnnotation:Object(f.a)(Object(f.a)({},o),{},{boundingBox:a.boundingBox,mask:a.mask})}));case 41:return g.next=43,Object(Bi.d)(Je);case 43:h=g.sent,a.annotate(h,r);case 45:case"end":return g.stop()}}),Ti)}var Hi=g.a.mark(Li);function Li(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Bi.e)(le.actions.setAnnotationState,Ni);case 2:case"end":return e.stop()}}),Hi)}var Wi=n(622),Ui=function(e){return e.imageViewer.selectedAnnotations.map((function(e){return e.id}))},Vi=function(e){return e.imageViewer.selectedAnnotations},qi=g.a.mark(Gi);function Gi(e){var t,n,a,i;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Object(Wi.a)(e),r.next=3,Object(Bi.d)(Ui);case 3:if(r.sent){r.next=6;break}return r.abrupt("return");case 6:return r.next=8,Object(Bi.d)(Ze);case 8:if(r.sent){r.next=11;break}return r.abrupt("return");case 11:return r.next=13,Object(Bi.d)(Vi);case 13:return t=r.sent,r.next=16,Object(Bi.d)(Je);case 16:return n=r.sent,a=Y.map(t,(function(e){return Object(f.a)(Object(f.a)({},e),{},{categoryId:n.id})})),r.next=20,Object(Bi.d)(Ri);case 20:if(i=r.sent){r.next=23;break}return r.abrupt("return");case 23:return r.next=25,Object(Bi.c)(le.actions.setSelectedAnnotations({selectedAnnotations:a,selectedAnnotation:Object(f.a)(Object(f.a)({},i),{},{categoryId:n.id})}));case 25:case"end":return r.stop()}}),qi)}var Qi=g.a.mark(Ki);function Ki(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Bi.e)(le.actions.setSelectedCategoryId,Gi);case 2:case"end":return e.stop()}}),Qi)}var Zi=function(e,t){var n=e;return n.compile({loss:function(){switch(t.lossFunction){case E.AbsoluteDifference:return"absoluteDifference";case E.CategoricalCrossEntropy:return"categoricalCrossentropy";case E.CosineDistance:return"cosineDistance";case E.Hinge:return"hingeLoss";case E.Huber:return"huberLoss";case E.Log:return"logLoss";case E.MeanSquaredError:return"meanSquaredError";case E.SigmoidCrossEntropy:return"sigmoidCrossEntropy";default:return"softmaxCrossEntropy"}}(),metrics:t.metrics.map((function(e){switch(e){case M.BinaryAccuracy:return"binaryAccuracy";case M.BinaryCrossEntropy:return"binaryCrossentropy";case M.CategoricalAccuracy:return"categoricalAccuracy";case M.CategoricalCrossEntropy:case M.CosineProximity:return"categoricalCrossentropy";case M.MeanAbsoluteError:return"meanAbsoluteError";case M.MeanAbsolutePercentageError:return"meanAbsolutePercentageError";case M.MeanSquaredError:return"meanSquaredError";case M.Precision:return"precision";case M.Recall:return"recall";case M.SparseCategoricalAccuracy:return"sparseCategoricalAccuracy"}})),optimizer:function(){switch(t.optimizationAlgorithm){case P.Adadelta:return Ne.m.adadelta(t.learningRate);case P.Adagrad:return Ne.m.adagrad(t.learningRate);case P.Adam:return Ne.m.adam(t.learningRate);case P.Adamax:return Ne.m.adamax(t.learningRate);case P.RMSProp:return Ne.m.rmsprop(t.learningRate);case P.StochasticGradientDescent:default:return Ne.m.sgd(t.learningRate)}}()}),n},Ji=n(459),_i=function(){var e=Object(j.a)(g.a.mark((function e(t,n,a,i){var r,c,o,s,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.metrics,c=r.concat(r.map((function(e){return"val_"+e})),"loss","val_loss"),o=document.getElementById("tfvis-container"),Ji.show.modelSummary(o,t),s={callbacks:[{onEpochEnd:i},Ji.show.fitCallbacks(o,c,{callbacks:["onEpochEnd"]})],epochs:a.epochs,validationData:n.val.batch(a.batchSize)},e.next=7,t.fitDataset(n.train.batch(a.batchSize),s);case 7:return l=e.sent,e.abrupt("return",{fitted:t,status:l});case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),Xi=function(e,t){var n=e.width,a=e.height,i=e.channels,r=Ne.j();return r.add(Ne.f.conv2d({inputShape:[n,a,i],kernelSize:5,filters:8,strides:1,activation:"relu",kernelInitializer:"varianceScaling"})),r.add(Ne.f.maxPooling2d({poolSize:[2,2],strides:[2,2]})),r.add(Ne.f.conv2d({kernelSize:5,filters:16,strides:1,activation:"relu",kernelInitializer:"varianceScaling"})),r.add(Ne.f.maxPooling2d({poolSize:[2,2],strides:[2,2]})),r.add(Ne.f.flatten()),r.add(Ne.f.dense({units:t,kernelInitializer:"varianceScaling",activation:"softmax"})),r},Yi=function(){var e=Object(j.a)(g.a.mark((function e(t,n){var a,i,r,c,o,s,l,u,d,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((a=Ne.j()).add(Ne.f.inputLayer({inputShape:n})),i=Ne.k.SerializationMap.getMap().classNameMap,r=1;r<t.layers.length;r++)c=t.layers[r],o=c.getClassName(),s=Object(X.a)(i[o],2),l=s[0],u=s[1],d=c.getConfig(),p=u(l,d),a.add(p),p.setWeights(c.getWeights());return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$i=function(){var e=Object(j.a)(g.a.mark((function e(t,n){var a,i,r,c,o,s,l,u,d,p,j,b,f,m,h=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(h.length>2&&void 0!==h[2])||h[2],i=!(h.length>3&&void 0!==h[3])||h[3],r=t.width,c=t.height,o=[r,c,3],s="https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_0.25_224/model.json",e.next=8,Ne.g(s);case 8:l=e.sent,u="conv_pw_13_relu",d=Ne.j(),p=Object(G.a)(l.layers),e.prev=12,p.s();case 14:if((j=p.n()).done){e.next=21;break}if(b=j.value,d.add(b),b.name!==u){e.next=19;break}return e.abrupt("break",21);case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(12),p.e(e.t0);case 26:return e.prev=26,p.f(),e.finish(26);case 29:if(f=d,o===[224,224,3]){e.next=34;break}return e.next=33,Yi(f,o);case 33:f=e.sent;case 34:return a&&f.layers.forEach((function(e){e.trainable=!1})),i&&(f.add(Ne.f.globalAveragePooling2d({})),m=f.layers[f.layers.length-1].outputShape[1],f.add(Ne.f.reshape({targetShape:[1,1,m]})),f.add(Ne.f.dropout({rate:.001})),f.add(Ne.f.conv2d({filters:n,kernelSize:[1,1]})),f.add(Ne.f.reshape({targetShape:[n]})),f.add(Ne.f.activation({activation:"softmax"}))),e.abrupt("return",f);case 37:case"end":return e.stop()}}),e,null,[[12,23,26,29]])})));return function(t,n){return e.apply(this,arguments)}}(),er=function(){var e=Object(j.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.selectedModel.modelType,e.next=e.t0===D.SimpleCNN?3:e.t0===D.MobileNet?4:5;break;case 3:return e.abrupt("return",Xi(t.inputShape,n));case 4:return e.abrupt("return",$i(t.inputShape,n));case 5:alert("Invalid model selected!");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tr=function(e){return function(t){return Object(f.a)(Object(f.a)({},t),{},{ys:Ne.h(t.ys,e)})}},nr=function(){var e=Object(j.a)(g.a.mark((function e(t,n,a){var i,r,c,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.n.fetch(a.xs);case 2:return i=e.sent,e.next=5,i.arrayBuffer();case 5:return r=e.sent,e.next=8,$.a.load(r);case 8:return c=e.sent,o=c.getCanvas(),s=Ne.b.fromPixels(o,t),n&&(s=s.div(255)),e.abrupt("return",new Promise((function(e){return e(Object(f.a)(Object(f.a)({},a),{},{xs:s}))})));case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ar=function(){var e=Object(j.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ne.d.resizeBilinear(n.xs,[t.height,t.width]),e.abrupt("return",new Promise((function(e){return e(Object(f.a)(Object(f.a)({},n),{},{xs:a}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ir=function(e,t){var n=e.length;return g.a.mark((function a(){var i,r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=0,r=g.a.mark((function n(){var a,r;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e[i],r=t.findIndex((function(e){if(e.id!==K)return e.id===a.categoryId})),n.next=4,{xs:a.src,ys:r};case 4:i++;case 5:case"end":return n.stop()}}),n)}));case 2:if(!(i<n)){a.next=6;break}return a.delegateYield(r(),"t0",4);case 4:a.next=2;break;case 6:case"end":return a.stop()}}),a)}))},rr=function(){var e=Object(j.a)(g.a.mark((function e(t,n,a,i,r){var c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Ne.c.generator(ir(t,a)).map(tr(a.length)).mapAsync(nr.bind(null,i.channels,r.rescale)).mapAsync(ar.bind(null,i)).shuffle(32),o=Ne.c.generator(ir(n,a)).map(tr(a.length)).mapAsync(nr.bind(null,i.channels,r.rescale)).mapAsync(ar.bind(null,i)).shuffle(32),e.abrupt("return",{val:o,train:c});case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,i,r){return e.apply(this,arguments)}}(),cr=function(e){return e.project.images.filter((function(e){return e.partition===_.Training}))},or=function(e){return e.project.images.filter((function(e){return e.partition===_.Validation}))},sr=g.a.mark(lr);function lr(e){var t,n,a,i,r,c,o,s,l,u,d,p,j,b,f,m;return g.a.wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload.onEpochEnd,g.next=3,Object(Bi.d)(Kn);case 3:return n=g.sent,g.next=6,Object(Bi.d)(tt);case 6:if(a=g.sent,n.selectedModel.modelType!==D.UserUploaded){g.next=13;break}return g.next=10,Object(Bi.d)(et);case 10:i=g.sent,g.next=16;break;case 13:return g.next=15,er(n,a);case 15:i=g.sent;case 16:return g.next=18,Object(Bi.d)(it);case 18:return r=g.sent,g.next=21,Zi(i,r);case 21:return c=g.sent,g.next=24,Object(Bi.c)(V.actions.updateCompiled({compiled:c}));case 24:return g.next=26,Object(Bi.d)(Ke);case 26:return o=g.sent,g.next=29,Object(Bi.d)(cr);case 29:return s=g.sent,g.next=32,Object(Bi.d)(or);case 32:return l=g.sent,g.next=35,Object(Bi.d)(ea);case 35:return u=g.sent,g.next=38,rr(s,l,o,n.inputShape,u);case 38:return d=g.sent,g.next=41,Object(Bi.c)(V.actions.updatePreprocessed({data:d}));case 41:return g.next=43,Object(Bi.d)(nt);case 43:return p=g.sent,g.next=46,_i(c,d,p,t);case 46:return j=g.sent,b=j.fitted,f=j.status,m={fitted:b,status:f},g.next=52,Object(Bi.c)(V.actions.updateFitted(m));case 52:case"end":return g.stop()}}),sr)}var ur=g.a.mark(dr);function dr(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Bi.e)(V.actions.fit.type,lr);case 2:case"end":return e.stop()}}),ur)}var pr=function(){var e=Object(j.a)(g.a.mark((function e(t,n,a){var i,r,c,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.n.fetch(a.xs);case 2:return i=e.sent,e.next=5,i.arrayBuffer();case 5:return r=e.sent,e.next=8,$.a.load(r);case 8:return c=e.sent,o=c.getCanvas(),s=Ne.b.fromPixels(o,t),n&&(s=s.div(255)),e.abrupt("return",new Promise((function(e){return e(Object(f.a)(Object(f.a)({},a),{},{xs:s}))})));case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),jr=function(){var e=Object(j.a)(g.a.mark((function e(t,n){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ne.d.resizeBilinear(n.xs,[t.height,t.width]),e.abrupt("return",new Promise((function(e){return e(Object(f.a)(Object(f.a)({},n),{},{xs:a}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),br=function(e){var t=e.length;return g.a.mark((function n(){var a,i;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<t)){n.next=8;break}return i=e[a],n.next=5,{xs:i.src,id:i.id};case 5:a++,n.next=1;break;case 8:case"end":return n.stop()}}),n)}))},gr=function(){var e=Object(j.a)(g.a.mark((function e(t,n,a){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ne.c.generator(br(t)).mapAsync(pr.bind(null,a.channels,n.rescale)).mapAsync(jr.bind(null,a)),e.abrupt("return",i);case 2:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),fr=function(){var e=Object(j.a)(g.a.mark((function e(t,n,a){var i,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],r=[],e.next=4,n.forEachAsync((function(e){var n=e.xs,c=t.predict(n.expandDims()),o=Ne.a(c,1).dataSync()[0];i.push(e.id),r.push(a[o].id)}));case 4:return e.abrupt("return",{imageIds:i,categoryIds:r});case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),mr=function(e){return e.project.images.filter((function(e){return e.partition===_.Inference}))},hr=g.a.mark(Or);function Or(e){var t,n,a,i,r,c,o,s,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Bi.d)(ea);case 2:return t=e.sent,e.next=5,Object(Bi.d)(Pt);case 5:return n=e.sent,e.next=8,Object(Bi.d)(Kn);case 8:return a=e.sent,e.next=11,Object(Bi.d)(Ke);case 11:return i=e.sent,e.next=14,Object(Bi.d)(mr);case 14:if((r=e.sent).length){e.next=18;break}return alert("No unlabled images to predict!"),e.abrupt("return");case 18:if(n.outputs[0].shape[1]===i.length){e.next=22;break}return alert("The output shape of your model does not correspond to the number of categories!"),e.abrupt("return");case 22:return e.next=24,gr(r,t,a.inputShape);case 24:return c=e.sent,e.next=27,fr(n,c,i);case 27:return o=e.sent,s=o.imageIds,l=o.categoryIds,e.next=32,Object(Bi.c)(me.actions.updateImagesCategories({ids:s,categoryIds:l}));case 32:case"end":return e.stop()}}),hr)}var xr=g.a.mark(yr);function yr(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Bi.e)(V.actions.predict.type,Or);case 2:case"end":return e.stop()}}),xr)}var vr=g.a.mark(Cr);function Cr(){var e,t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=[Object(Bi.b)(dr),Object(Bi.b)(yr)],t=[Object(Bi.b)(Li),Object(Bi.b)(Ki)],n.next=4,Object(Bi.a)([].concat(e,t));case 4:case"end":return n.stop()}}),vr)}var Sr=n(1002),kr=n(295),wr=Object(zi.a)(),Ir={devTools:!0,enhancers:[Sr.a({})],middleware:[Di.a,wr,kr.a],preloadedState:{},reducer:Mi},Ar=Object(A.a)(Ir);wr.run(Cr),o.a.render(Object(Ee.jsx)(s.a,{store:Ar,children:Object(Ee.jsx)(l.a,{backend:u.a,children:Object(Ee.jsx)(Ii,{})})}),document.getElementById("root"))}},[[912,1,2]]]);
//# sourceMappingURL=main.961e6d54.chunk.js.map