{"version":3,"sources":["types/ThemeMode.ts","store/slices/applicationSlice.ts","types/LossFunction.ts","types/Metric.ts","types/OptimizationAlgorithm.ts","types/ClassifierModelType.ts","types/ToolType.ts","types/AnnotationModeType.ts","types/AnnotationStateType.ts","store/slices/classifierSlice.ts","types/Category.ts","images/cell-painting.png","types/LanguageType.ts","types/Partition.ts","image/imageHelper.ts","types/Task.ts","store/slices/imageViewerSlice.ts","images/317832f90f02c5e916b2ac0f3bcb8da9928d8e400b747b2c68e544e56adacf6b.png","store/slices/projectSlice.ts","types/ZoomModeType.ts","store/slices/toolOptionsSlice.ts","components/OpenProjectMenuItem/OpenProjectMenuItem.tsx","components/OpenClassifierDialog/OpenClassifierDialog.tsx","hooks/useDialog/useDialog.ts","hooks/useMenu/useMenu.ts","annotator/image/pathfinder/PathFinder.ts","data/exampleProjects/exampleProjectsEnum.ts","store/selectors/classifierSelector.ts","store/selectors/categoriesSelector.ts","store/selectors/createdCategoriesSelector.ts","store/selectors/imageInstancesSelector.ts","store/selectors/selectedCategorySelector.ts","store/selectors/selectionModeSelector.ts","store/selectors/toolTypeSelector.ts","store/selectors/unknownCategorySelector.ts","store/selectors/categorizedImagesSelector.ts","store/selectors/compiledSelector.ts","store/selectors/createdCategoriesCountSelector.ts","store/selectors/fitOptionsSelector.ts","store/selectors/trainingPercentageSelector.ts","store/selectors/compileOptionsSelector.ts","store/selectors/selectedImagesSelector.ts","store/selectors/visibleImagesSelector.ts","store/selectors/languageSelector.ts","translations/de.ts","translations/en.ts","translations/fas.ts","translations/fi.ts","translations/gr.ts","translations/hi.ts","translations/hu.ts","translations/fr.ts","components/OpenExampleProjectMenuItem/OpenExampleProjectMenuItem.tsx","data/exampleProjects/cElegansExampleProjectIcon.png","data/exampleProjects/humanU2OSCellsExampleProjectIcon.png","components/OpenExampleProjectDialog/OpenExampleProjectDialog.tsx","hooks/useTranslation/useTranslation.tsx","data/exampleProjects/mnistExampleProjectIcon.png","components/OpenMenu/OpenMenu.tsx","components/OpenListItem/OpenListItem.tsx","store/selectors/serializedProjectSelector.ts","components/SaveProjectDialog/SaveProjectDialog.tsx","store/selectors/fittedSelector.ts","store/selectors/selectedModelSelector.ts","components/SaveClassifierDialog/SaveClassifierDialog.tsx","components/SaveMenu/SaveMenu.tsx","components/SaveListItem/SaveListItem.tsx","components/FileList/FileList.tsx","components/CollapsibleList/CollapsibleList.tsx","components/CategoryListItemCheckbox/CategoryListItemCheckbox.tsx","components/HideOrShowCategoryMenuItem/HideOrShowCategoryMenuItem.tsx","components/HideOtherCategoriesMenuItem/HideOtherCategoriesMenuItem.tsx","components/CategoryMenu/CategoryMenu.tsx","store.ts","store/selectors/availableColorsSelecor.ts","components/ColorIcon/ColorIcon.tsx","components/EditCategoryDialog/EditCategoryDialog.tsx","components/DeleteCategoryDialog/DeleteCategoryDialog.tsx","components/CategoryListItem/CategoryListItem.tsx","components/CreateCategoryDialog/CreateCategoryDialog.tsx","components/CreateCategoryListItem/CreateCategoryListItem.tsx","components/CategoriesList/CategoriesList.tsx","store/selectors/trainingFlagSelector.ts","components/FitClassifierDialog/FitClassifierDialogAppBar/FitClassifierDialogAppBar.tsx","components/FitClassifierDialog/StyledFormControl.tsx","store/selectors/learningRateSelector.ts","store/selectors/optimizationAlgorithmSelector.ts","store/selectors/lossFunctionSelector.ts","components/CustomNumberTextField/CustomNumberTextField.tsx","components/FitClassifierDialog/OptimizerSettingsListItem/OptimizerSettingsGrid/OptimizerSettingsGrid.tsx","components/FitClassifierDialog/OptimizerSettingsListItem/OptimizerSettingsListItem.tsx","components/FitClassifierDialog/DatasetSettingsListItem/DatasetSettingsListItem.tsx","store/selectors/architectureOptionsSelector.ts","store/selectors/inputShapeSelector.ts","store/selectors/uploadedModelSelector.ts","components/FitClassifierDialog/ArchitectureSettingsListItem/ArchitectureSettingsGrid/ArchitectureSettingsGrid.tsx","components/FitClassifierDialog/ArchitectureSettingsListItem/ArchitectureSettingsListItem.tsx","store/selectors/rescaleOptionsSelector.ts","components/RescalingForm/RescalingForm.tsx","components/PreprocessingSettingsListItem/PreprocessingSettingsListItem.tsx","components/DialogTransition/DialogTransition.tsx","components/FitClassifierDialog/FitClassifierDialog/FitClassifierDialog.tsx","components/ClassifierListItems/FitClassifierListItem.tsx","components/ClassifierListItems/DisabledClassifierListItem.tsx","components/ClassifierListItems/EvaluateClassifierListItem.tsx","components/ClassifierListItems/PredictClassifierListItem.tsx","components/ClassifierList/ClassifierList.tsx","components/styled/AppBarOffset/AppBarOffset.tsx","store/selectors/themeModeSelector.ts","icons/Sun.svg","icons/Moon.svg","components/SettingsDialog/SettingsDialog.tsx","components/SettingsListItem/SettingsListItem.tsx","components/HelpListItem/HelpListItem.tsx","components/SendFeedbackListItem/SendFeedbackListItem.tsx","components/ApplicationList/ApplicationList.tsx","components/ApplicationDrawer/ApplicationDrawer.tsx","store/selectors/tileSizeSelector.ts","components/ImageCategoryMenu/ImageCategoryMenu.tsx","components/DeleteImagesDialog/DeleteImagesDialog.tsx","components/ImageGridAppBar/ImageGridAppBar.tsx","components/ImageGrid/ImageIconLabel.tsx","components/ImageGrid/ImageGrid.tsx","components/UploadMenu/StyledMenuItem.tsx","components/UploadMenu/DropboxMenuItem.tsx","components/UploadMenu/UploadMenu.tsx","components/UploadButton/UploadButton.tsx","components/Logo/Logo.tsx","components/ApplicationToolbar/ApplicationToolbar.tsx","components/ApplicationAppBar/ApplicationAppBar.tsx","components/MainView/MainView.tsx","theme.ts","components/Application/Application.tsx","hooks/useTheme/usePreferredTheme.ts","store/reducer/reducer.ts","store/selectors/selectedAnnotationSelector.ts","store/selectors/activeImagePlaneSelector.ts","store/sagas/annotator/annotationStateChangeSaga.ts","store/sagas/annotator/watchAnnotationStateChangeSaga.ts","store/selectors/selectedAnnotationsIdsSelector.ts","store/selectors/selectedAnnotationsSelector.ts","store/sagas/annotator/selectedCategorySaga.ts","store/sagas/annotator/watchSelectedCategorySaga.ts","store/coroutines/classifier/compile.ts","store/coroutines/classifier/fit.ts","store/coroutines/models/simpleCNN.ts","store/coroutines/models/changeInputShape.ts","store/coroutines/models/mobileNet.ts","store/coroutines/classifier/open.ts","store/coroutines/classifier/preprocess.ts","store/selectors/trainImagesSelector.ts","store/selectors/valImagesSelector.ts","store/sagas/classifier/fitSaga.ts","store/sagas/classifier/watchFitSaga.ts","store/coroutines/classifier/preprocess_predict.ts","store/coroutines/classifier/predictCategories.ts","store/selectors/testImagesSelector.ts","store/sagas/classifier/predictSaga.ts","store/sagas/classifier/watchPredictSaga.ts","store/sagas/rootSaga.ts","store/stores/productionStore.ts","index.tsx"],"names":["ThemeMode","LossFunction","Metric","OptimizationAlgorithm","ModelType","initialState","selectedImages","tileSize","themeMode","Light","applicationSlice","createSlice","name","reducers","updateTileSize","state","action","payload","newValue","selectImage","push","id","selectOneImage","selectAllImages","ids","deselectImage","filter","deselectImages","includes","clearSelectedImages","setThemeMode","mode","actions","ToolType","AnnotationModeType","AnnotationStateType","availableModels","modelName","modelType","SimpleCNN","requiredChannels","MobileNet","evaluating","inputShape","height","width","channels","planes","frames","fitOptions","epochs","batchSize","initialEpoch","shuffle","fitting","learningRate","lossFunction","CategoricalCrossEntropy","selectedModel","metrics","CategoricalAccuracy","optimizationAlgorithm","Adam","predicting","rescaleOptions","rescale","rescaleMinMax","min","max","trainingPercentage","classifierSlice","fit","predict","setClassifier","classifier","evaluations","history","predictions","updateBatchSize","updateCompiled","compiled","updateEpochs","updateFitted","fitted","status","addFitted","updateInputShape","updateLearningRate","updateLossFunction","updateMetrics","updateSelectedModel","model","uploadUserSelectedModel","modelSelection","userUploadedModel","updateOptimizationAlgorithm","updatePreprocessed","data","updateRescaleOptions","updateTrainingPercentage","UNKNOWN_CATEGORY_ID","LanguageType","Partition","Task","convertFileToImage","file","a","Promise","resolve","reject","arrayBuffer","then","buffer","ImageJS","load","image","convertImageJStoImage","filename","nplanes","imageData","Array","isArray","length","components","j","toDataURL","useCanvas","shape","categoryId","uuidv4","annotations","originalSrc","partition","Inference","src","Math","floor","initialImage","activePlane","avatar","colorImage","initialCategories","color","visible","annotationState","Blank","boundingClientRect","DOMRect","brightness","categories","range","currentIndex","cursor","contrast","exposure","hue","activeImageId","undefined","activeImagePlane","images","language","English","offset","x","y","penSelectionBrushSize","pointerSelection","dragging","minimum","maximum","selecting","quickSelectionBrushSize","saturation","selectedAnnotation","selectedAnnotations","selectedCategoryId","selectionMode","New","soundEnabled","stageHeight","stageScale","stageWidth","stagePosition","toolType","RectangularAnnotation","vibrance","zoomSelection","imageViewerSlice","addImages","imageNames","map","split","updatedImages","newImages","updatedName","names","currentName","i","replaceDuplicateName","clearCategoryAnnotations","annotation","category","deleteCategory","deleteImage","deleteAllInstances","deleteAllImageInstances","imageId","deleteImageInstances","updatedAnnotations","openAnnotations","existingCategories","mask","annotationMask","parseInt","newCategories","annotationCategoryId","annotationCategoryColor","annotationCategoryName","annotationPlane","annotation_out","boundingBox","annotationBoundingBoxX","annotationBoundingBoxY","annotationBoundingBoxWidth","annotationBoundingBoxHeight","annotationId","plane","importSerializedAnnotations","loaded","imageFilename","imageChannels","imageFrames","imageHeight","imagePlanes","imageWidth","setAnnotationState","setBoundingClientRect","setBrightness","setCategories","setCategoryVisibility","_","setContrast","setCurrentIndex","setExposure","setHue","setActiveImage","activeImage","find","defaultChannels","setActiveImagePlane","setImageSrc","setImages","setChannels","setCursor","setImageInstances","instances","setLanguage","setOffset","setOperation","operation","setPenSelectionBrushSize","setPointerSelection","setQuickSelectionBrushSize","setSaturation","setSelectedCategoryId","setSelectedAnnotations","setSelectionMode","setStageHeight","setStagePosition","setStageScale","setStageWidth","setSoundEnabled","setVibrance","setZoomSelection","extraReducers","console","info","ZoomModeType","dummyImage","nuclei","task","Classify","trainFlag","projectSlice","createCategory","toString","createImage","createProject","project","deleteImages","openImages","forEach","serializedImage","imageCategoryId","imagePartition","openProject","setProjectName","updateCategory","index","findIndex","updateCategoryVisibility","updateOtherCategoryVisibility","updateImageCategory","updateImageCategories","Training","updateImagesCategories","idx","categoryIds","updateImagesPartition","updateTask","updateTrainFlag","colorAdjustment","blackPoint","highlights","shadows","zoom","automaticCentering","In","scale","toActualSize","toFit","toolOptionsSlice","setColorAdjustmentOptions","options","setZoomToolOptions","OpenProjectMenuItem","popupState","dispatch","useDispatch","MenuItem","component","ListItemText","primary","accept","hidden","onChange","event","close","persist","currentTarget","files","reader","FileReader","onload","target","result","JSON","parse","serializedImages","err","error","alert","message","readAsText","onOpenProjectFile","type","OpenClassifierDialog","onClose","open","React","useState","classifierModel","setClassifierModel","modelSelected","setModelSelected","setModelName","setInputShape","fileError","setFileError","fileErrorMessage","setFileErrorMessage","onClassifierFilesSelected","weightsFile","jsonFile","text","jsonFileContent","weightFileName","weightFileNameReplaceString","substring","regegPattern","RegExp","updatedJsonFileContent","replace","newJsonFile","File","tf","browserFiles","modelShape","inputs","slice","prevShape","jsonFileName","Dialog","fullWidth","maxWidth","DialogTitle","multiple","DialogContent","Typography","gutterBottom","htmlFor","dense","ListItemIcon","Alert","severity","DialogActions","Button","onClick","UserUploaded","disabled","useDialog","setOpen","useCallback","onOpen","useMenu","anchorEl","setAnchorEl","ExampleProject","classifierSelector","categoriesSelector","createdCategoriesSelector","sortBy","imageInstancesSelector","imageViewer","selectedCategorySelector","selectionModeSelector","toolTypeSelector","unknownCategorySelector","categorizedImagesSelector","compiledSelector","createdCategoriesCountSelector","fitOptionsSelector","trainingPercentageSelector","compileOptionsSelector","selectedImagesSelector","settings","from","visibleCategories","visibleImagesSelector","c","languageSelector","de","translation","Cancel","Categories","Description","Edit","Help","Logo","Model","Open","Save","Settings","Unknown","en","fas","Create","Export","Intersection","Pointer","Name","Zoom","fi","gr","hi","hu","fr","OpenExampleProjectMenuItem","exampleProject","projectName","projectIcon","onClickExampleProject","Mnist","CElegans","HumanU2OSCells","exampleProjectJson","ListItem","button","ListItemAvatar","Avatar","OpenExampleClassifierDialog","props","t","useSelector","word","Farsi","Finnish","French","German","Greek","Hindi","Hungarian","useTranslation","sx","borderBottom","theme","palette","divider","margin","padding","spacing","IconButton","grey","position","right","top","borderTop","MenuList","cElegansExampleProjectIcon","humanU2OSCellsExampleProjectIcon","OpenMenu","onCloseClassifierDialog","onOpenClassifierDialog","openClassifierDialog","onCloseExampleClassifierDialog","onOpenExampleClassifierDialog","openExampleClassifier","Menu","bindMenu","variant","Divider","OpenListItem","bindTrigger","serializedProjectSelector","imageChecksum","SaveProjectDialog","serializedProject","Grid","container","item","xs","TextField","autoFocus","label","value","part","version","parts","stringify","Blob","saveAs","fittedSelector","selectedModelSelector","SaveClassifierDialog","classifierName","setClassifierName","noFittedModel","onSaveClassifierClick","save","helperText","SaveMenu","onSaveProjectDialogClose","onSaveProjectDialogOpen","openSaveProjectDialog","onSaveClassifierDialogClose","onSaveClassifierDialogOpen","openSaveClassifierDialog","SaveListItem","FileList","List","CollapsibleList","children","collapsed","setCollapsed","Collapse","in","timeout","unmountOnExit","disablePadding","CategoryListItemCheckbox","Checkbox","checked","checkedIcon","style","disableRipple","edge","icon","tabIndex","HideOrShowCategoryMenuItem","onCloseCategoryMenu","HideOtherCategoriesMenuItem","CategoryMenu","anchorElCategoryMenu","openCategoryMenu","onOpenDeleteCategoryDialog","onOpenEditCategoryDialog","anchorOrigin","horizontal","vertical","transformOrigin","COLORS","availableColorsSelector","usedColors","catagory","ColorIcon","onColorChange","availableColors","colorMenuAnchorEl","setColorMenuAnchorEl","colorPopupOpen","Boolean","onCloseColorPicker","backgroundColor","Popover","Box","colors","EditCategoryDialog","onCloseDialog","openDialog","setColor","setName","hex","DeleteCategoryDialog","CategoryListItem","onCloseDeleteCategoryDialog","openDeleteCategoryDialog","onCloseEditCategoryDialog","openEditCategoryDialog","onOpenCategoryMenu","imageCount","Fragment","primaryTypographyProps","noWrap","Chip","size","borderWidth","fontSize","ListItemSecondaryAction","CreateCategoryDialog","usedCategoryNames","sample","errorHelperText","setErrorHelperText","invalidName","setInvalidName","validateInput","categoryName","validInput","paddingLeft","CreateCategoryListItem","CategoriesList","unknownCategory","trainingFlagSelector","FitClassifierDialogAppBar","closeDialog","disableFitting","training","AppBar","boxShadow","Toolbar","Tooltip","title","placement","href","ArrowBack","flexGrow","PlayCircleOutline","stopTraining","Stop","StyledFormControl","styled","FormControl","display","flexWrap","minWidth","learningRateSelector","optimizationAlgorithmSelector","lossFunctionSelector","intRegExpr","floatRegExpr","CustomNumberTextField","dispatchCallBack","Number","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","enableFloat","valueString","setValueString","regExp","marginRight","flexBasis","marginTop","inputString","test","arg","isNaN","autoComplete","enumKeys","obj","Object","keys","k","OptimizerSettingsGrid","FormHelperText","Select","displayEmpty","inputProps","direction","OptimizerSettingsListItem","collapsedClassifierSettingsList","setCollapsedClassifierSettingsList","DatasetSettingsListItem","collapsedDatasetSettingsList","setCollapsedDatasetSettingsList","trainPercentage","architectureOptionsSelector","inputShapeSelector","uploadedModelSelector","ArchitectureSettingsGrid","architectureOptions","setSelectedModel","fixedNumberOfChannels","setFixedNumberOfChannels","fixedNumberOfChannelsHelperText","setFixedNumberOfChannelsHelperText","modelOptions","Autocomplete","disableClearable","getOptionLabel","option","renderInput","params","cols","ArchitectureSettingsListItem","StyledForm","noValidate","rescaleOptionsSelector","RescalingForm","setDisabled","StyledTextField","FormControlLabel","control","defaultValue","PreprocessingSettingsListItem","openedDialog","collapsedPreprocessingList","setCollapsedPreprocessingList","FormGroup","row","DialogTransition","ref","Slide","FitClassifierDialog","openedDrawer","noCategorizedImagesAlert","setNoCategorizedImagesAlert","showWarning","setShowWarning","categorizedImages","useEffect","onFit","categorizedImagesIds","trainDataLength","round","valDataLength","trainDataIds","valDataIds","Validation","onEpochEnd","epoch","logs","loss","disableEscapeKeyDown","fullScreen","TransitionComponent","zIndex","FitClassifierListItem","DisabledClassifierListItem","componentsProps","tooltip","arrow","EvaluateClassifierListItem","PredictClassifierListItem","onPredict","ClassifierList","setHelperText","AppBarOffset","mixins","toolbar","themeModeSelector","SettingsDialog","Container","MaterialUISwitch","Dark","Switch","transform","backgroundImage","Moon","opacity","content","left","backgroundRepeat","backgroundPosition","Sun","borderRadius","SettingsListItem","HelpListItem","SendFeedbackListItem","ApplicationList","ApplicationDrawer","Drawer","anchor","flexShrink","tileSizeSelector","ImageCategoryMenu","imageIds","paddingRight","DeleteImagesDialog","ImageGridAppBar","categoryMenuAnchorEl","setCategoryMenuAnchorEl","appear","selected","projectImage","annotatorImage","batch","newSelected","ImageIconLabel","categoryColor","actionIconStyle","marginLeft","predictedLabel","ImageGrid","onDrop","useDrop","NativeTypes","FILE","drop","collect","monitor","isOver","canDrop","scaleFactor","getSize","paddingTop","transition","transitions","create","duration","enteringScreen","easing","easeOut","border","paddingBottom","ImageList","rowHeight","ImageListItem","onSelectImage","alt","objectFit","ImageListItemBar","actionIcon","actionPosition","background","StyledMenuItem","DropboxMenuItem","useDropboxChooser","appKey","chooserOptions","multiselect","linkType","onSelected","items","UploadMenu","onUploadFromComputerChange","PaperProps","Fade","ListSubheader","letterSpacing","fontWeight","lineHeight","textTransform","UploadButton","startIcon","breakpoints","up","ApplicationToolbar","setValue","Slider","step","ApplicationAppBar","MainView","onUnload","e","preventDefault","returnValue","window","addEventListener","removeEventListener","CssBaseline","lightTheme","createTheme","MuiListItemIcon","styleOverrides","root","darkTheme","MuiDrawer","paperAnchorDockedLeft","borderRight","paperAnchorDockedRight","borderLeft","paper","MuiListItem","MuiSlider","rail","thumb","track","default","Application","prefersDarkMode","useMediaQuery","setTheme","usePreferredTheme","StyledEngineProvider","injectFirst","ThemeProvider","reducer","toolOptions","combineReducers","selectedAnnotationSelector","activeImagePlaneSelector","annotationStateChangeSaga","annotationTool","Annotated","select","selectedCategory","annotate","put","Add","add","combinedMask","combinedBoundingBox","Subtract","subtract","Intersect","intersect","watchAnnotationStateChangeSaga","takeEvery","selectedAnnotationsIdsSelector","selectedAnnotationsSelector","selectedCategorySaga","watchSelectedCategorySaga","compile","opened","AbsoluteDifference","CosineDistance","Hinge","Huber","Log","MeanSquaredError","SigmoidCrossEntropy","metric","BinaryAccuracy","BinaryCrossEntropy","CosineProximity","MeanAbsoluteError","MeanAbsolutePercentageError","Precision","Recall","SparseCategoricalAccuracy","optimizer","Adadelta","tensorflow","adadelta","Adagrad","adagrad","adam","Adamax","adamax","RMSProp","rmsprop","StochasticGradientDescent","sgd","compiledMetrics","concat","document","getElementById","tfvis","modelSummary","args","callbacks","fitCallbacks","validationData","val","fitDataset","train","createSimpleCNN","numClasses","conv2d","kernelSize","filters","strides","activation","kernelInitializer","maxPooling2d","poolSize","flatten","units","changeInputShape","newModel","inputLayer","SerializationMap","getMap","classNameMap","layers","layer","className","getClassName","cls","fromConfig","cfg","getConfig","newlayer","setWeights","getWeights","createMobileNet","input_shape","freeze","useCustomTopLayer","resource","mobilenet","layerName","backbone","l","trainable","globalAveragePooling2d","numfeat","outputShape","reshape","targetShape","dropout","rate","classes","decodeCategory","ys","decodeImage","fetch","fetched","canvas","getCanvas","fromPixels","div","resize","resized","resizeBilinear","generator","count","preprocess","trainImages","valImages","trainData","mapAsync","bind","valData","trainImagesSelector","valImagesSelector","fitSaga","compileOptions","compiledModel","watchFitSaga","preprocess_predict","predictCategories","forEachAsync","input","expandDims","dataSync","testImagesSelector","predictSaga","testImages","outputs","watchPredictSaga","rootSaga","classifierEffects","fork","annotaterEffects","all","saga","createSagaMiddleware","devTools","enhancers","Sentry","middleware","logger","thunk","preloadedState","productionStore","configureStore","run","ReactDOM","render","store","DndProvider","backend","HTML5Backend"],"mappings":"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","file":"static/js/main.961e6d54.chunk.js","sourcesContent":["export enum ThemeMode {\n  Light = \"light\",\n  Dark = \"dark\",\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Settings } from \"../../types/Settings\";\nimport { ThemeMode } from \"types/ThemeMode\";\n\nconst initialState: Settings = {\n  selectedImages: [],\n  tileSize: 1,\n  themeMode: ThemeMode.Light,\n};\n\nexport const applicationSlice = createSlice({\n  name: \"settings\",\n  initialState: initialState,\n  reducers: {\n    updateTileSize(\n      state: Settings,\n      action: PayloadAction<{ newValue: number }>\n    ) {\n      state.tileSize = action.payload.newValue!;\n    },\n    selectImage(state: Settings, action: PayloadAction<{ id: string }>) {\n      state.selectedImages.push(action.payload.id);\n    },\n    selectOneImage(state: Settings, action: PayloadAction<{ id: string }>) {\n      state.selectedImages = [];\n\n      state.selectedImages.push(action.payload.id);\n    },\n    selectAllImages(\n      state: Settings,\n      action: PayloadAction<{ ids: Array<string> }>\n    ) {\n      state.selectedImages = [];\n\n      state.selectedImages = action.payload.ids;\n    },\n    deselectImage(state: Settings, action: PayloadAction<{ id: string }>) {\n      state.selectedImages = state.selectedImages.filter(\n        (id: string) => id !== action.payload.id\n      );\n    },\n    deselectImages(\n      state: Settings,\n      action: PayloadAction<{ ids: Array<string> }>\n    ) {\n      state.selectedImages = state.selectedImages.filter(\n        (id: string) => !action.payload.ids.includes(id)\n      );\n    },\n    clearSelectedImages(state: Settings) {\n      state.selectedImages = [];\n    },\n    setThemeMode(state: Settings, action: PayloadAction<{ mode: ThemeMode }>) {\n      state.themeMode = action.payload.mode;\n    },\n  },\n});\n\nexport const {\n  updateTileSize,\n  selectImage,\n  selectOneImage,\n  deselectImage,\n  deselectImages,\n  clearSelectedImages,\n  setThemeMode,\n} = applicationSlice.actions;\n","export enum LossFunction {\n  AbsoluteDifference = \"Absolute difference\",\n  CategoricalCrossEntropy = \"Categorical cross entropy\",\n  CosineDistance = \"Cosine distance\",\n  Hinge = \"Hinge\",\n  Huber = \"Huber\",\n  Log = \"Log\",\n  MeanSquaredError = \"Mean squared error (MSE)\",\n  SigmoidCrossEntropy = \"Sigmoid cross entropy\",\n}\n","export enum Metric {\n  BinaryAccuracy = \"Binary accuracy\",\n  BinaryCrossEntropy = \"Binary cros-sentropy\",\n  CategoricalAccuracy = \"Categorical accuracy\",\n  CategoricalCrossEntropy = \"Categorical cross-entropy\",\n  CosineProximity = \"Cosine proximity\",\n  MeanAbsoluteError = \"Mean absolute error (MAE)\",\n  MeanAbsolutePercentageError = \"Mean absolute percentage error\",\n  MeanSquaredError = \"Mean squared error\",\n  Precision = \"Precision\",\n  Recall = \"Recall\",\n  SparseCategoricalAccuracy = \"Sparse categorical accuracy\",\n}\n","export enum OptimizationAlgorithm {\n  Adadelta = \"Adadelta\",\n  Adagrad = \"Adagrad\",\n  Adam = \"Adam\",\n  Adamax = \"Adamax\",\n  Momentum = \"Momentum\",\n  RMSProp = \"RMSProp\",\n  StochasticGradientDescent = \"Stochastic gradient descent (SGD)\",\n}\n","export enum ModelType {\n  SimpleCNN,\n  MobileNet,\n  UserUploaded,\n}\n\ntype ModelProps = {\n  modelName: string;\n  requiredChannels?: number;\n  modelType: ModelType;\n};\n\ninterface UserUploadedModelProps extends ModelProps {\n  src: string;\n}\n\ninterface DefaultModelProps extends ModelProps {}\n\nexport type ClassifierModelProps = UserUploadedModelProps | DefaultModelProps;\n\nexport const availableModels: ClassifierModelProps[] = [\n  {\n    modelName: \"SimpleCNN\",\n    modelType: ModelType.SimpleCNN,\n  },\n  {\n    modelName: \"MobileNet\",\n    requiredChannels: 3,\n    modelType: ModelType.MobileNet,\n  },\n];\n","export enum ToolType {\n  ColorAdjustment,\n  ColorAnnotation,\n  EllipticalAnnotation,\n  Hand,\n  LassoAnnotation,\n  MagneticAnnotation,\n  ObjectAnnotation,\n  PenAnnotation,\n  Pointer,\n  PolygonalAnnotation,\n  QuickAnnotation,\n  RectangularAnnotation,\n  Zoom,\n}\n","export enum AnnotationModeType {\n  Add,\n  Intersect,\n  New,\n  Subtract,\n}\n","export enum AnnotationStateType {\n  Blank, // not yet annotating\n  Annotating,\n  Annotated,\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Classifier } from \"../../types/Classifier\";\nimport { LossFunction } from \"../../types/LossFunction\";\nimport { Metric } from \"../../types/Metric\";\nimport { OptimizationAlgorithm } from \"../../types/OptimizationAlgorithm\";\nimport * as tensorflow from \"@tensorflow/tfjs\";\nimport { History, LayersModel } from \"@tensorflow/tfjs\";\nimport { Shape } from \"../../types/Shape\";\nimport { RescaleOptions } from \"../../types/RescaleOptions\";\nimport {\n  availableModels,\n  ClassifierModelProps,\n} from \"../../types/ClassifierModelType\";\n\nconst initialState: Classifier = {\n  evaluating: false,\n  inputShape: {\n    height: 256,\n    width: 256,\n    channels: 3,\n    planes: 1,\n    frames: 1,\n  },\n  fitOptions: {\n    epochs: 10,\n    batchSize: 32,\n    initialEpoch: 0,\n    shuffle: true,\n  },\n  fitting: false,\n  learningRate: 0.01,\n  lossFunction: LossFunction.CategoricalCrossEntropy,\n  selectedModel: availableModels[0],\n  metrics: [Metric.CategoricalAccuracy],\n  optimizationAlgorithm: OptimizationAlgorithm.Adam,\n  predicting: false,\n  rescaleOptions: {\n    rescale: true,\n    rescaleMinMax: { min: 0, max: 1 },\n  },\n  trainingPercentage: 0.75,\n};\n\nexport const classifierSlice = createSlice({\n  name: \"classifier\",\n  initialState: initialState,\n  reducers: {\n    fit(\n      state,\n      action: PayloadAction<{\n        onEpochEnd: any;\n      }>\n    ) {\n      state.fitting = true;\n    },\n    predict(state, action: PayloadAction<{}>) {\n      state.predicting = true;\n    },\n    setClassifier(\n      state,\n      action: PayloadAction<{\n        classifier: Classifier;\n      }>\n    ) {\n      const { classifier } = action.payload;\n\n      state.fitOptions = classifier.fitOptions;\n      state.inputShape = classifier.inputShape;\n      state.learningRate = classifier.learningRate;\n      state.lossFunction = classifier.lossFunction;\n      state.metrics = classifier.metrics;\n\n      state.optimizationAlgorithm = classifier.optimizationAlgorithm;\n      state.trainingPercentage = classifier.trainingPercentage;\n\n      //initialize all others to false/undefined, since we are essentially initializing a new classifier\n      state.selectedModel = availableModels[0];\n      state.evaluating = false;\n      state.evaluations = classifier.evaluations;\n      state.fitting = false;\n      state.history = classifier.history;\n      state.predicting = false;\n      state.predictions = classifier.predictions;\n    },\n    updateBatchSize(state, action: PayloadAction<{ batchSize: number }>) {\n      const { batchSize } = action.payload;\n\n      state.fitOptions.batchSize = batchSize;\n    },\n    updateCompiled(state, action: PayloadAction<{ compiled: LayersModel }>) {\n      const { compiled } = action.payload;\n\n      state.compiled = compiled;\n    },\n    updateEpochs(state, action: PayloadAction<{ epochs: number }>) {\n      const { epochs } = action.payload;\n\n      state.fitOptions.epochs = epochs;\n    },\n    updateFitted(\n      state,\n      action: PayloadAction<{ fitted: LayersModel; status: History }>\n    ) {\n      const { fitted, status } = action.payload;\n\n      state.fitted = fitted;\n\n      state.history = status;\n\n      state.fitting = false;\n    },\n    addFitted(state, action: PayloadAction<{ fitted: LayersModel }>) {\n      const { fitted } = action.payload;\n\n      state.fitted = fitted;\n    },\n    updateInputShape(state, action: PayloadAction<{ inputShape: Shape }>) {\n      state.inputShape = action.payload.inputShape;\n    },\n    updateLearningRate(state, action: PayloadAction<{ learningRate: number }>) {\n      const { learningRate } = action.payload;\n\n      state.learningRate = learningRate;\n    },\n    updateLossFunction(\n      state,\n      action: PayloadAction<{ lossFunction: LossFunction }>\n    ) {\n      const { lossFunction } = action.payload;\n\n      state.lossFunction = lossFunction;\n    },\n    updateMetrics(state, action: PayloadAction<{ metrics: Array<Metric> }>) {\n      const { metrics } = action.payload;\n\n      state.metrics = metrics;\n    },\n    updateSelectedModel(\n      state,\n      action: PayloadAction<{ model: ClassifierModelProps }>\n    ) {\n      state.selectedModel = action.payload.model;\n    },\n    uploadUserSelectedModel(\n      state,\n      action: PayloadAction<{\n        inputShape: Shape;\n        modelSelection: ClassifierModelProps;\n        model: LayersModel;\n      }>\n    ) {\n      state.inputShape = action.payload.inputShape;\n      state.fitted = action.payload.model;\n      state.compiled = action.payload.model;\n      state.selectedModel = action.payload.modelSelection;\n      state.userUploadedModel = action.payload.modelSelection;\n    },\n    updateOptimizationAlgorithm(\n      state,\n      action: PayloadAction<{ optimizationAlgorithm: OptimizationAlgorithm }>\n    ) {\n      const { optimizationAlgorithm } = action.payload;\n\n      state.optimizationAlgorithm = optimizationAlgorithm;\n    },\n    updatePreprocessed(\n      state,\n      action: PayloadAction<{\n        data: tensorflow.data.Dataset<{\n          xs: tensorflow.Tensor;\n          ys: tensorflow.Tensor;\n        }>;\n      }>\n    ) {\n      const { data } = action.payload;\n\n      state.data = data;\n    },\n    updateRescaleOptions(\n      state,\n      action: PayloadAction<{ rescaleOptions: RescaleOptions }>\n    ) {\n      state.rescaleOptions = action.payload.rescaleOptions;\n    },\n    updateTrainingPercentage(\n      state,\n      action: PayloadAction<{ trainingPercentage: number }>\n    ) {\n      const { trainingPercentage } = action.payload;\n\n      state.trainingPercentage = trainingPercentage;\n    },\n  },\n});\n\nexport const {\n  fit,\n  updateBatchSize,\n  updateCompiled,\n  updateEpochs,\n  updateFitted,\n  updateLearningRate,\n  updateLossFunction,\n  updateMetrics,\n  updateOptimizationAlgorithm,\n  updatePreprocessed,\n  updateTrainingPercentage,\n} = classifierSlice.actions;\n","export type Category = {\n  color: string;\n  id: string;\n  name: string;\n  visible: boolean;\n};\n\nexport const UNKNOWN_CATEGORY_ID: string =\n  \"00000000-0000-0000-0000-000000000000\";\n","export default __webpack_public_path__ + \"static/media/cell-painting.f118ef08.png\";","export enum LanguageType {\n  Arabic = \"Arabic\",\n  English = \"English\",\n  Farsi = \"Farsi\",\n  Finnish = \"Finnish\",\n  French = \"French\",\n  German = \"German\",\n  Greek = \"Greek\",\n  Hindi = \"Hindi\",\n  Hungarian = \"Hungarian\",\n  Spanish = \"Spanish\",\n}\n","export const enum Partition {\n  Training = \"Training\",\n  Validation = \"Validation\",\n  Inference = \"Inference\",\n}\n","import * as _ from \"lodash\";\nimport * as ImageJS from \"image-js\";\nimport { AnnotationType } from \"../types/AnnotationType\";\nimport { decode } from \"../annotator/image/rle\";\nimport { Category, UNKNOWN_CATEGORY_ID } from \"../types/Category\";\nimport { SerializedAnnotationType } from \"../types/SerializedAnnotationType\";\nimport { saveAs } from \"file-saver\";\nimport { ShapeType } from \"../types/ShapeType\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Partition } from \"../types/Partition\";\nimport { Image as ImageType } from \"../types/Image\";\n\nexport const convertFileToImage = async (file: File): Promise<ImageType> => {\n  /**\n   * Returns image to be provided to dispatch\n   * **/\n  return new Promise((resolve, reject) => {\n    return file.arrayBuffer().then((buffer) => {\n      ImageJS.Image.load(buffer).then((image: ImageJS.Image) => {\n        resolve(convertImageJStoImage(image, file.name));\n      });\n    });\n  });\n};\n\nexport const convertImageJStoImage = (\n  image: ImageJS.Image,\n  filename: string\n): ImageType => {\n  /**\n   * Given an ImageJS Image object, construct appropriate Image type. Return Image.\n   * returns: the image of Image type\n   * **/\n\n  let nplanes = 1;\n  let height: number;\n  let width: number;\n  let imageData: Array<string> = [];\n  let channels: number;\n\n  if (Array.isArray(image)) {\n    //case where user uploaded a z-stack\n    nplanes = image.length;\n    height = image[0].height;\n    width = image[0].width;\n    channels = image[0].components;\n    for (let j = 0; j < nplanes; j++) {\n      imageData.push(\n        image[j].toDataURL(\"image/png\", {\n          useCanvas: true,\n        })\n      );\n    }\n  } else {\n    imageData = [\n      image.toDataURL(\"image/png\", {\n        useCanvas: true,\n      }),\n    ];\n    height = image.height;\n    width = image.width;\n    channels = image.components;\n  }\n\n  const shape: ShapeType = {\n    channels: channels,\n    frames: 1,\n    height: height,\n    planes: nplanes,\n    width: width,\n  };\n\n  return {\n    categoryId: UNKNOWN_CATEGORY_ID,\n    id: uuidv4(),\n    annotations: [],\n    name: filename,\n    shape: shape,\n    originalSrc: imageData,\n    partition: Partition.Inference,\n    src: imageData[Math.floor(nplanes / 2)],\n  };\n};\n\nexport const connectPoints = (\n  coordinates: Array<Array<number>>,\n  image: ImageJS.Image\n) => {\n  let connectedPoints: Array<Array<number>> = [];\n\n  const foo = _.filter(\n    _.zip(coordinates.slice(0, coordinates.length - 1), coordinates.slice(1)),\n    ([current, next]) => {\n      return !_.isEqual(current, next);\n    }\n  );\n  foo.forEach(([current, next]) => {\n    const points = drawLine(current!, next!);\n    connectedPoints = _.concat(connectedPoints, points);\n  });\n  return connectedPoints;\n};\n\nexport const drawLine = (p: Array<number>, q: Array<number>) => {\n  const coords: Array<Array<number>> = [];\n\n  let x: number,\n    y: number,\n    x1: number,\n    y1: number,\n    x2: number,\n    y2: number,\n    dx: number,\n    dy: number,\n    step: number,\n    i: number;\n\n  x1 = Math.round(p[0]);\n  y1 = Math.round(p[1]);\n  x2 = Math.round(q[0]);\n  y2 = Math.round(q[1]);\n\n  dx = x2 - x1;\n  dy = y2 - y1;\n\n  step = Math.abs(dy);\n\n  if (Math.abs(dx) >= Math.abs(dy)) {\n    step = Math.abs(dx);\n  }\n\n  dx = dx / step;\n  dy = dy / step;\n  x = x1;\n  y = y1;\n  i = 1;\n\n  while (i <= step) {\n    coords.push([Math.round(x), Math.round(y)]);\n    x = x + dx;\n    y = y + dy;\n    i = i + 1;\n  }\n\n  return coords;\n};\n\nexport const getIdx = (width: number, nchannels: number) => {\n  return (x: number, y: number, index: number) => {\n    index = index || 0;\n    return Math.floor((width * y + x) * nchannels + index);\n  };\n};\n\n/*\nGiven a click at a position, return all overlapping annotations ids\n */\nexport const getOverlappingAnnotations = (\n  position: { x: number; y: number },\n  annotations: Array<AnnotationType>,\n  imageWidth: number,\n  imageHeight: number\n) => {\n  const overlappingAnnotations = annotations.filter(\n    (annotation: AnnotationType) => {\n      const boundingBox = annotation.boundingBox;\n      if (\n        position.x >= boundingBox[0] &&\n        position.x <= boundingBox[2] &&\n        position.y >= boundingBox[1] &&\n        position.y <= boundingBox[3]\n      ) {\n        const boundingBoxWidth = boundingBox[2] - boundingBox[0];\n        const boundingBoxHeight = boundingBox[3] - boundingBox[1];\n        if (boundingBoxHeight && boundingBoxWidth) {\n          //return annotation if clicked on actual selected data\n          const maskROI = new ImageJS.Image(\n            boundingBox[2] - boundingBox[0],\n            boundingBox[3] - boundingBox[1],\n            decode(annotation.mask),\n            { components: 1, alpha: 0 }\n          );\n          if (\n            maskROI.getPixelXY(\n              Math.round(position.x - boundingBox[0]),\n              Math.round(position.y - boundingBox[1])\n            )[0]\n          )\n            return true;\n        }\n      }\n      return false;\n    }\n  );\n  return overlappingAnnotations.map((annotation: AnnotationType) => {\n    return annotation.id;\n  });\n};\n\nexport const getAnnotationsInBox = (\n  minimum: { x: number; y: number },\n  maximum: { x: number; y: number },\n  annotations: Array<AnnotationType>\n) => {\n  return annotations.filter((annotation: AnnotationType) => {\n    return (\n      minimum.x <= annotation.boundingBox[0] &&\n      minimum.y <= annotation.boundingBox[1] &&\n      maximum.x >= annotation.boundingBox[2] &&\n      maximum.y >= annotation.boundingBox[3]\n    );\n  });\n};\n\n/*\n * From encoded mask data, get the decoded data and return results as an HTMLImageElement to be used by Konva.Image\n * Warning: the mask produced from the decoded data is scaled to fit the stage.\n *          when creating an image from mask, the original width/height should be scaled by the same scale factor\n */\nexport const colorOverlayROI = (\n  encodedMask: Array<number>,\n  boundingBox: [number, number, number, number],\n  imageWidth: number,\n  imageHeight: number,\n  color: Array<number>,\n  scalingFactor: number\n): HTMLImageElement | undefined => {\n  if (!encodedMask) return undefined;\n\n  const decodedData = decode(encodedMask);\n\n  const endX = Math.min(imageWidth, boundingBox[2]);\n  const endY = Math.min(imageHeight, boundingBox[3]);\n\n  //extract bounding box params\n  const boxWidth = endX - boundingBox[0];\n  const boxHeight = endY - boundingBox[1];\n\n  if (!boxWidth || !boxHeight) return undefined;\n\n  const croppedImage = new ImageJS.Image(boxWidth, boxHeight, decodedData, {\n    components: 1,\n    alpha: 0,\n  }).resize({ factor: scalingFactor });\n\n  const colorROIImage = new ImageJS.Image(boxWidth, boxHeight, {\n    components: 3,\n    alpha: 1,\n  }).resize({ factor: scalingFactor });\n\n  const checkNeighbors = (\n    arr: ImageJS.Image,\n    x: number,\n    y: number\n  ): boolean => {\n    if (x === 0 || x === croppedImage.width - 1) return true;\n    for (let [dx, dy] of [\n      [0, 1],\n      [1, 0],\n      [0, -1],\n      [-1, 0],\n    ]) {\n      if (!arr.getPixelXY(x + dx, y + dy)[0]) return true;\n    }\n    return false;\n  };\n\n  for (let i = 0; i < croppedImage.width; i++) {\n    for (let j = 0; j < croppedImage.height; j++) {\n      if (croppedImage.getPixelXY(i, j)[0] > 0) {\n        if (checkNeighbors(croppedImage, i, j)) {\n          colorROIImage.setPixelXY(i, j, [color[0], color[1], color[2], 255]);\n        } else {\n          colorROIImage.setPixelXY(i, j, [color[0], color[1], color[2], 128]);\n        }\n      } else {\n        colorROIImage.setPixelXY(i, j, [0, 0, 0, 0]);\n      }\n    }\n  }\n\n  const src = colorROIImage.toDataURL(\"image-png\", {\n    useCanvas: true,\n  });\n  const image = new Image();\n  image.src = src;\n\n  return image;\n};\n\n/*\n * Method to rename a cateogry/image if a category/image with this name already exists\n * */\nexport const replaceDuplicateName = (name: string, names: Array<string>) => {\n  let currentName = name;\n  let i = 1;\n  while (names.includes(currentName)) {\n    currentName = name + `_${i}`;\n    i += 1;\n  }\n  return currentName;\n};\n\n/*\n * from https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n * */\nconst hexToRgb = (hex: string) => {\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result\n    ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16),\n      }\n    : null;\n};\n\nexport const saveAnnotationsAsBinaryInstanceSegmentationMasks = (\n  images: Array<ImageType>,\n  categories: Array<Category>,\n  zip: any\n): any => {\n  images.forEach((current: ImageType) => {\n    current.annotations.forEach((annotation: AnnotationType) => {\n      const fullLabelImage = new ImageJS.Image(\n        current.shape.width,\n        current.shape.height,\n        new Uint8Array().fill(0),\n        { components: 1, alpha: 0 }\n      );\n      const encoded = annotation.mask;\n      const decoded = decode(encoded);\n      const boundingBox = annotation.boundingBox;\n      const endX = Math.min(current.shape.width, boundingBox[2]);\n      const endY = Math.min(current.shape.height, boundingBox[3]);\n\n      //extract bounding box params\n      const boundingBoxWidth = endX - boundingBox[0];\n      const boundingBoxHeight = endY - boundingBox[1];\n\n      const roiMask = new ImageJS.Image(\n        boundingBoxWidth,\n        boundingBoxHeight,\n        decoded,\n        {\n          components: 1,\n          alpha: 0,\n        }\n      );\n      for (let i = 0; i < boundingBoxWidth; i++) {\n        for (let j = 0; j < boundingBoxHeight; j++) {\n          if (roiMask.getPixelXY(i, j)[0] > 0) {\n            fullLabelImage.setPixelXY(\n              i + annotation.boundingBox[0],\n              j + annotation.boundingBox[1],\n              [255, 255, 255]\n            );\n          }\n        }\n      }\n      const blob = fullLabelImage.toBlob(\"image/png\");\n      const category = categories.find((category: Category) => {\n        return category.id === annotation.categoryId;\n      });\n      if (category) {\n        zip.folder(`${current.name}/${category.name}`);\n        zip.file(\n          `${current.name}/${category.name}/${annotation.id}.png`,\n          blob,\n          {\n            base64: true,\n          }\n        );\n      }\n    });\n  });\n  zip.generateAsync({ type: \"blob\" }).then((blob: Blob) => {\n    saveAs(blob, \"binary_instances.zip\");\n  });\n};\n\nexport const saveAnnotationsAsLabeledSemanticSegmentationMasks = (\n  images: Array<ImageType>,\n  categories: Array<Category>,\n  zip: any\n): any => {\n  images.forEach((current: ImageType) => {\n    const fullLabelImage = new ImageJS.Image(\n      current.shape.width,\n      current.shape.height,\n      new Uint8Array().fill(0),\n      { components: 1, alpha: 0 }\n    );\n    categories.forEach((category: Category) => {\n      const categoryColor = hexToRgb(category.color);\n      if (!categoryColor) return;\n\n      for (let annotation of current.annotations) {\n        if (annotation.categoryId !== category.id) continue;\n        const encoded = annotation.mask;\n        const decoded = decode(encoded);\n        const boundingBox = annotation.boundingBox;\n        const endX = Math.min(current.shape.width, boundingBox[2]);\n        const endY = Math.min(current.shape.height, boundingBox[3]);\n\n        //extract bounding box params\n        const boundingBoxWidth = endX - boundingBox[0];\n        const boundingBoxHeight = endY - boundingBox[1];\n\n        const roiMask = new ImageJS.Image(\n          boundingBoxWidth,\n          boundingBoxHeight,\n          decoded,\n          {\n            components: 1,\n            alpha: 0,\n          }\n        );\n        for (let i = 0; i < boundingBoxWidth; i++) {\n          for (let j = 0; j < boundingBoxHeight; j++) {\n            if (roiMask.getPixelXY(i, j)[0] > 0) {\n              fullLabelImage.setPixelXY(\n                i + annotation.boundingBox[0],\n                j + annotation.boundingBox[1],\n                [categoryColor.r, categoryColor.g, categoryColor.b]\n              );\n            }\n          }\n        }\n      }\n    });\n    const blob = fullLabelImage.toBlob(\"image/png\");\n    zip.file(`${current.name}.png`, blob, {\n      base64: true,\n    });\n  });\n  zip.generateAsync({ type: \"blob\" }).then((blob: Blob) => {\n    saveAs(blob, \"labeled_semantic.zip\");\n  });\n};\n\nexport const saveAnnotationsAsLabelMatrix = (\n  images: Array<ImageType>,\n  categories: Array<Category>,\n  zip: any,\n  random: boolean = false,\n  binary: boolean = false\n): Array<Promise<unknown>> => {\n  return images\n    .map((current: ImageType) => {\n      return categories.map((category: Category) => {\n        return new Promise((resolve, reject) => {\n          const fullLabelImage = new ImageJS.Image(\n            current.shape.width,\n            current.shape.height,\n            new Uint8Array().fill(0),\n            { components: 1, alpha: 0 }\n          );\n          let r = binary ? 255 : 1;\n          let g = binary ? 255 : 1;\n          let b = binary ? 255 : 1;\n          for (let annotation of current.annotations) {\n            if (random) {\n              r = Math.round(Math.random() * 255);\n              g = Math.round(Math.random() * 255);\n              b = Math.round(Math.random() * 255);\n            } else if (!binary) {\n              r = r + 1;\n              b = b + 1;\n              g = g + 1;\n            }\n            if (annotation.categoryId !== category.id) continue;\n            const encoded = annotation.mask;\n            const decoded = decode(encoded);\n            const boundingBox = annotation.boundingBox;\n            const endX = Math.min(current.shape.width, boundingBox[2]);\n            const endY = Math.min(current.shape.height, boundingBox[3]);\n\n            //extract bounding box params\n            const boundingBoxWidth = endX - boundingBox[0];\n            const boundingBoxHeight = endY - boundingBox[1];\n\n            const roiMask = new ImageJS.Image(\n              boundingBoxWidth,\n              boundingBoxHeight,\n              decoded,\n              {\n                components: 1,\n                alpha: 0,\n              }\n            );\n            for (let i = 0; i < boundingBoxWidth; i++) {\n              for (let j = 0; j < boundingBoxHeight; j++) {\n                if (roiMask.getPixelXY(i, j)[0] > 0) {\n                  fullLabelImage.setPixelXY(\n                    i + annotation.boundingBox[0],\n                    j + annotation.boundingBox[1],\n                    [r, g, b]\n                  );\n                }\n              }\n            }\n          }\n          const blob = fullLabelImage.toBlob(\"image/png\");\n          zip.folder(`${current.name}`);\n          zip.file(`${current.name}/${category.name}.png`, blob, {\n            base64: true,\n          });\n          resolve(true);\n        });\n      });\n    })\n    .flat();\n};\n\nexport const importSerializedAnnotations = (\n  annotation: SerializedAnnotationType,\n  existingCategories: Array<Category>\n): { annotation_out: AnnotationType; categories: Array<Category> } => {\n  const mask = annotation.annotationMask\n    .split(\" \")\n    .map((x: string) => parseInt(x));\n\n  let newCategories = existingCategories;\n  //if category does not already exist in state, add it\n  if (\n    !existingCategories\n      .map((category: Category) => category.id)\n      .includes(annotation.annotationCategoryId)\n  ) {\n    const category: Category = {\n      color: annotation.annotationCategoryColor,\n      id: annotation.annotationCategoryId,\n      name: annotation.annotationCategoryName,\n      visible: true,\n    };\n    newCategories = [...newCategories, category];\n  }\n\n  let annotationPlane = annotation.annotationPlane;\n\n  if (!annotationPlane) {\n    annotationPlane = 0;\n  }\n\n  return {\n    annotation_out: {\n      boundingBox: [\n        annotation.annotationBoundingBoxX,\n        annotation.annotationBoundingBoxY,\n        annotation.annotationBoundingBoxWidth,\n        annotation.annotationBoundingBoxHeight,\n      ],\n      categoryId: annotation.annotationCategoryId,\n      id: annotation.annotationId,\n      mask: mask,\n      plane: annotationPlane,\n    },\n    categories: newCategories,\n  };\n};\n","export enum Task {\n  Classify,\n  Segment,\n  Annotate,\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Image } from \"../../types/Image\";\nimport { Category, UNKNOWN_CATEGORY_ID } from \"../../types/Category\";\nimport { ToolType } from \"../../types/ToolType\";\nimport { AnnotationType } from \"../../types/AnnotationType\";\nimport { AnnotationModeType } from \"../../types/AnnotationModeType\";\nimport { AnnotationStateType } from \"../../types/AnnotationStateType\";\nimport colorImage from \"../../images/cell-painting.png\";\nimport { LanguageType } from \"../../types/LanguageType\";\nimport * as tensorflow from \"@tensorflow/tfjs\";\nimport { ImageViewer } from \"../../types/ImageViewer\";\nimport { SerializedAnnotationType } from \"../../types/SerializedAnnotationType\";\nimport { ChannelType } from \"../../types/ChannelType\";\nimport { SerializedFileType } from \"../../types/SerializedFileType\";\nimport {\n  importSerializedAnnotations,\n  replaceDuplicateName,\n} from \"../../image/imageHelper\";\nimport * as _ from \"lodash\";\nimport { Partition } from \"../../types/Partition\";\nimport { AnnotationTool } from \"../../annotator/image/Tool\";\n\nconst initialImage =\n  process.env.NODE_ENV === \"development\" ||\n  process.env.NODE_ENV === \"production\"\n    ? {\n        activePlane: 0,\n        avatar: colorImage,\n        categoryId: UNKNOWN_CATEGORY_ID,\n        id: \"f8eecf66-8776-4e14-acd2-94b44603a1a7\",\n        annotations: [],\n        name: \"example.png\",\n        partition: Partition.Inference,\n        shape: {\n          channels: 3,\n          frames: 1,\n          height: 512,\n          planes: 1,\n          width: 512,\n        },\n        originalSrc: [colorImage],\n        src: colorImage,\n      }\n    : undefined;\n\nconst initialCategories =\n  process.env.NODE_ENV === \"development\" ||\n  process.env.NODE_ENV === \"production\"\n    ? [\n        {\n          color: \"#AAAAAA\",\n          id: UNKNOWN_CATEGORY_ID,\n          name: \"Unknown\",\n          visible: true,\n        },\n        {\n          color: \"#a08cd2\",\n          id: \"00000000-0000-0000-0000-000000000001\",\n          name: \"Cell membrane\",\n          visible: true,\n        },\n        {\n          color: \"#b8ddf3\",\n          id: \"00000000-0000-0000-0000-000000000002\",\n          name: \"Cell nucleus\",\n          visible: true,\n        },\n      ]\n    : [\n        {\n          color: \"#AAAAAA\",\n          id: UNKNOWN_CATEGORY_ID,\n          name: \"Unknown\",\n          visible: true,\n        },\n      ];\n\nconst initialState: ImageViewer = {\n  annotationState: AnnotationStateType.Blank,\n  boundingClientRect: new DOMRect(),\n  brightness: 0,\n  categories: initialCategories.length > 0 ? initialCategories : [],\n  channels: [\n    //R, G, and B channels by default\n    {\n      range: [0, 255],\n      visible: true,\n    },\n    {\n      range: [0, 255],\n      visible: true,\n    },\n    {\n      range: [0, 255],\n      visible: true,\n    },\n  ],\n  currentIndex: 0,\n  cursor: \"default\",\n  contrast: 0,\n  exposure: 0,\n  hue: 0,\n  activeImageId: initialImage ? initialImage.id : undefined,\n  activeImagePlane: 0,\n  images: initialImage ? [initialImage] : [],\n  language: LanguageType.English,\n  offset: { x: 0, y: 0 },\n  penSelectionBrushSize: 32,\n  pointerSelection: {\n    dragging: false,\n    minimum: undefined,\n    maximum: undefined,\n    selecting: false,\n  },\n  quickSelectionBrushSize: 40,\n  saturation: 0,\n  selectedAnnotation: undefined,\n  selectedAnnotations: [],\n  selectedCategoryId: UNKNOWN_CATEGORY_ID,\n  selectionMode: AnnotationModeType.New,\n  soundEnabled: true,\n  stageHeight: 1000,\n  stageScale: 1,\n  stageWidth: 1000,\n  stagePosition: { x: 0, y: 0 },\n  toolType: ToolType.RectangularAnnotation,\n  vibrance: 0,\n  zoomSelection: {\n    dragging: false,\n    minimum: undefined,\n    maximum: undefined,\n    selecting: false,\n  },\n};\n\nexport const imageViewerSlice = createSlice({\n  initialState: initialState,\n  name: \"image-viewer-application\",\n  reducers: {\n    addImages(\n      state: ImageViewer,\n      action: PayloadAction<{ newImages: Array<Image> }>\n    ) {\n      //we look for image name duplicates and append number if such duplicates are found\n      const imageNames = state.images.map((image: Image) => {\n        return image.name.split(\".\")[0];\n      });\n      const updatedImages = action.payload.newImages.map((image: Image) => {\n        const initialName = image.name.split(\".\")[0]; //get name before file extension\n        //add filename extension to updatedName\n        const updatedName =\n          replaceDuplicateName(initialName, imageNames) +\n          \".\" +\n          image.name.split(\".\")[1];\n        return { ...image, name: updatedName };\n      });\n\n      state.images.push(...updatedImages);\n    },\n    clearCategoryAnnotations(\n      state: ImageViewer,\n      action: PayloadAction<{ category: Category }>\n    ) {\n      for (let image of state.images) {\n        image.annotations = image.annotations.filter(\n          (annotation: AnnotationType) => {\n            return annotation.categoryId !== action.payload.category.id;\n          }\n        );\n      }\n    },\n    deleteCategory(\n      state: ImageViewer,\n      action: PayloadAction<{ category: Category }>\n    ) {\n      state.categories = state.categories.filter(\n        (category: Category) => category.id !== action.payload.category.id\n      );\n    },\n    deleteImage(state: ImageViewer, action: PayloadAction<{ id: string }>) {\n      state.images = state.images.filter(\n        (image: Image) => image.id !== action.payload.id\n      );\n      if (!state.images.length) state.activeImageId = undefined;\n      else if (\n        state.activeImageId === action.payload.id &&\n        state.images.length\n      ) {\n        state.activeImageId = state.images[0].id;\n      }\n    },\n    deleteAllInstances(\n      state: ImageViewer,\n      action: PayloadAction<{ id: string }>\n    ) {\n      //deletes all instances across all images\n      state.images = state.images.map((image: Image) => {\n        return { ...image, annotations: [] };\n      });\n    },\n    deleteAllImageInstances(\n      state: ImageViewer,\n      action: PayloadAction<{ imageId: string }>\n    ) {\n      //deletes all instances across a given image\n      state.images = state.images.map((image: Image) => {\n        if (image.id === action.payload.imageId) {\n          return { ...image, annotations: [] };\n        } else return image;\n      });\n    },\n    deleteImageInstances(\n      //deletes given instance on active image\n      state: ImageViewer,\n      action: PayloadAction<{ ids: Array<string> }>\n    ) {\n      if (!state.activeImageId) return;\n\n      state.images = state.images.map((image: Image) => {\n        if (image.id === state.activeImageId) {\n          const updatedAnnotations = image.annotations.filter(\n            (annotation: AnnotationType) => {\n              return !action.payload.ids.includes(annotation.id);\n            }\n          );\n          return { ...image, annotations: updatedAnnotations };\n        } else return image;\n      });\n    },\n    openAnnotations(\n      state: ImageViewer,\n      action: PayloadAction<{ file: SerializedFileType }>\n    ) {\n      /*\n       * NOTE: The correct image to annotate is found by looking at the\n       * imageFilename property in the imported annotation file. -- Alice\n       */\n      if (!state.activeImageId) return;\n\n      const annotations = action.payload.file.annotations.map(\n        (annotation: SerializedAnnotationType): AnnotationType => {\n          const { annotation_out, categories } = importSerializedAnnotations(\n            annotation,\n            state.categories\n          );\n          state.categories = categories;\n          return annotation_out;\n        }\n      );\n\n      const loaded: Image = {\n        categoryId: UNKNOWN_CATEGORY_ID,\n        id: action.payload.file.imageId,\n        src: action.payload.file.imageData[0],\n        originalSrc: action.payload.file.imageData,\n        name: action.payload.file.imageFilename,\n        annotations: annotations,\n        partition: Partition.Inference,\n        shape: {\n          channels: action.payload.file.imageChannels,\n          frames: action.payload.file.imageFrames,\n          height: action.payload.file.imageHeight,\n          planes: action.payload.file.imagePlanes,\n          width: action.payload.file.imageWidth,\n        },\n      };\n\n      state.images.push(...[loaded]);\n    },\n    setAnnotationState(\n      state: ImageViewer,\n      action: PayloadAction<{\n        annotationState: AnnotationStateType;\n        annotationTool: AnnotationTool | undefined;\n      }>\n    ) {\n      state.annotationState = action.payload.annotationState;\n    },\n    setBoundingClientRect(\n      state: ImageViewer,\n      action: PayloadAction<{ boundingClientRect: DOMRect }>\n    ) {\n      state.boundingClientRect = action.payload.boundingClientRect;\n    },\n    setBrightness(\n      state: ImageViewer,\n      action: PayloadAction<{ brightness: number }>\n    ) {\n      state.brightness = action.payload.brightness;\n    },\n    setCategories(\n      state: ImageViewer,\n      action: PayloadAction<{ categories: Array<Category> }>\n    ) {\n      state.categories = action.payload.categories;\n    },\n    setCategoryVisibility(\n      state: ImageViewer,\n      action: PayloadAction<{ category: Category; visible: boolean }>\n    ) {\n      const category = _.find(state.categories, (category) => {\n        return category.id === action.payload.category.id;\n      });\n      if (!category) return;\n      category.visible = action.payload.visible;\n      state.categories = [\n        ...state.categories.filter((category) => {\n          return category.id !== action.payload.category.id;\n        }),\n        category,\n      ];\n    },\n    setContrast(\n      state: ImageViewer,\n      action: PayloadAction<{ contrast: number }>\n    ) {\n      state.contrast = action.payload.contrast;\n    },\n    setCurrentIndex(\n      state: ImageViewer,\n      action: PayloadAction<{ currentIndex: number }>\n    ) {\n      state.currentIndex = action.payload.currentIndex;\n    },\n    setExposure(\n      state: ImageViewer,\n      action: PayloadAction<{ exposure: number }>\n    ) {\n      state.exposure = action.payload.exposure;\n    },\n    setHue(state: ImageViewer, action: PayloadAction<{ hue: number }>) {\n      state.hue = action.payload.hue;\n    },\n    setActiveImage(\n      state: ImageViewer,\n      action: PayloadAction<{ image: string }>\n    ) {\n      state.activeImageId = action.payload.image;\n      const activeImage = state.images.find((image: Image) => {\n        return image.id === action.payload.image;\n      });\n      if (!activeImage) return;\n      const defaultChannels: Array<ChannelType> = []; //number of channels depends on whether image is greyscale or RGB\n      for (let i = 0; i < activeImage.shape.channels; i++) {\n        defaultChannels.push({\n          range: [0, 255],\n          visible: true,\n        });\n      }\n      state.channels = defaultChannels;\n    },\n    setActiveImagePlane(\n      state: ImageViewer,\n      action: PayloadAction<{ activeImagePlane: number }>\n    ) {\n      state.activeImagePlane = action.payload.activeImagePlane;\n    },\n    setImageSrc(state: ImageViewer, action: PayloadAction<{ src: string }>) {\n      if (!state.activeImageId) return;\n      state.images = state.images.map((image: Image) => {\n        if (state.activeImageId !== image.id) {\n          return image;\n        } else {\n          return { ...image, src: action.payload.src };\n        }\n      });\n    },\n    setImages(\n      state: ImageViewer,\n      action: PayloadAction<{ images: Array<Image> }>\n    ) {\n      state.images = action.payload.images;\n      if (!action.payload.images.length) return;\n      state.activeImageId = action.payload.images[0].id;\n    },\n    setChannels(\n      state: ImageViewer,\n      action: PayloadAction<{\n        channels: Array<ChannelType>;\n      }>\n    ) {\n      state.channels = action.payload.channels;\n    },\n    setCursor(\n      state: ImageViewer,\n      action: PayloadAction<{\n        cursor: string;\n      }>\n    ) {\n      state.cursor = action.payload.cursor;\n    },\n    setImageInstances(\n      state: ImageViewer,\n      action: PayloadAction<{\n        instances: Array<AnnotationType>;\n        imageId: string;\n      }>\n    ) {\n      //update corresponding image object in array of Images stored in state\n      state.images = state.images.map((image: Image) => {\n        if (action.payload.imageId !== image.id) {\n          return image;\n        } else {\n          return { ...image, annotations: action.payload.instances };\n        }\n      });\n    },\n    setLanguage(\n      state: ImageViewer,\n      action: PayloadAction<{ language: LanguageType }>\n    ) {\n      state.language = action.payload.language;\n    },\n    setOffset(\n      state: ImageViewer,\n      action: PayloadAction<{ offset: { x: number; y: number } }>\n    ) {\n      state.offset = action.payload.offset;\n    },\n    setOperation(\n      state: ImageViewer,\n      action: PayloadAction<{ operation: ToolType }>\n    ) {\n      state.toolType = action.payload.operation;\n    },\n    setPenSelectionBrushSize(\n      state: ImageViewer,\n      action: PayloadAction<{ penSelectionBrushSize: number }>\n    ) {\n      state.penSelectionBrushSize = action.payload.penSelectionBrushSize;\n    },\n    setPointerSelection(\n      state: ImageViewer,\n      action: PayloadAction<{\n        pointerSelection: {\n          dragging: boolean;\n          minimum: { x: number; y: number } | undefined;\n          maximum: { x: number; y: number } | undefined;\n          selecting: boolean;\n        };\n      }>\n    ) {\n      state.pointerSelection = action.payload.pointerSelection;\n    },\n    setQuickSelectionBrushSize(\n      state: ImageViewer,\n      action: PayloadAction<{ quickSelectionBrushSize: number }>\n    ) {\n      state.quickSelectionBrushSize = action.payload.quickSelectionBrushSize;\n    },\n    setSaturation(\n      state: ImageViewer,\n      action: PayloadAction<{ saturation: number }>\n    ) {\n      state.saturation = action.payload.saturation;\n    },\n    setSelectedCategoryId(\n      state: ImageViewer,\n      action: PayloadAction<{ selectedCategoryId: string }>\n    ) {\n      state.selectedCategoryId = action.payload.selectedCategoryId;\n    },\n    setSelectedAnnotations(\n      state: ImageViewer,\n      action: PayloadAction<{\n        selectedAnnotations: Array<AnnotationType>;\n        selectedAnnotation: AnnotationType | undefined;\n      }>\n    ) {\n      state.selectedAnnotations = action.payload.selectedAnnotations;\n      state.selectedAnnotation = action.payload.selectedAnnotation;\n    },\n    setSelectionMode(\n      state: ImageViewer,\n      action: PayloadAction<{ selectionMode: AnnotationModeType }>\n    ) {\n      state.selectionMode = action.payload.selectionMode;\n    },\n    setStageHeight(\n      state: ImageViewer,\n      action: PayloadAction<{ stageHeight: number }>\n    ) {\n      state.stageHeight = action.payload.stageHeight;\n    },\n    setStagePosition(\n      state: ImageViewer,\n      action: PayloadAction<{ stagePosition: { x: number; y: number } }>\n    ) {\n      state.stagePosition = action.payload.stagePosition;\n    },\n    setStageScale(\n      state: ImageViewer,\n      action: PayloadAction<{ stageScale: number }>\n    ) {\n      state.stageScale = action.payload.stageScale;\n    },\n    setStageWidth(\n      state: ImageViewer,\n      action: PayloadAction<{ stageWidth: number }>\n    ) {\n      state.stageWidth = action.payload.stageWidth;\n    },\n    setSoundEnabled(\n      state: ImageViewer,\n      action: PayloadAction<{ soundEnabled: boolean }>\n    ) {\n      state.soundEnabled = action.payload.soundEnabled;\n    },\n    setVibrance(\n      state: ImageViewer,\n      action: PayloadAction<{ vibrance: number }>\n    ) {\n      state.vibrance = action.payload.vibrance;\n    },\n    setZoomSelection(\n      state: ImageViewer,\n      action: PayloadAction<{\n        zoomSelection: {\n          dragging: boolean;\n          minimum: { x: number; y: number } | undefined;\n          maximum: { x: number; y: number } | undefined;\n          selecting: boolean;\n        };\n      }>\n    ) {\n      state.zoomSelection = action.payload.zoomSelection;\n    },\n  },\n  extraReducers: {\n    \"thunks/loadLayersModel/fulfilled\": (\n      state: ImageViewer,\n      action: PayloadAction<tensorflow.LayersModel>\n    ) => {\n      console.info(action.payload);\n    },\n  },\n});\n\nexport const {\n  addImages,\n  deleteCategory,\n  deleteAllInstances,\n  deleteImage,\n  openAnnotations,\n  setActiveImage,\n  setAnnotationState,\n  setBoundingClientRect,\n  setBrightness,\n  setCategories,\n  setCategoryVisibility,\n  setChannels,\n  setContrast,\n  setCurrentIndex,\n  setCursor,\n  setExposure,\n  setHue,\n  setImages,\n  setLanguage,\n  setOffset,\n  setOperation,\n  setPenSelectionBrushSize,\n  setPointerSelection,\n  setQuickSelectionBrushSize,\n  setSaturation,\n  setSelectedAnnotations,\n  setSelectionMode,\n  setSelectedCategoryId,\n  setSoundEnabled,\n  setStageHeight,\n  setStagePosition,\n  setStageScale,\n  setStageWidth,\n  setVibrance,\n  setZoomSelection,\n} = imageViewerSlice.actions;\n","export default __webpack_public_path__ + \"static/media/317832f90f02c5e916b2ac0f3bcb8da9928d8e400b747b2c68e544e56adacf6b.b6972107.png\";","import { Project } from \"../../types/Project\";\nimport { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { Category, UNKNOWN_CATEGORY_ID } from \"../../types/Category\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Image } from \"../../types/Image\";\nimport { filter, findIndex } from \"lodash\";\nimport nuclei from \"../../images/317832f90f02c5e916b2ac0f3bcb8da9928d8e400b747b2c68e544e56adacf6b.png\";\nimport { SerializedImageType } from \"../../types/SerializedImageType\";\nimport { Task } from \"../../types/Task\";\nimport { Partition } from \"../../types/Partition\";\n\nconst dummyImage: Image = {\n  id: \"a860a94c-58aa-44eb-88e7-9538cb48be29\",\n  categoryId: UNKNOWN_CATEGORY_ID,\n  annotations: [],\n  name: \"nuclei\",\n  originalSrc: [nuclei],\n  src: nuclei,\n  shape: {\n    height: 256,\n    width: 256,\n    channels: 3,\n    planes: 1,\n    frames: 1,\n  },\n  partition: Partition.Inference,\n};\n\nconst initialState: Project = {\n  categories: [\n    {\n      color: \"#AAAAAA\",\n      id: UNKNOWN_CATEGORY_ID,\n      name: \"Unknown\",\n      visible: true,\n    },\n  ],\n  images: [dummyImage],\n  name: \"Untitled project\",\n  task: Task.Classify,\n  trainFlag: 0,\n};\n\nexport const projectSlice = createSlice({\n  name: \"project\",\n  initialState: initialState,\n  reducers: {\n    createCategory(\n      state: Project,\n      action: PayloadAction<{ name: string; color: string }>\n    ) {\n      const category: Category = {\n        color: action.payload.color,\n        id: uuidv4().toString(),\n        name: action.payload.name,\n        visible: true,\n      };\n      state.categories.push(category);\n    },\n    createImage(state: Project, action: PayloadAction<{ image: Image }>) {\n      state.images.push(action.payload.image);\n    },\n    createProject(state: Project, action: PayloadAction<{ project: Project }>) {\n      state.categories = action.payload.project.categories;\n      state.name = action.payload.project.name;\n      state.images = action.payload.project.images;\n    },\n    deleteCategory(state: Project, action: PayloadAction<{ id: string }>) {\n      state.categories = filter(state.categories, (category: Category) => {\n        return category.id !== action.payload.id;\n      });\n      state.images = state.images.map((image: Image) => {\n        if (image.categoryId === action.payload.id) {\n          image.categoryId = UNKNOWN_CATEGORY_ID;\n        }\n        return image;\n      });\n    },\n    deleteImages(\n      state: Project,\n      action: PayloadAction<{ ids: Array<string> }>\n    ) {\n      state.images = filter(state.images, (image: Image) => {\n        return !action.payload.ids.includes(image.id);\n      });\n    },\n    openImages(\n      state: Project,\n      action: PayloadAction<{ images: Array<SerializedImageType> }>\n    ) {\n      const newImages: Array<Image> = [];\n\n      action.payload.images.forEach((serializedImage: SerializedImageType) => {\n        const image: Image = {\n          categoryId: serializedImage.imageCategoryId,\n          id: serializedImage.imageId,\n          annotations: serializedImage.annotations,\n          name: serializedImage.imageFilename,\n          partition: serializedImage.imagePartition,\n          shape: {\n            width: serializedImage.imageWidth,\n            height: serializedImage.imageHeight,\n            channels: serializedImage.imageChannels,\n            planes: serializedImage.imagePlanes,\n            frames: serializedImage.imageFrames,\n          },\n          originalSrc: serializedImage.imageData,\n          src: serializedImage.imageData[\n            Math.floor(serializedImage.imagePlanes / 2)\n          ],\n        };\n\n        newImages.push(image);\n      });\n\n      state.images = newImages;\n    },\n    openProject(\n      state: Project,\n      action: PayloadAction<{\n        images: Array<SerializedImageType>;\n        name: string;\n        categories: Array<Category>;\n      }>\n    ) {\n      state.categories = action.payload.categories;\n      state.name = action.payload.name;\n\n      //Open images\n      const newImages: Array<Image> = [];\n\n      action.payload.images.forEach((serializedImage: SerializedImageType) => {\n        const originalSrc = Array.isArray(serializedImage.imageData)\n          ? serializedImage.imageData\n          : [serializedImage.imageData]; //handle case where example projects's images do not correspond to array of strings\n        const image: Image = {\n          categoryId: serializedImage.imageCategoryId,\n          id: serializedImage.imageId,\n          annotations: serializedImage.annotations,\n          name: serializedImage.imageFilename,\n          partition: serializedImage.imagePartition,\n          shape: {\n            width: serializedImage.imageWidth,\n            height: serializedImage.imageHeight,\n            channels: serializedImage.imageChannels,\n            planes: serializedImage.imagePlanes,\n            frames: serializedImage.imageFrames,\n          },\n          originalSrc: serializedImage.imageData,\n          src: originalSrc[Math.floor(serializedImage.imagePlanes / 2)],\n        };\n\n        newImages.push(image);\n      });\n\n      state.images = newImages;\n    },\n    setCategories(\n      state: Project,\n      action: PayloadAction<{ categories: Array<Category> }>\n    ) {\n      state.categories = [...state.categories, ...action.payload.categories];\n    },\n    setImages(state: Project, action: PayloadAction<{ images: Array<Image> }>) {\n      state.images = action.payload.images;\n    },\n    setProjectName(state: Project, action: PayloadAction<{ name: string }>) {\n      state.name = action.payload.name;\n    },\n    updateCategory(\n      state: Project,\n      action: PayloadAction<{ id: string; name: string; color: string }>\n    ) {\n      const index = findIndex(state.categories, (category: Category) => {\n        return category.id === action.payload.id;\n      });\n      state.categories[index].name = action.payload.name;\n      state.categories[index].color = action.payload.color;\n    },\n    updateCategoryVisibility(\n      state: Project,\n      action: PayloadAction<{ id: string; visible: boolean }>\n    ) {\n      const index = findIndex(state.categories, (category: Category) => {\n        return category.id === action.payload.id;\n      });\n      state.categories[index].visible = action.payload.visible;\n    },\n    updateOtherCategoryVisibility(\n      state: Project,\n      action: PayloadAction<{ id: string }>\n    ) {\n      const categories = filter(state.categories, (category: Category) => {\n        return category.id !== action.payload.id;\n      });\n      for (let category of categories) {\n        category.visible = false;\n      }\n    },\n    updateImageCategory(\n      state: Project,\n      action: PayloadAction<{ id: string; categoryId: string }>\n    ) {\n      const index = findIndex(state.images, (image: Image) => {\n        return image.id === action.payload.id;\n      });\n      if (index >= 0) {\n        state.images[index].categoryId = action.payload.categoryId;\n      }\n    },\n    updateImageCategories(\n      state: Project,\n      action: PayloadAction<{ ids: Array<string>; categoryId: string }>\n    ) {\n      action.payload.ids.forEach((imageId) => {\n        const index = findIndex(state.images, (image: Image) => {\n          return image.id === imageId;\n        });\n        if (index >= 0) {\n          state.images[index].categoryId = action.payload.categoryId;\n          if (action.payload.categoryId === UNKNOWN_CATEGORY_ID) {\n            //If assigned category is unknown, then this image is moved to inference set, else it is assigned to training set\n            state.images[index].partition = Partition.Inference;\n          } else {\n            state.images[index].partition = Partition.Training;\n          }\n        }\n      });\n    },\n    updateImagesCategories(\n      state: Project,\n      action: PayloadAction<{ ids: Array<string>; categoryIds: Array<string> }>\n    ) {\n      action.payload.ids.forEach((imageId, idx) => {\n        const index = findIndex(state.images, (image: Image) => {\n          return image.id === imageId;\n        });\n        if (index >= 0) {\n          state.images[index].categoryId = action.payload.categoryIds[idx];\n        }\n      });\n    },\n    updateImagesPartition(\n      state: Project,\n      action: PayloadAction<{ ids: Array<string>; partition: Partition }>\n    ) {\n      action.payload.ids.forEach((imageId, idx) => {\n        const index = findIndex(state.images, (image: Image) => {\n          return image.id === imageId;\n        });\n        if (index >= 0) {\n          state.images[index].partition = action.payload.partition;\n        }\n      });\n    },\n    updateTask(state: Project, action: PayloadAction<{ task: Task }>) {\n      state.task = action.payload.task;\n    },\n    updateTrainFlag(\n      state: Project,\n      action: PayloadAction<{ trainFlag: number }>\n    ) {\n      state.trainFlag = action.payload.trainFlag;\n    },\n  },\n});\n\nexport const {\n  createCategory,\n  createImage,\n  createProject,\n  deleteCategory,\n  updateCategory,\n  updateCategoryVisibility,\n  updateImageCategories,\n  updateImageCategory,\n  updateOtherCategoryVisibility,\n} = projectSlice.actions;\n","export enum ZoomModeType {\n  In,\n  Out,\n}\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { ToolOptionsStateType } from \"../../types/ToolOptionsStateType\";\nimport { ZoomModeType } from \"../../types/ZoomModeType\";\nimport { ZoomToolOptionsType } from \"../../types/ZoomToolOptionsType\";\nimport { ColorAdjustmentOptionsType } from \"../../types/ColorAdjustmentOptionsType\";\n\nconst initialState: ToolOptionsStateType = {\n  colorAdjustment: {\n    blackPoint: 0,\n    brightness: 0,\n    contrast: 0,\n    exposure: 0,\n    highlights: 0,\n    hue: 0,\n    saturation: 0,\n    shadows: 0,\n    vibrance: 0,\n  },\n  zoom: {\n    automaticCentering: true,\n    mode: ZoomModeType.In,\n    scale: 1.0,\n    toActualSize: false,\n    toFit: false,\n  },\n};\n\nexport const toolOptionsSlice = createSlice({\n  initialState: initialState,\n  name: \"image-viewer-tool-options\",\n  reducers: {\n    setColorAdjustmentOptions(\n      state: ToolOptionsStateType,\n      action: PayloadAction<{ options: ColorAdjustmentOptionsType }>\n    ) {\n      state.colorAdjustment = action.payload.options;\n    },\n    setZoomToolOptions(\n      state: ToolOptionsStateType,\n      action: PayloadAction<{ options: ZoomToolOptionsType }>\n    ) {\n      state.zoom = action.payload.options;\n    },\n  },\n});\n\nexport const { setColorAdjustmentOptions, setZoomToolOptions } =\n  toolOptionsSlice.actions;\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { ListItemText, MenuItem } from \"@mui/material\";\nimport { classifierSlice, projectSlice } from \"../../store/slices\";\n\ntype OpenExampleProjectMenuItemProps = {\n  popupState: any;\n};\n\nexport const OpenProjectMenuItem = ({\n  popupState,\n}: OpenExampleProjectMenuItemProps) => {\n  const dispatch = useDispatch();\n\n  const onOpenProjectFile = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    close: () => void\n  ) => {\n    popupState.close();\n    event.persist();\n\n    close();\n\n    if (!event.currentTarget.files) return;\n\n    const file = event.currentTarget.files[0];\n\n    const reader = new FileReader();\n\n    reader.onload = async (event: ProgressEvent<FileReader>) => {\n      if (event.target && event.target.result) {\n        const project = JSON.parse(event.target.result as string);\n\n        try {\n          //Open project\n          dispatch(\n            projectSlice.actions.openProject({\n              images: project.project.serializedImages,\n              categories: project.project.categories,\n              name: project.project.name,\n            })\n          );\n\n          //Open Classifier options\n          dispatch(\n            classifierSlice.actions.setClassifier({\n              classifier: project.classifier,\n            })\n          );\n        } catch (err) {\n          const error: Error = err as Error;\n          alert(\n            \"Error while opening the project file: \" +\n              error.name +\n              \"\\n\" +\n              error.message\n          );\n        }\n      }\n    };\n\n    reader.readAsText(file);\n  };\n\n  return (\n    <MenuItem component=\"label\">\n      <ListItemText primary=\"Open project\" />\n      <input\n        accept=\"application/json\"\n        hidden\n        id=\"open-project-file\"\n        onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n          onOpenProjectFile(event, popupState.close)\n        }\n        type=\"file\"\n      />\n    </MenuItem>\n  );\n};\n","import React from \"react\";\nimport {\n  Alert,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  ListItemIcon,\n  ListItemText,\n  MenuItem,\n  Typography,\n} from \"@mui/material\";\nimport { classifierSlice } from \"../../store/slices\";\nimport { Shape } from \"../../types/Shape\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport { useDispatch } from \"react-redux\";\nimport FileOpenIcon from \"@mui/icons-material/FileOpen\";\nimport { LayersModel } from \"@tensorflow/tfjs\";\nimport { ModelType } from \"../../types/ClassifierModelType\";\n\ntype OpenClassifierDialogProps = {\n  onClose: any;\n  open: any;\n  popupState: any;\n};\n\nexport const OpenClassifierDialog = ({\n  onClose,\n  open,\n  popupState,\n}: OpenClassifierDialogProps) => {\n  const [classifierModel, setClassifierModel] = React.useState<LayersModel>();\n  const [modelSelected, setModelSelected] = React.useState<boolean>(false);\n  const [modelName, setModelName] = React.useState<string>(\"\");\n  const [inputShape, setInputShape] = React.useState<Shape>({\n    height: 256,\n    width: 256,\n    channels: 3,\n    planes: 1,\n    frames: 1,\n  });\n\n  const [fileError, setFileError] = React.useState<boolean>(false);\n  const [fileErrorMessage, setFileErrorMessage] = React.useState<string>(\"\");\n\n  const dispatch = useDispatch();\n\n  const dispatchModelToStore = () => {\n    dispatch(\n      classifierSlice.actions.uploadUserSelectedModel({\n        inputShape: inputShape,\n        modelSelection: {\n          modelName: modelName + \" - uploaded\",\n          modelType: ModelType.UserUploaded,\n        },\n        model: classifierModel as LayersModel,\n      })\n    );\n\n    onClose();\n    popupState.close();\n  };\n\n  const onClassifierFilesSelected = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    event.persist();\n\n    if (!event.currentTarget.files) {\n      return;\n    }\n\n    let weightsFile, jsonFile;\n    if (event.currentTarget.files[0].name.includes(\".bin\")) {\n      weightsFile = event.currentTarget.files[0];\n      jsonFile = event.currentTarget.files[1];\n    } else {\n      weightsFile = event.currentTarget.files[1];\n      jsonFile = event.currentTarget.files[0];\n    }\n\n    // make sure the weight file required in the json has the correct name\n    const jsonFileContent = await jsonFile.text();\n\n    const weightFileName = weightsFile.name;\n    const weightFileNameReplaceString =\n      'paths\":[\"./' +\n      weightFileName.substring(0, weightFileName.length - 4) +\n      '.bin\"]';\n\n    const regegPattern = new RegExp('paths\":\\\\[\"./(.)*weights.bin\"]');\n    const updatedJsonFileContent = jsonFileContent.replace(\n      regegPattern,\n      weightFileNameReplaceString\n    );\n\n    var newJsonFile = new File([updatedJsonFileContent], jsonFile.name, {\n      type: jsonFile.type,\n    });\n\n    try {\n      const model = await tf.loadLayersModel(\n        tf.io.browserFiles([newJsonFile, weightsFile])\n      );\n      setClassifierModel(model);\n      setModelSelected(true);\n\n      const modelShape = model.inputs[0].shape.slice(1) as number[];\n      setInputShape((prevShape) => ({\n        ...prevShape,\n        height: modelShape[0],\n        width: modelShape[1],\n        channels: modelShape[2],\n      }));\n\n      // remove the file extension from the model name\n      const jsonFileName = jsonFile.name.replace(/\\..+$/, \"\");\n      setModelName(jsonFileName);\n    } catch (err) {\n      const error: Error = err as Error;\n\n      setFileErrorMessage(\n        \"Invalid files selected:\\n\" + error.name + \"\\n\" + error.message\n      );\n      setFileError(true);\n    }\n  };\n\n  const onCancel = () => {\n    onClose();\n  };\n\n  return (\n    <Dialog fullWidth maxWidth=\"xs\" onClose={onClose} open={open}>\n      <DialogTitle>Open classifier</DialogTitle>\n\n      <input\n        accept=\"application/json|.bin\"\n        hidden\n        type=\"file\"\n        multiple\n        id=\"open-classifier-file\"\n        onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n          onClassifierFilesSelected(event)\n        }\n      />\n\n      <DialogContent>\n        <Typography gutterBottom>\n          Tensowflow requires a .json files containing the model description as\n          well as the corresponding model weights (.bin file).\n        </Typography>\n      </DialogContent>\n\n      <label htmlFor=\"open-classifier-file\">\n        <MenuItem component=\"span\" dense>\n          <ListItemIcon>\n            <FileOpenIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Select classifier files\" />\n        </MenuItem>\n      </label>\n\n      {fileError ? <Alert severity=\"error\">{fileErrorMessage}</Alert> : <></>}\n\n      <DialogActions>\n        <Button onClick={onCancel} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button\n          onClick={dispatchModelToStore}\n          color=\"primary\"\n          disabled={!modelSelected}\n        >\n          Open Classifier\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { useCallback, useState } from \"react\";\n\nexport const useDialog = () => {\n  const [open, setOpen] = useState(false);\n\n  const onClose = useCallback(() => {\n    setOpen(!open);\n  }, [open]);\n\n  const onOpen = useCallback(() => {\n    setOpen(!open);\n  }, [open]);\n\n  return { onClose, onOpen, open };\n};\n","import React, { useCallback, useState } from \"react\";\n\nexport const useMenu = () => {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  const [open, setOpen] = useState<boolean>(false);\n\n  const onClose = useCallback(\n    (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n      setAnchorEl(null);\n\n      setOpen(false);\n    },\n    []\n  );\n\n  const onOpen = useCallback((event: React.MouseEvent<HTMLElement>) => {\n    setOpen(true);\n    setAnchorEl(event.currentTarget);\n  }, []);\n\n  return {\n    anchorEl,\n    onClose,\n    onOpen,\n    open,\n  };\n};\n","import { NodeHeap } from \"./NodeHeap\";\nimport { fromIdxToCoord, PiximiGraph, PiximiNode } from \"../GraphHelper\";\nimport { Node } from \"ngraph.graph\";\n\n/**\n * Performs a uni-directional A Star search on graph.\n *\n * We will try to minimize f(n) = g(n) + h(n), where\n * g(n) is actual distance from source node to `n`, and\n * h(n) is heuristic distance from `n` to target node.\n */\n\nconst NO_PATH: never[] = [];\n\n/**\n * Creates a new instance of pathfinder. A pathfinder has just one method:\n * `find(fromId, toId)`, it may be extended in future.\n *\n * @param graph instance. See https://github.com/anvaka/ngraph.graph\n * @param {width} width of the original image\n * @param {factor} factor for scaling between image and graph\n *\n * @returns {Object} A pathfinder with single method `find()`.\n */\nexport function cachedAStarPathSearch(\n  graph: PiximiGraph,\n  width: number,\n  factor: number\n) {\n  // whether traversal should be considered over oriented graph.\n  const oriented = true;\n\n  const heuristic = (fromNode: PiximiNode, toNode: PiximiNode) => {\n    const [x1, y1] = fromIdxToCoord(fromNode.id as number, width);\n    const [x2, y2] = fromIdxToCoord(toNode.id as number, width);\n    if (x1 === x2 || y1 === y2) {\n      return 1;\n    }\n    return 1.41;\n  };\n\n  const distance = (fromNode: Node, toNode: Node) => {\n    const [x1, y1] = fromIdxToCoord(fromNode.id as number, width);\n    const [x2, y2] = fromIdxToCoord(toNode.id as number, width);\n    if (x1 === x2 || y1 === y2) {\n      return 1 * toNode.data;\n    }\n    return 1.41 * toNode.data;\n  };\n\n  return {\n    /**\n     * Finds a path between node `fromId` and `toId`.\n     * @returns {Array} of nodes between `toId` and `fromId`. Empty array is returned\n     * if no path is found.\n     */\n    find: find,\n  };\n\n  function find(fromId: number, toId: number) {\n    const from = graph.getNode(fromId) as PiximiNode;\n    if (!from) return NO_PATH;\n    const to = graph.getNode(toId) as PiximiNode;\n    if (!to) return NO_PATH;\n\n    let cameFrom: any;\n    // Maps nodeId to NodeSearchState.\n\n    const dest = graph.getNode(toId) as PiximiNode;\n    if (dest) {\n      if (dest.fromId === fromId && dest.trace.length > 0) {\n        return dest.trace;\n      }\n    }\n\n    if (graph.fromId !== fromId || graph.openSet.length === 0) {\n      graph.openSet = new NodeHeap();\n      // For the first node, fScore is completely heuristic.\n      from.fScore = heuristic(from, to);\n\n      // The cost of going from start to start is zero.\n      from.distanceToSource = 0;\n      graph.openSet.push(from);\n      from.open = 1;\n      graph.fromId = fromId;\n    }\n\n    while (graph.openSet.length > 0) {\n      cameFrom = graph.openSet.pop();\n\n      if (cameFrom.id === toId) {\n        cameFrom.trace = reconstructPath(graph, cameFrom, width, factor);\n        cameFrom.fromId = fromId;\n        return cameFrom.trace;\n      }\n\n      // no need to visit this node anymore\n      cameFrom.trace = reconstructPath(graph, cameFrom, width, factor);\n      cameFrom.fromId = fromId;\n      cameFrom.closed = true;\n      graph.forEachLinkedNode(cameFrom.id, visitNeighbour, oriented);\n    }\n\n    // If we got here, then there is no path.\n    return NO_PATH;\n\n    function visitNeighbour(otherNode: any) {\n      if (otherNode.fromId !== graph.fromId) {\n        // This is old data, reset all params\n        otherNode.fromId = graph.fromId;\n        otherNode.trace = [];\n        otherNode.parentId = null;\n        otherNode.closed = false;\n        otherNode.open = 0;\n        otherNode.distanceToSource = Number.POSITIVE_INFINITY;\n        otherNode.fScore = Number.POSITIVE_INFINITY;\n        otherNode.heapIndex = -1;\n      }\n\n      if (otherNode.closed) {\n        // Already processed this node.\n        return;\n      }\n      if (otherNode.open === 0) {\n        // Remember this node.\n        graph.openSet.push(otherNode);\n        otherNode.open = 1;\n      }\n\n      const tentativeDistance =\n        cameFrom.distanceToSource + distance(otherNode, cameFrom);\n      if (tentativeDistance >= otherNode.distanceToSource) {\n        // This would only make our path longer. Ignore this route.\n        return;\n      }\n\n      // bingo! we found shorter path:\n      otherNode.parentId = cameFrom.id;\n      otherNode.distanceToSource = tentativeDistance;\n      otherNode.fScore = tentativeDistance + heuristic(otherNode, to);\n\n      graph.openSet.updateItem(otherNode.heapIndex);\n    }\n  }\n}\n\nfunction reconstructPath(\n  graph: PiximiGraph,\n  searchNode: PiximiNode | null,\n  width: number,\n  factor: number = 1\n) {\n  if (!searchNode) return;\n\n  const [x, y] = fromIdxToCoord(searchNode.id as number, width);\n  const newCoord = [x / factor, y / factor];\n  let coords = [];\n  const fromId = graph.fromId;\n  if (searchNode!.parentId !== null) {\n    const parentNode = graph.getNode(searchNode!.parentId) as PiximiNode;\n    if (typeof parentNode !== \"undefined\" && parentNode.fromId === fromId) {\n      // Fetch a trace from the last coordinate\n      coords.push(...parentNode.trace);\n      if (coords.length > 1) {\n        const oldDirection = pathDirection(\n          coords[coords.length - 2],\n          coords[coords.length - 1]\n        );\n        const newDirection = pathDirection(coords[coords.length - 1], newCoord);\n        if (oldDirection === newDirection) {\n          coords.pop();\n        }\n      }\n    }\n  }\n  coords.push(newCoord);\n  return coords;\n}\n\nexport const pathDirection = (from: Array<number>, to: Array<number>) => {\n  // Generate a number representing the relative direction of the coordinates.\n  // Assuming TopLeft of an image is 0,0\n  const dx = to[0] - from[0];\n  const dy = to[1] - from[1];\n  if (dx === 0) {\n    if (dy < 0) {\n      return 0; // Up\n    }\n    if (dy > 0) {\n      return 4; // Down\n    }\n  }\n  if (dy === 0) {\n    if (dx > 0) {\n      return 2; // Right\n    }\n    if (dx < 0) {\n      return 6; // Left\n    }\n  }\n  if (dx > 0) {\n    if (dy < 0) {\n      return 1; // Up+Right\n    }\n    if (dy > 0) {\n      return 3; // Down+Right\n    }\n  }\n  if (dx < 0) {\n    if (dy < 0) {\n      return 7; // Up+Left\n    }\n    if (dy > 0) {\n      return 5; // Down+Left\n    }\n  }\n  console.log(\n    \"Invalid direction, this should never appear so check the code\",\n    dx,\n    dy\n  );\n};\n","export enum ExampleProject {\n  Mnist,\n  CElegans,\n  HumanU2OSCells,\n}\n","import { Classifier } from \"../../types/Classifier\";\n\nexport const classifierSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): Classifier => {\n  return classifier;\n};\n","import { Project } from \"../../types/Project\";\nexport const categoriesSelector = ({ project }: { project: Project }) => {\n  return project.categories;\n};\n","import { Category, UNKNOWN_CATEGORY_ID } from \"../../types/Category\";\nimport { sortBy } from \"lodash\";\nimport { Project } from \"../../types/Project\";\n\nexport const createdCategoriesSelector = ({\n  project,\n}: {\n  project: Project;\n}) => {\n  const categories = project.categories.filter((category: Category) => {\n    return category.id !== UNKNOWN_CATEGORY_ID;\n  });\n\n  return sortBy(categories, \"name\");\n};\n","import { ImageViewer } from \"../../types/ImageViewer\";\nimport { Image } from \"../../types/Image\";\n\nexport const imageInstancesSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}) => {\n  if (!imageViewer.images.length) return;\n\n  const image = imageViewer.images.find((image: Image) => {\n    return image.id === imageViewer.activeImageId;\n  });\n\n  if (!image) return;\n\n  return image.annotations;\n};\n","import { ImageViewer } from \"../../types/ImageViewer\";\nimport * as _ from \"lodash\";\nimport { Category } from \"../../types/Category\";\n\nexport const selectedCategorySelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}): Category => {\n  const category = _.find(imageViewer.categories, (category: Category) => {\n    return category.id === imageViewer.selectedCategoryId;\n  });\n\n  return category!;\n};\n","import { ImageViewer } from \"../../types/ImageViewer\";\nimport { AnnotationModeType } from \"../../types/AnnotationModeType\";\n\nexport const selectionModeSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}): AnnotationModeType => {\n  return imageViewer.selectionMode;\n};\n","import { ImageViewer } from \"../../types/ImageViewer\";\nimport { ToolType } from \"../../types/ToolType\";\n\nexport const toolTypeSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}): ToolType => {\n  return imageViewer.toolType;\n};\n","import { Category, UNKNOWN_CATEGORY_ID } from \"../../types/Category\";\nimport { Project } from \"../../types/Project\";\n\nexport const unknownCategorySelector = ({ project }: { project: Project }) => {\n  return project.categories.find((category: Category) => {\n    return category.id === UNKNOWN_CATEGORY_ID;\n  })!;\n};\n","import { Project } from \"../../types/Project\";\nimport { Image } from \"../../types/Image\";\nimport { Partition } from \"../../types/Partition\";\n\nexport const categorizedImagesSelector = ({\n  project,\n}: {\n  project: Project;\n}): Array<Image> => {\n  return project.images.filter((image: Image) => {\n    return image.partition !== Partition.Inference;\n  });\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { LayersModel } from \"@tensorflow/tfjs\";\n\nexport const compiledSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): LayersModel | undefined => {\n  return classifier.compiled;\n};\n","import { Project } from \"../../types/Project\";\n\nexport const createdCategoriesCountSelector = ({\n  project,\n}: {\n  project: Project;\n}): number => {\n  return project.categories.length - 1;\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { FitOptions } from \"../../types/FitOptions\";\n\nexport const fitOptionsSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): FitOptions => {\n  return classifier.fitOptions;\n};\n","import { Classifier } from \"../../types/Classifier\";\n\nexport const trainingPercentageSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): number => {\n  return classifier.trainingPercentage;\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { CompileOptions } from \"../../types/CompileOptions\";\n\nexport const compileOptionsSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): CompileOptions => {\n  return {\n    learningRate: classifier.learningRate,\n    lossFunction: classifier.lossFunction,\n    metrics: classifier.metrics,\n    optimizationAlgorithm: classifier.optimizationAlgorithm,\n  };\n};\n","import { Settings } from \"../../types/Settings\";\nimport { Project } from \"../../types/Project\";\nimport { Image } from \"../../types/Image\";\nimport { Category } from \"../../types/Category\";\n\nexport const selectedImagesSelector = ({\n  project,\n  settings,\n}: {\n  project: Project;\n  settings: Settings;\n}): Array<string> => {\n  return Array.from(settings.selectedImages).filter((id: string) => {\n    const visibleCategories: Array<string> = project.categories\n      .filter((category: Category) => {\n        return category.visible;\n      })\n      .map((category: Category) => {\n        return category.id;\n      });\n\n    return project.images\n      .filter((image: Image) => {\n        return id === image.id;\n      })\n      .filter((image: Image) => {\n        return image.categoryId && visibleCategories.includes(image.categoryId);\n      })\n      .map((image) => {\n        return image.id;\n      });\n  });\n};\n","import { Project } from \"../../types/Project\";\nimport { Image } from \"../../types/Image\";\nimport { Category } from \"../../types/Category\";\n\nexport const visibleImagesSelector = ({\n  project,\n}: {\n  project: Project;\n}): Array<Image> => {\n  return project.images.filter((image: Image) => {\n    const category = project.categories.find((c: Category) => {\n      return c.id === image.categoryId;\n    });\n    return category ? category.visible : true;\n  });\n};\n","import { ImageViewer } from \"../../types/ImageViewer\";\nexport const languageSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}) => {\n  return imageViewer.language;\n};\n","// prettier-ignore\nimport {language} from \"./language\";\n\nconst de: language = {\n  translation: {\n    Cancel: \"Abbrechen\",\n    Categories: \"Kategorien\",\n    \"Create category\": \"Neue Kategorie\",\n    \"Create new classifier\": \"Neuer Classifier\",\n    \"Delete category\": \"Lösche Kategorie\",\n    \"Delete images\": \"Lösche Bilder\",\n    Description: \"Beschreibung\",\n    Edit: \"Edit\",\n    \"Edit category\": \"Bearbeite Kategorie\",\n    Help: \"Hilfe\",\n    \"Hide other categories\": \"Blende andere Kategorien aus\",\n    \"Hide sidebar\": \"Blende Sidebar aus\",\n    \"Import images\": \"Bilder hinzufügen\",\n    Logo: \"Logo\",\n    Model: \"Modell\",\n    \"Open classifier\": \"Öffne Classifier\",\n    \"Open example classifier\": \"Öffne Beispiel Classifier\",\n    \"Open weights\": \"Öffne Gewichte\",\n    Open: \"Öffnen\",\n    \"Run classifier\": \"Starte Classfier\",\n    \"Save annotations and predictions\": \"Speicher Labels und Predictions\",\n    \"Save classifier\": \"Speicher Classifier\",\n    \"Save weights\": \"Speicher Gewichte\",\n    Save: \"Speichern\",\n    \"Search images\": \"Durchsuche Bilder\",\n    \"Send feedback\": \"Sende Feedback\",\n    Settings: \"Einstellungen\",\n    \"Show sidebar\": \"Blende Sidebar ein\",\n    Unknown: \"Unbekannt\",\n  },\n};\n\nexport default de;\n","import { language } from \"./language\";\n\nconst en: language = {\n  translation: {\n    Cancel: \"Cancel\",\n    Categories: \"Categories\",\n    \"Create category\": \"Create category\",\n    \"Create new classifier\": \"Create new classifier\",\n    \"Delete category\": \"Delete category\",\n    \"Delete images\": \"Delete images\",\n    Description: \"Description\",\n    Edit: \"Edit\",\n    \"Edit category\": \"Edit category\",\n    Help: \"Help\",\n    \"Hide other categories\": \"Hide other categories\",\n    \"Hide sidebar\": \"Hide sidebar\",\n    \"Import images\": \"Import images\",\n    Logo: \"Logo\",\n    Model: \"Model\",\n    \"Open classifier\": \"Open classifier\",\n    \"Open example classifier\": \"Open example classifier\",\n    \"Open weights\": \"Open weights\",\n    Open: \"Open\",\n    \"Run classifier\": \"Run classifier\",\n    \"Save annotations and predictions\": \"Save annotations and predictions\",\n    \"Save classifier\": \"Save classifier\",\n    \"Save weights\": \"Save weights\",\n    Save: \"Save\",\n    \"Search images\": \"Search images\",\n    \"Send feedback\": \"Send feedback\",\n    Settings: \"Settings\",\n    \"Show sidebar\": \"Show sidebar\",\n    Unknown: \"Unknown\",\n  },\n};\n\nexport default en;\n","import { language } from \"./language\";\n\nconst fas: language = {\n  translation: {\n    \"Actual size\": \"سایز اصلی\",\n    \"Add area\": \"ناحیه اضافه کنید\",\n    \"Annotation mode\": \"حالت گروه توضیحی\",\n    Cancel: \"لفو کردن\",\n    Categories: \"دسته بندی کردن\",\n    \"Center image automatically\":\n      \"تصویر را به طور اتوماتیک در مرکز قرار می دهد\",\n    \"Color annotation\": \"توضیح رنگ ها\",\n    \"Create category\": \"ایجاد دسته بندی\",\n    \"Create new classifier\": \"ایجاد طبقه بندی جدید\",\n    Create: \"ایجاد\",\n    \"Delete category\": \"پاک کردن دسته بندی\",\n    \"Delete images\": \"پاک کردن تصویر\",\n    Description: \"توضیحات\",\n    Edit: \"ویرایش\",\n    \"Edit category\": \"ویرایش دسته بندی\",\n    \"Elliptical annotation\": \"گروه توضیحی بیضوی\",\n    Export: \"فرستادن\",\n    \"Export annotations\": \"فرستادن گروه توضیحی\",\n    \"Freehand annotation\": \"گروه توضیحی آزاد\",\n    Help: \"کمک یابی\",\n    \"Hide category\": \"پنهان سازی طبقه بندی\",\n    \"Hide other categories\": \"پنهان سازی سایر طبقه بندی ها\",\n    \"Hide sidebar\": \"پنهان سازی منوی کناری\",\n    \"Import images\": \"آوردن تصاویر\",\n    Intersection: \"تلاقی کردن\",\n    \"Invert annotation\": \"معکوس کردن گروه توضیحی\",\n    \"Lasso annotation\": \"گروه توضیحی کمند\",\n    Logo: \"علامت\",\n    \"Magnetic annotation\": \"گروه توضیحی آهنربایی\",\n    Model: \"نمونه\",\n    \"Object annotation\": \"گروه توضیحی هدف\",\n    \"Open classifier\": \"باز کردن طبقه بندی\",\n    \"Open example classifier\": \"باز کردن طبقه بندی نمونه\",\n    \"Open image\": \"باز کردن تصویر\",\n    \"Open weights\": \"باز کردن وزن ها\",\n    Open: \"باز کردن\",\n    \"Pen annotation\": \"گروه توضیحی خودکار\",\n    Pointer: \"نشانه گر\",\n    \"Polygonal annotation\": \"گروه توضیحی چند ظلعی\",\n    Name: \"نام\",\n    \"New annotation\": \"گروه توضیحی جدید\",\n    \"Quick annotation\": \"گروه توضیحی سریع\",\n    \"Rectangular annotation\": \"گروه توضیحی مستطیلی\",\n    \"Run classifier\": \"اجرا کردن طبقه بندی\",\n    \"Save annotations and predictions\":\n      \"ذخیره کردن گروه های توضیحی و پیش بینی ها\",\n    \"Save classifier\": \"ذخیره کردن طبقه بندی\",\n    \"Save weights\": \"ذخیره کردن وزن ها\",\n    Save: \"ذخیره کردن\",\n    \"Search images\": \"جستجوی تصاویر\",\n    \"Send feedback\": \"فرستادن پیشنهادات\",\n    Settings: \"تنظیمات\",\n    \"Show category\": \"نشان دادن گروه ها\",\n    \"Show sidebar\": \"نشان دادن منوی کناری\",\n    \"Subtract area\": \"کم کردن ناحیه\",\n    Unknown: \"تعریف نشده\",\n    Zoom: \"بزرگ نمایی\",\n    \"Zoom in\": \"بزرگ نمایی کردن\",\n    \"Zoom mode\": \"حالت بزرگ نمایی\",\n    \"Zoom out\": \"کوچک نمایی کردن\",\n  },\n};\n\nexport default fas;\n","// prettier-ignore\nimport {language} from \"./language\";\n\nconst fi: language = {\n  translation: {\n    Cancel: \"Peruuta\",\n    Categories: \"Kategoriat\",\n    \"Create category\": \"Luo kategoria\",\n    \"Create new classifier\": \"Luo uusi luokittelija\",\n    \"Delete category\": \"Poista kategoria\",\n    \"Delete images\": \"Poista kuvat\",\n    Description: \"Kuvaus\",\n    Edit: \"Edit\",\n    \"Edit category\": \"Muokkaa kategoriaa\",\n    Help: \"Apua\",\n    \"Hide other categories\": \"Piilota muut kategoriat\",\n    \"Hide sidebar\": \"Piilota sivupalkki\",\n    \"Import images\": \"Tuo kuvat\",\n    Logo: \"Logo\",\n    Model: \"Malli\",\n    \"Open classifier\": \"Avaa luokittelija\",\n    \"Open example classifier\": \"Avaa esimerkkiluokittelija\",\n    \"Open weights\": \"Avaa painot\",\n    Open: \"Avaa\",\n    \"Run classifier\": \"Suorita luokittelija\",\n    \"Save annotations and predictions\":\n      \"Tallenna annotaatiot ja luokittelun tulos\",\n    \"Save classifier\": \"Tallenna luokittelija\",\n    \"Save weights\": \"Tallenna painot\",\n    Save: \"Tallenna\",\n    \"Search images\": \"Etsi kuvia\",\n    \"Send feedback\": \"Lähetä palautetta\",\n    Settings: \"Asetukset\",\n    \"Show sidebar\": \"Näytä sivupalkki\",\n    Unknown: \"Tuntematon\",\n  },\n};\n\nexport default fi;\n","// prettier-ignore\nimport {language} from \"./language\";\n\nconst gr: language = {\n  translation: {\n    Cancel: \"Άκυρο\",\n    Categories: \"Κατηγορίες\",\n    \"Create category\": \"Δημιουργία κατηγορίας\",\n    \"Create new classifier\": \"Νέος ταξινομητής\",\n    \"Delete category\": \"Διαγραφή κατηγορίας\",\n    \"Delete images\": \"Διαγραφή εικόνων\",\n    Description: \"Περιγραφή\",\n    Edit: \"Επεξεργασία\",\n    \"Edit category\": \"Επεξεργασία κατηγορίας\",\n    Help: \"Βοήθεια\",\n    \"Hide other categories\": \"Απόκρυψη άλλων κατηγοριών\",\n    \"Hide sidebar\": \"Απόκρυψη πλευρικής γραμμής\",\n    \"Import images\": \"Εισαγωγή εικόνων\",\n    Logo: \"Λογότυπο\",\n    Model: \"Mοντέλο\",\n    \"Open classifier\": \"Άνοιγμα ταξινομητή\",\n    \"Open example classifier\": \"Παράδειγμα ταξινομητή\",\n    \"Open weights\": \"Άνοιγμα παραμέτρων\",\n    Open: \"Άνοιγμα\",\n    \"Run classifier\": \"Εκτέλεση ταξινομητή\",\n    \"Save annotations and predictions\": \"Αποθήκευση ετικετών και προβλέψεων\",\n    \"Save classifier\": \"Αποθήκευση ταξινομητή\",\n    \"Save weights\": \"Αποθήκευση παραμέτρων\",\n    Save: \"Αποθήκευση\",\n    \"Search images\": \"Αναζήτηση εικόνων\",\n    \"Send feedback\": \"Eπικοινωνια\",\n    Settings: \"Ρυθμίσεις\",\n    \"Show sidebar\": \"Εμφάνιση πλευρικής γραμμής\",\n    Unknown: \"Άγνωστο\",\n  },\n};\n\nexport default gr;\n","// prettier-ignore\nimport {language} from \"./language\";\n\nconst hi: language = {\n  translation: {\n    Cancel: \"रद्द करें\",\n    Categories: \"सारे वर्ग\",\n    \"Create category\": \"वर्ग बनाएँ\",\n    \"Create new classifier\": \"नया वर्गीकर्त्ता बनाएं\", // वर्गीकर्त्ता = classifier but is rarely used; consider transliterating instead\n    \"Delete category\": \"वर्ग हटाएँ\",\n    \"Delete images\": \"चित्रों को हटाएँ\",\n    Description: \"विवरण\",\n    \"Edit category\": \"वर्ग का बदलाव करें\",\n    Help: \"सहायता\",\n    \"Hide other categories\": \"बाकि वर्गों को छिपाएं\",\n    \"Hide sidebar\": \"साइडबार छिपाएं\",\n    \"Import images\": \"चित्रों को आयात करें\",\n    Logo: \"लोगो\", // transliterated (Logo) but that's ok because it is a loanword\n    Model: \"मॉडल\", // transliterated (Model) but should figure out an appropriate abstraction and translate that\n    \"Open classifier\": \"वर्गीकर्त्ता खोलें\",\n    \"Open example classifier\": \"उदाहरण का वर्गीकर्त्ता खोलें\",\n    \"Open weights\": \"वेइट्स खोलें\",\n    Open: \"खोलें\",\n    \"Run classifier\": \"वर्गीकर्त्ता को चलाएं\",\n    \"Save annotations and predictions\": \"टिप्पणी तथा अनुमान सहेजें\", // व्याख्या is an alternative to टिप्पणी\n    \"Save classifier\": \"वर्गीकर्त्ता सहेजें\",\n    \"Save weights\": \"वेइट्स सहेजें\",\n    Save: \"सहेजें\",\n    \"Search images\": \"चित्र खोजें\",\n    \"Send feedback\": \"प्रतिक्रिया भेजें\",\n    Settings: \"सेटिंग्स\",\n    \"Show sidebar\": \"साइडबार दिखाएं\",\n    Unknown: \"अज्ञात\", // should be used as an adjective before a noun\n  },\n};\n\nexport default hi;\n","// prettier-ignore\nimport {language} from \"./language\";\n\nconst hu: language = {\n  translation: {\n    Cancel: \"Mégse\",\n    Categories: \"Osztályok\",\n    \"Create category\": \"Új osztály létrehozása\",\n    \"Create new classifier\": \"Új osztályozó létrehozása\",\n    \"Delete category\": \"Osztály törlése\",\n    \"Delete images\": \"Képek törlése\",\n    Description: \"Leírás\",\n    Edit: \"Edit\",\n    \"Edit category\": \"Kategória szerkesztése\",\n    Help: \"Súgó\",\n    \"Hide other categories\": \"Többi osztály elrejtése\",\n    \"Hide sidebar\": \"Oldalsáv elrejtése\",\n    \"Import images\": \"Képek importálása\",\n    Logo: \"Logó\",\n    Model: \"Modell\",\n    \"Open classifier\": \"Osztályozó betöltése\",\n    \"Open example classifier\": \"Példa osztályozó betöltése\",\n    \"Open weights\": \"Súlyok betöltése\",\n    Open: \"Megnyitás\",\n    \"Run classifier\": \"Osztályozó futtatása\",\n    \"Save annotations and predictions\": \"Címkék és predikciók mentése\",\n    \"Save classifier\": \"Osztályozó mentése\",\n    \"Save weights\": \"Súlyok mentése\",\n    Save: \"Mentés\",\n    \"Search images\": \"Képek keresése\",\n    \"Send feedback\": \"Visszajelzés küldése\",\n    Settings: \"Beállítások\",\n    \"Show sidebar\": \"Oldalsáv megjelenítése\",\n    Unknown: \"Ismeretlen\",\n  },\n};\n\nexport default hu;\n","import { language } from \"./language\";\n\nconst fr: language = {\n  translation: {\n    \"Actual size\": \"Taille réelle\",\n    \"Add area\": \"Ajouter région\",\n    \"Annotation mode\": \"Mode d'annotation\",\n    Cancel: \"Annuler\",\n    Categories: \"Catégories\",\n    \"Center image automatically\": \"Centrer image automatiquement\",\n    \"Color annotation\": \"Annotation couleur\",\n    \"Create category\": \"Nouvelle catégorie\",\n    \"Create new classifier\": \"Nouveau classifieur\",\n    Create: \"Ajouter\",\n    \"Delete category\": \"Supprimer catégorie\",\n    \"Delete images\": \"Supprimer images\",\n    Description: \"Description\",\n    Edit: \"Modifier\",\n    \"Edit category\": \"Modifier catégorie\",\n    \"Elliptical annotation\": \"Annotation elliptique\",\n    Export: \"Exporter\",\n    \"Export annotations\": \"Exporter annotations\",\n    \"Freehand annotation\": \"Annotation main-libres\",\n    Help: \"Aide\",\n    \"Hide category\": \"Cacher catégorie\",\n    \"Hide other categories\": \"Cacher autres catégories\",\n    \"Hide sidebar\": \"Cacher sidebar\",\n    \"Import images\": \"Importer images\",\n    Intersection: \"Intersection\",\n    \"Invert annotation\": \"Inverser annotation\",\n    \"Lasso annotation\": \"Annotation lasso\",\n    Logo: \"Logo\",\n    \"Magnetic annotation\": \"Annotation magnétique\",\n    Model: \"Modèle\",\n    \"Object annotation\": \"Annotation objet\",\n    \"Open classifier\": \"Ouvrir classifieur\",\n    \"Open example classifier\": \"Ouvrir example classifieur\",\n    \"Open image\": \"Ouvrir image\",\n    \"Open weights\": \"Ouvrir poids\",\n    Open: \"Ouvrir\",\n    \"Pen annotation\": \"Annotation pinceau\",\n    Pointer: \"Pointeur\",\n    \"Polygonal annotation\": \"Annotation polygonale\",\n    Name: \"Nom\",\n    \"New annotation\": \"Nouvelle annotation\",\n    \"Quick annotation\": \"Annotation rapide\",\n    \"Rectangular annotation\": \"Annotation rectangulaire\",\n    \"Run classifier\": \"Initier classifieur\",\n    \"Save annotations and predictions\": \"Sauver annotations et predictions\",\n    \"Save classifier\": \"Sauver classifieur\",\n    \"Save weights\": \"Sauver poids\",\n    Save: \"Sauver\",\n    \"Search images\": \"Rechercher images\",\n    \"Send feedback\": \"Envoyer feedback\",\n    Settings: \"Préférences\",\n    \"Show category\": \"Montrer catégorie\",\n    \"Show sidebar\": \"Montrer sidebar\",\n    \"Subtract area\": \"Soustraire région\",\n    Unknown: \"Inconnu\",\n    Zoom: \"Zoom\",\n    \"Zoom in\": \"Zoom intérieur\",\n    \"Zoom mode\": \"Mode zoom\",\n    \"Zoom out\": \"Zoom extérieur\",\n  },\n};\n\nexport default fr;\n","import { classifierSlice, projectSlice } from \"../../store/slices\";\nimport { useDispatch } from \"react-redux\";\nimport { Avatar, ListItem, ListItemAvatar, ListItemText } from \"@mui/material\";\nimport { SerializedProjectType } from \"../../types/SerializedProjectType\";\nimport { Classifier } from \"../../types/Classifier\";\nimport { ExampleProject } from \"data/exampleProjects/exampleProjectsEnum\";\n\ntype OpenExampleProjectMenuItemProps = {\n  exampleProject: ExampleProject;\n  projectName: string;\n  projectIcon: string;\n  popupState: any;\n  onClose: any;\n};\n\nexport const OpenExampleProjectMenuItem = ({\n  exampleProject,\n  projectName,\n  projectIcon,\n  popupState,\n  onClose,\n}: OpenExampleProjectMenuItemProps) => {\n  const dispatch = useDispatch();\n\n  const onClickExampleProject = async () => {\n    var exampleProjectJson: any;\n    switch (exampleProject) {\n      case ExampleProject.Mnist:\n        exampleProjectJson = await import(\n          \"data/exampleProjects/mnistExampleProject.json\"\n        );\n        break;\n      case ExampleProject.CElegans:\n        exampleProjectJson = await import(\n          \"data/exampleProjects/cElegansExampleProject.json\"\n        );\n        break;\n      case ExampleProject.HumanU2OSCells:\n        exampleProjectJson = await import(\n          \"data/exampleProjects/humanU2OSCellsExampleProject.json\"\n        );\n        break;\n      default:\n        return;\n    }\n\n    const project = exampleProjectJson.project as SerializedProjectType;\n    const classifier = exampleProjectJson.classifier as Classifier;\n\n    popupState.close();\n    onClose();\n\n    dispatch(\n      projectSlice.actions.openProject({\n        images: project.serializedImages,\n        categories: project.categories,\n        name: project.name,\n      })\n    );\n\n    dispatch(\n      classifierSlice.actions.setClassifier({\n        classifier: classifier,\n      })\n    );\n  };\n\n  return (\n    <ListItem button onClick={onClickExampleProject}>\n      <ListItemAvatar>\n        <Avatar src={projectIcon}></Avatar>\n      </ListItemAvatar>\n\n      <ListItemText primary={projectName} />\n    </ListItem>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/cElegansExampleProjectIcon.ec038762.png\";","export default __webpack_public_path__ + \"static/media/humanU2OSCellsExampleProjectIcon.59ecbfc8.png\";","import {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n} from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport { useTranslation } from \"../../hooks/useTranslation\";\nimport { MenuList } from \"@mui/material\";\nimport { OpenExampleProjectMenuItem } from \"../OpenExampleProjectMenuItem\";\nimport { ExampleProject } from \"data/exampleProjects/exampleProjectsEnum\";\n\nimport mnistExampleProjectIcon from \"data/exampleProjects/mnistExampleProjectIcon.png\";\nimport cElegansExampleProjectIcon from \"data/exampleProjects/cElegansExampleProjectIcon.png\";\nimport humanU2OSCellsExampleProjectIcon from \"data/exampleProjects/humanU2OSCellsExampleProjectIcon.png\";\n\ntype OpenExampleClassifierDialogProps = {\n  open: boolean;\n  onClose: () => void;\n  popupState: any;\n};\n\nexport const OpenExampleClassifierDialog = (\n  props: OpenExampleClassifierDialogProps\n) => {\n  const t = useTranslation();\n  const { open, onClose, popupState } = props;\n\n  const closeMenueAndDialog = () => {\n    onClose();\n  };\n\n  return (\n    // @ts-ignore\n    <Dialog fullWidth maxWidth=\"sm\" open={open}>\n      <DialogTitle\n        sx={{\n          borderBottom: (theme) => `1px solid ${theme.palette.divider}`,\n          margin: 0,\n          padding: (theme) => theme.spacing(2),\n        }}\n      >\n        {t(\"Open example project\")}\n        <IconButton\n          aria-label=\"Close\"\n          sx={(theme) => ({\n            color: theme.palette.grey[500],\n            position: \"absolute\",\n            right: theme.spacing(1),\n            top: theme.spacing(1),\n          })}\n          onClick={closeMenueAndDialog}\n        >\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent\n        sx={{\n          borderTop: (theme) => `1px solid ${theme.palette.divider}`,\n          margin: 0,\n          padding: (theme) => theme.spacing(1),\n        }}\n      >\n        <MenuList>\n          <OpenExampleProjectMenuItem\n            exampleProject={ExampleProject.Mnist}\n            projectName={\"Open MNIST example project\"}\n            projectIcon={mnistExampleProjectIcon}\n            popupState={popupState}\n            onClose={onClose}\n          />\n          <OpenExampleProjectMenuItem\n            exampleProject={ExampleProject.CElegans}\n            projectName={\"Open C. elegans example project\"}\n            projectIcon={cElegansExampleProjectIcon}\n            popupState={popupState}\n            onClose={onClose}\n          />\n          <OpenExampleProjectMenuItem\n            exampleProject={ExampleProject.HumanU2OSCells}\n            projectName={\"Open human U2OS-cells example project\"}\n            projectIcon={humanU2OSCellsExampleProjectIcon}\n            popupState={popupState}\n            onClose={onClose}\n          />\n        </MenuList>\n      </DialogContent>\n      <DialogActions />\n    </Dialog>\n  );\n};\n","import { useSelector } from \"react-redux\";\nimport { languageSelector } from \"../../store/selectors/languageSelector\";\nimport { de, en, fas, fi, gr, hi, hu } from \"../../translations\";\nimport { LanguageType } from \"../../types/LanguageType\";\nimport fr from \"../../translations/fr\";\n\nexport const useTranslation = () => {\n  const language = useSelector(languageSelector);\n\n  const t = (word: string) => {\n    switch (language) {\n      case LanguageType.English:\n        if (!en.translation[word]) return word;\n        return en.translation[word];\n      case LanguageType.Farsi:\n        if (!fas.translation[word]) return word;\n        return fas.translation[word];\n      case LanguageType.Finnish:\n        if (!fi.translation[word]) return word;\n        return fi.translation[word];\n      case LanguageType.French:\n        if (!fr.translation[word]) return word;\n        return fr.translation[word];\n      case LanguageType.German:\n        if (!de.translation[word]) return word;\n        return de.translation[word];\n      case LanguageType.Greek:\n        if (!gr.translation[word]) return word;\n        return gr.translation[word];\n      case LanguageType.Hindi:\n        if (!hi.translation[word]) return word;\n        return hi.translation[word];\n      case LanguageType.Hungarian:\n        if (!hu.translation[word]) return word;\n        return hu.translation[word];\n      default:\n        return word;\n    }\n  };\n\n  return t;\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAmdJREFUSEvtlb9LamEcxh8tRNTBP0DEwEGSDMVfkyBIiSEO6mSloI0qOCiCIJYOWmur4K9BpXAzhHIIRNoaGiSktqDJ0EEnL+97r+Gly/Ucraa+cIZzDuf7eb/P+zzn5QCY4huL8wP8bLV/JP2gKI/Hw8nJCdxuN2QyGSqVCoLBIAaDASP1GUsqEolgNBpxfn4OuVwODoeD6fR3osrlMsLhMCMoI6BQKMTd3R0UCsX7FMViEc/Pz1Cr1bDb7YjH48jlcgunZARsNpvY2dmhzQg4m82i0WjQez6fj1KpBJPJBKlUislk8l/oQuDGxgb6/T6Vj+xXKBT6SzqVSoVIJIKDgwPk83kcHR2tBoxGo3Siy8tLOJ3OD81arRYsFgt9fnV1BZvNthqwUCjQ1W9tbeHh4QEajQZer5c21Wq10Ol0WFtbewfu7e2tBvR4PHSPXl9f8fb2BolEQvdtNBqBOHdWw+EQp6enyGQyqwHJFLe3tyD5m1UymaQS+3w++P1+iMViur+Hh4ef49Lt7W0QaYmspNrtNshEZBHEnQKBAOl0GmQhi2qhS+cbEMeS6+bmBolEgubv6ekJFxcXqNfri1j0PSvgfEcC2N3dxf39PQKBAHq93tcB9/f3Qf40JJupVArHx8eMYEtNyOVyad5I9oiUJDLj8fjrgC6XC9VqFS8vLzCbzXh8fGQMW2rCbrcLvV5PI0BOCbbFyjS1Wg0OhwPr6+vY3NxkbJT5RbECEieSs5Bp5v41PWOgUqmkRxMJu9VqxfX1NVs12eXQYDCg0+ng7OwMsVhsKdhSplma9OdDxpKuCpp9/wsa/u4BrNHtvwAAAABJRU5ErkJggg==\"","import { Divider, Menu, MenuItem, MenuList } from \"@mui/material\";\nimport { bindMenu } from \"material-ui-popup-state\";\nimport { OpenProjectMenuItem } from \"../OpenProjectMenuItem\";\nimport { OpenClassifierDialog } from \"../OpenClassifierDialog\";\nimport { useDialog } from \"../../hooks\";\nimport { OpenExampleClassifierDialog } from \"../OpenExampleProjectDialog/OpenExampleProjectDialog\";\n\ntype OpenMenuProps = {\n  popupState: any;\n};\n\nexport const OpenMenu = ({ popupState }: OpenMenuProps) => {\n  const {\n    onClose: onCloseClassifierDialog,\n    onOpen: onOpenClassifierDialog,\n    open: openClassifierDialog,\n  } = useDialog();\n  const {\n    onClose: onCloseExampleClassifierDialog,\n    onOpen: onOpenExampleClassifierDialog,\n    open: openExampleClassifier,\n  } = useDialog();\n\n  return (\n    <Menu {...bindMenu(popupState)}>\n      <MenuList dense variant=\"menu\">\n        <OpenProjectMenuItem popupState={popupState} />\n        <MenuItem onClick={onOpenExampleClassifierDialog}>\n          Open example project\n        </MenuItem>\n        <Divider />\n\n        <MenuItem onClick={onOpenClassifierDialog}>Open classifier</MenuItem>\n      </MenuList>\n\n      <OpenExampleClassifierDialog\n        onClose={onCloseExampleClassifierDialog}\n        open={openExampleClassifier}\n        popupState={popupState}\n      />\n\n      <OpenClassifierDialog\n        onClose={onCloseClassifierDialog}\n        open={openClassifierDialog}\n        popupState={popupState}\n      />\n    </Menu>\n  );\n};\n","import ListItem from \"@mui/material/ListItem\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport FolderOpenIcon from \"@mui/icons-material/FolderOpen\";\nimport React from \"react\";\nimport { OpenMenu } from \"../OpenMenu\";\nimport PopupState, { bindTrigger } from \"material-ui-popup-state\";\n\nexport const OpenListItem = () => {\n  return (\n    //@ts-ignore\n    <PopupState variant=\"popover\">\n      {(popupState) => (\n        <>\n          <ListItem button {...bindTrigger(popupState)}>\n            <ListItemIcon>\n              <FolderOpenIcon />\n            </ListItemIcon>\n\n            <ListItemText primary=\"Open\" />\n          </ListItem>\n\n          <OpenMenu popupState={popupState} />\n        </>\n      )}\n    </PopupState>\n  );\n};\n","import { Project } from \"../../types/Project\";\nimport { Image } from \"../../types/Image\";\nimport { SerializedProjectType } from \"../../types/SerializedProjectType\";\nimport { UNKNOWN_CATEGORY_ID } from \"../../types/Category\";\n\nexport const serializedProjectSelector = ({\n  project,\n}: {\n  project: Project;\n}): SerializedProjectType => {\n  const serializedImages = project.images.map((image: Image) => {\n    const categoryId = image.categoryId\n      ? image.categoryId\n      : UNKNOWN_CATEGORY_ID;\n\n    return {\n      imageCategoryId: categoryId,\n      imageChannels: image.shape.channels,\n      imageChecksum: \"\",\n      imageData: image.originalSrc,\n      imageFilename: image.name,\n      imageFrames: image.shape.frames,\n      imageHeight: image.shape.height,\n      imageId: image.id,\n      imagePlanes: image.shape.planes,\n      imageWidth: image.shape.width,\n      imagePartition: image.partition,\n      annotations: image.annotations,\n    };\n  });\n\n  const categories = project.categories;\n  const name = project.name;\n\n  return {\n    serializedImages: serializedImages,\n    categories: categories,\n    name: name,\n  };\n};\n","import { ChangeEvent, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  TextField,\n} from \"@mui/material\";\nimport saveAs from \"file-saver\";\nimport { classifierSelector } from \"../../store/selectors\";\nimport { serializedProjectSelector } from \"../../store/selectors/serializedProjectSelector\";\n\ntype SaveProjectDialogProps = {\n  onClose: () => void;\n  open: boolean;\n  popupState: any;\n};\n\nexport const SaveProjectDialog = ({\n  onClose,\n  open,\n  popupState,\n}: SaveProjectDialogProps) => {\n  const classifier = useSelector(classifierSelector);\n\n  const serializedProject = useSelector(serializedProjectSelector);\n\n  const [projectName, setProjectName] = useState<string>(\n    serializedProject.name\n  );\n\n  const onSaveProjectClick = () => {\n    const part = {\n      classifier: classifier,\n      project: serializedProject,\n      version: \"0.0.0\",\n    };\n\n    part.project.name = projectName;\n\n    const parts = [JSON.stringify(part)];\n\n    const data = new Blob(parts, { type: \"application/json;charset=utf-8\" });\n\n    saveAs(data, `${projectName}.json`);\n\n    onClose();\n    popupState.close();\n  };\n\n  const onCancel = () => {\n    onClose();\n  };\n\n  const onNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setProjectName(event.target.value);\n  };\n\n  return (\n    <Dialog fullWidth maxWidth=\"xs\" onClose={onClose} open={open}>\n      <DialogTitle>Save Project</DialogTitle>\n\n      <DialogContent>\n        <Grid container spacing={1}>\n          <Grid item xs={10}>\n            <TextField\n              autoFocus\n              fullWidth\n              id=\"name\"\n              label=\"Project file name\"\n              margin=\"dense\"\n              onChange={onNameChange}\n            />\n          </Grid>\n        </Grid>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onCancel} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onSaveProjectClick} color=\"primary\">\n          Save Project\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { LayersModel } from \"@tensorflow/tfjs\";\n\nexport const fittedSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): LayersModel => {\n  return classifier.fitted!;\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { ClassifierModelProps } from \"../../types/ClassifierModelType\";\n\nexport const selectedModelSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): ClassifierModelProps => {\n  return classifier.selectedModel;\n};\n","import { ChangeEvent, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  TextField,\n} from \"@mui/material\";\nimport { fittedSelector } from \"../../store/selectors/fittedSelector\";\nimport { selectedModelSelector } from \"../../store/selectors/selectedModelSelector\";\n\ntype SaveClassifierDialogProps = {\n  onClose: () => void;\n  open: boolean;\n  popupState: any;\n};\n\nexport const SaveClassifierDialog = ({\n  onClose,\n  open,\n  popupState,\n}: SaveClassifierDialogProps) => {\n  const fitted = useSelector(fittedSelector);\n\n  const selectedModel = useSelector(selectedModelSelector);\n\n  const [classifierName, setClassifierName] = useState<string>(\n    selectedModel.modelName\n  );\n\n  const noFittedModel = fitted ? false : true;\n\n  const onCancel = () => {\n    onClose();\n  };\n\n  const onSaveClassifierClick = async () => {\n    await fitted.save(`downloads://${classifierName}`);\n\n    onClose();\n    popupState.close();\n  };\n\n  const onNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setClassifierName(event.target.value);\n  };\n\n  return (\n    <Dialog fullWidth maxWidth=\"xs\" onClose={onClose} open={open}>\n      <DialogTitle>Save Classifier</DialogTitle>\n\n      <DialogContent>\n        <Grid container spacing={1}>\n          <Grid item xs={10}>\n            <TextField\n              autoFocus\n              fullWidth\n              id=\"name\"\n              label=\"Classifier name\"\n              margin=\"dense\"\n              onChange={onNameChange}\n              helperText={\n                noFittedModel\n                  ? \"There is no trained model that could be saved.\"\n                  : \"\"\n              }\n              error={noFittedModel}\n            />\n          </Grid>\n        </Grid>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onCancel} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button\n          onClick={onSaveClassifierClick}\n          color=\"primary\"\n          disabled={noFittedModel}\n        >\n          Save Classifier\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import { bindMenu } from \"material-ui-popup-state\";\nimport { Menu, MenuItem } from \"@mui/material\";\nimport { useDialog } from \"../../hooks\";\nimport { SaveProjectDialog } from \"../SaveProjectDialog/SaveProjectDialog\";\nimport { SaveClassifierDialog } from \"../SaveClassifierDialog/SaveClassifierDialog\";\n\ntype SaveMenuProps = {\n  popupState: any;\n};\n\nexport const SaveMenu = ({ popupState }: SaveMenuProps) => {\n  const {\n    onClose: onSaveProjectDialogClose,\n    onOpen: onSaveProjectDialogOpen,\n    open: openSaveProjectDialog,\n  } = useDialog();\n\n  const {\n    onClose: onSaveClassifierDialogClose,\n    onOpen: onSaveClassifierDialogOpen,\n    open: openSaveClassifierDialog,\n  } = useDialog();\n\n  return (\n    <Menu {...bindMenu(popupState)}>\n      <MenuItem onClick={onSaveProjectDialogOpen}>Save project</MenuItem>\n\n      <MenuItem onClick={onSaveClassifierDialogOpen}>Save classifier</MenuItem>\n\n      <SaveProjectDialog\n        onClose={onSaveProjectDialogClose}\n        open={openSaveProjectDialog}\n        popupState={popupState}\n      />\n\n      <SaveClassifierDialog\n        onClose={onSaveClassifierDialogClose}\n        open={openSaveClassifierDialog}\n        popupState={popupState}\n      />\n    </Menu>\n  );\n};\n","import ListItem from \"@mui/material/ListItem\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport React from \"react\";\nimport { SaveMenu } from \"../SaveMenu\";\nimport PopupState, { bindTrigger } from \"material-ui-popup-state\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\n\nexport const SaveListItem = () => {\n  return (\n    //@ts-ignore\n    <PopupState variant=\"popover\">\n      {(popupState) => (\n        <>\n          <ListItem button {...bindTrigger(popupState)}>\n            <ListItemIcon>\n              <DownloadIcon />\n            </ListItemIcon>\n\n            <ListItemText primary=\"Save\" />\n          </ListItem>\n\n          <SaveMenu popupState={popupState} />\n        </>\n      )}\n    </PopupState>\n  );\n};\n","import React from \"react\";\nimport { OpenListItem } from \"../OpenListItem\";\nimport { SaveListItem } from \"../SaveListItem\";\nimport { List } from \"@mui/material\";\n\nexport const FileList = () => {\n  return (\n    <List dense>\n      <OpenListItem />\n\n      <SaveListItem />\n    </List>\n  );\n};\n","import React from \"react\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Collapse from \"@mui/material/Collapse\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\n\ntype CollapsibleListProps = {\n  children: any;\n  primary: string;\n};\n\nexport const CollapsibleList = ({\n  children,\n  primary,\n}: CollapsibleListProps) => {\n  const [collapsed, setCollapsed] = React.useState(true);\n\n  const onClick = () => {\n    setCollapsed(!collapsed);\n  };\n\n  return (\n    <List dense>\n      <ListItem button dense onClick={onClick}>\n        <ListItemIcon>\n          {collapsed ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        </ListItemIcon>\n\n        <ListItemText primary={primary} />\n      </ListItem>\n\n      <Collapse in={collapsed} timeout=\"auto\" unmountOnExit>\n        <List component=\"div\" dense disablePadding>\n          {children}\n        </List>\n      </Collapse>\n    </List>\n  );\n};\n","import React from \"react\";\nimport { Category } from \"../../types/Category\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deselectImages, updateCategoryVisibility } from \"../../store/slices\";\nimport { visibleImagesSelector } from \"../../store/selectors\";\nimport { Image } from \"../../types/Image\";\nimport { Checkbox, ListItemIcon } from \"@mui/material\";\nimport LabelIcon from \"@mui/icons-material/Label\";\nimport LabelOutlinedIcon from \"@mui/icons-material/LabelOutlined\";\n\ntype CategoryListItemCheckboxProps = {\n  category: Category;\n};\n\nexport const CategoryListItemCheckbox = ({\n  category,\n}: CategoryListItemCheckboxProps) => {\n  const dispatch = useDispatch();\n\n  const images = useSelector(visibleImagesSelector);\n\n  const onChange = () => {\n    const payload = {\n      id: category.id,\n      visible: !category.visible,\n    };\n\n    if (category.visible) {\n      dispatch(\n        deselectImages({\n          ids: images\n            .filter((image: Image) => {\n              return image.categoryId === category.id;\n            })\n            .map((image: Image) => image.id),\n        })\n      );\n    }\n\n    dispatch(updateCategoryVisibility(payload));\n  };\n\n  return (\n    <ListItemIcon>\n      <Checkbox\n        checked={category.visible}\n        checkedIcon={<LabelIcon style={{ color: category.color }} />}\n        disableRipple\n        edge=\"start\"\n        icon={<LabelOutlinedIcon style={{ color: category.color }} />}\n        tabIndex={-1}\n        onChange={onChange}\n      />\n    </ListItemIcon>\n  );\n};\n","import React from \"react\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Typography from \"@mui/material/Typography\";\nimport { Category } from \"../../types/Category\";\nimport { useDispatch } from \"react-redux\";\nimport { updateCategoryVisibility } from \"../../store/slices\";\n\ntype HideOrShowCategoryMenuItemProps = {\n  category: Category;\n  onCloseCategoryMenu: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>\n  ) => void;\n};\n\nexport const HideOrShowCategoryMenuItem = ({\n  category,\n  onCloseCategoryMenu,\n}: HideOrShowCategoryMenuItemProps) => {\n  const dispatch = useDispatch();\n\n  const onClick = (event: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n    onCloseCategoryMenu(event);\n\n    const payload = { id: category.id, visible: !category.visible };\n\n    dispatch(updateCategoryVisibility(payload));\n  };\n\n  return (\n    <MenuItem onClick={onClick}>\n      <Typography variant=\"inherit\">\n        {category.visible ? \"Hide\" : \"Show\"} category\n      </Typography>\n    </MenuItem>\n  );\n};\n","import React from \"react\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Typography from \"@mui/material/Typography\";\nimport { Category } from \"../../types/Category\";\nimport { useDispatch } from \"react-redux\";\nimport { updateOtherCategoryVisibility } from \"../../store/slices\";\n\ntype HideOtherCategoriesMenuItemProps = {\n  category: Category;\n  onCloseCategoryMenu: (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => void;\n};\n\nexport const HideOtherCategoriesMenuItem = ({\n  category,\n  onCloseCategoryMenu,\n}: HideOtherCategoriesMenuItemProps) => {\n  const dispatch = useDispatch();\n\n  const onClick = (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\n    onCloseCategoryMenu(event);\n\n    dispatch(updateOtherCategoryVisibility({ id: category.id }));\n  };\n\n  return (\n    <MenuItem onClick={onClick}>\n      <Typography variant=\"inherit\">Hide other categories</Typography>\n    </MenuItem>\n  );\n};\n","import React from \"react\";\nimport { Category, UNKNOWN_CATEGORY_ID } from \"../../types/Category\";\nimport { HideOrShowCategoryMenuItem } from \"../HideOrShowCategoryMenuItem\";\nimport { HideOtherCategoriesMenuItem } from \"../HideOtherCategoriesMenuItem\";\nimport { Divider, Menu, MenuItem, MenuList, Typography } from \"@mui/material\";\n\ntype CategoryMenuProps = {\n  anchorElCategoryMenu: any;\n  category: Category;\n  onCloseCategoryMenu: (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => void;\n  onOpenCategoryMenu: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  openCategoryMenu: boolean;\n  onOpenDeleteCategoryDialog: () => void;\n  onOpenEditCategoryDialog: () => void;\n};\n\nexport const CategoryMenu = ({\n  anchorElCategoryMenu,\n  category,\n  onCloseCategoryMenu,\n  openCategoryMenu,\n  onOpenDeleteCategoryDialog,\n  onOpenEditCategoryDialog,\n}: CategoryMenuProps) => {\n  const onOpenDeleteCategoryDialogClick = (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => {\n    onOpenDeleteCategoryDialog();\n    onCloseCategoryMenu(event);\n  };\n\n  const onOpenEditCategoryDialogClick = (\n    event: React.MouseEvent<HTMLElement, MouseEvent>\n  ) => {\n    onOpenEditCategoryDialog();\n    onCloseCategoryMenu(event);\n  };\n\n  return (\n    <Menu\n      anchorEl={anchorElCategoryMenu}\n      anchorOrigin={{ horizontal: \"center\", vertical: \"bottom\" }}\n      onClose={onCloseCategoryMenu}\n      open={openCategoryMenu}\n      transformOrigin={{ horizontal: \"center\", vertical: \"top\" }}\n    >\n      <MenuList dense variant=\"menu\">\n        <HideOtherCategoriesMenuItem\n          category={category}\n          onCloseCategoryMenu={onCloseCategoryMenu}\n        />\n\n        <HideOrShowCategoryMenuItem\n          category={category}\n          onCloseCategoryMenu={onCloseCategoryMenu}\n        />\n\n        {category.id !== UNKNOWN_CATEGORY_ID && (\n          <div>\n            <Divider />\n\n            <MenuItem onClick={onOpenEditCategoryDialogClick}>\n              <Typography variant=\"inherit\">Edit category</Typography>\n            </MenuItem>\n\n            <MenuItem onClick={onOpenDeleteCategoryDialogClick}>\n              <Typography variant=\"inherit\">Delete category</Typography>\n            </MenuItem>\n          </div>\n        )}\n      </MenuList>\n    </Menu>\n  );\n};\n","export const COLORS = [\n  \"#000000\",\n  \"#004949\",\n  \"#009292\",\n  \"#ff6db6\",\n  \"#ffb6db\",\n  \"#490092\",\n  \"#006ddb\",\n  \"#b66dff\",\n  \"#6db6ff\",\n  \"#b6dbff\",\n  \"#920000\",\n  \"#924900\",\n  \"#db6d00\",\n  \"#24ff24\",\n  \"#ffff6d\",\n];\n","import { Project } from \"../../types/Project\";\nimport { Category } from \"../../types/Category\";\nimport { COLORS } from \"../../store\";\n\nexport const availableColorsSelector = ({\n  project,\n}: {\n  project: Project;\n}): string[] => {\n  const usedColors = project.categories.map((catagory: Category) => {\n    return catagory.color;\n  });\n  return COLORS.filter((color: string) => !usedColors.includes(color));\n};\n","import * as React from \"react\";\nimport { CirclePicker, ColorResult } from \"react-color\";\nimport { availableColorsSelector } from \"../../store/selectors/availableColorsSelecor\";\nimport { Avatar, IconButton, Popover, Box } from \"@mui/material\";\nimport { Label } from \"@mui/icons-material\";\nimport { useSelector } from \"react-redux\";\n\ntype ColorIconButtonProps = {\n  color: string;\n  onColorChange: (color: any) => void;\n};\n\nexport const ColorIcon = ({ color, onColorChange }: ColorIconButtonProps) => {\n  const availableColors = useSelector(availableColorsSelector);\n\n  const [colorMenuAnchorEl, setColorMenuAnchorEl] =\n    React.useState<null | HTMLButtonElement>(null);\n\n  const colorPopupOpen = Boolean(colorMenuAnchorEl);\n\n  const onOpenColorPicker = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setColorMenuAnchorEl(event.currentTarget);\n  };\n\n  const onCloseColorPicker = () => {\n    setColorMenuAnchorEl(null);\n  };\n\n  const onChange = (color: ColorResult) => {\n    console.info(color);\n    onColorChange(color);\n    onCloseColorPicker();\n  };\n\n  return (\n    <React.Fragment>\n      <IconButton onClick={onOpenColorPicker}>\n        <Avatar sx={{ backgroundColor: \"#F3F3F3\" }}>\n          <Label sx={{ color: color }} />\n        </Avatar>\n      </IconButton>\n      <Popover\n        id=\"color-menu\"\n        open={colorPopupOpen}\n        anchorEl={colorMenuAnchorEl}\n        onClose={onCloseColorPicker}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Box sx={{ margin: \"16px\" }}>\n          <CirclePicker colors={availableColors} onChange={onChange} />\n        </Box>\n      </Popover>\n    </React.Fragment>\n  );\n};\n","import React, { ChangeEvent, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { ColorIcon } from \"../ColorIcon\";\nimport { Category } from \"../../types/Category\";\nimport { updateCategory } from \"../../store/slices\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  TextField,\n} from \"@mui/material\";\n\ntype EditCategoryDialogProps = {\n  category: Category;\n  onCloseDialog: () => void;\n  openDialog: boolean;\n};\n\nexport const EditCategoryDialog = ({\n  category,\n  onCloseDialog,\n  openDialog,\n}: EditCategoryDialogProps) => {\n  const dispatch = useDispatch();\n\n  const [color, setColor] = useState<string>(category.color);\n\n  const onColorChange = (color: any) => {\n    setColor(color.hex);\n  };\n\n  const [name, setName] = useState<string>(category.name);\n\n  const onNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n  };\n\n  const onEdit = () => {\n    dispatch(\n      updateCategory({\n        id: category.id,\n        name: name,\n        color: color,\n      })\n    );\n\n    onCloseDialog();\n  };\n\n  return (\n    <Dialog fullWidth onClose={onCloseDialog} open={openDialog}>\n      <DialogTitle>Edit category</DialogTitle>\n\n      <DialogContent>\n        <div>\n          <Grid container spacing={1}>\n            <Grid item xs={2}>\n              <ColorIcon color={color} onColorChange={onColorChange} />\n            </Grid>\n            <Grid item xs={10}>\n              <TextField\n                autoFocus\n                fullWidth\n                id=\"name\"\n                label=\"Name\"\n                margin=\"dense\"\n                onChange={onNameChange}\n                value={name}\n              />\n            </Grid>\n          </Grid>\n        </div>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onCloseDialog} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onEdit} color=\"primary\">\n          Update\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport Button from \"@mui/material/Button\";\nimport { useDispatch } from \"react-redux\";\nimport { Category } from \"../../types/Category\";\nimport { deleteCategory } from \"../../store/slices\";\n\ntype DeleteCategoryDialogProps = {\n  category: Category;\n  onClose: () => void;\n  open: boolean;\n};\n\nexport const DeleteCategoryDialog = ({\n  category,\n  onClose,\n  open,\n}: DeleteCategoryDialogProps) => {\n  const dispatch = useDispatch();\n\n  const onDelete = () => {\n    dispatch(deleteCategory({ id: category.id }));\n\n    onClose();\n  };\n\n  return (\n    <Dialog fullWidth onClose={onClose} open={open}>\n      <DialogTitle>Delete \"{category.name}\" category?</DialogTitle>\n\n      <DialogContent>\n        Images categorized as \"{category.name}\" will not be deleted.\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onDelete} color=\"primary\">\n          Delete\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React from \"react\";\nimport { Category } from \"../../types/Category\";\nimport { CategoryListItemCheckbox } from \"../CategoryListItemCheckbox\";\nimport { CategoryMenu } from \"../CategoryMenu\";\nimport { useDialog, useMenu } from \"../../hooks\";\nimport { useSelector } from \"react-redux\";\nimport { EditCategoryDialog } from \"../EditCategoryDialog\";\nimport { DeleteCategoryDialog } from \"../DeleteCategoryDialog\";\nimport MoreHorizIcon from \"@mui/icons-material/MoreHoriz\";\nimport { State } from \"../../types/State\";\nimport { Image } from \"../../types/Image\";\nimport {\n  Chip,\n  IconButton,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n} from \"@mui/material\";\n\ntype CategoryListItemProps = {\n  category: Category;\n  id: string;\n};\n\nexport const CategoryListItem = ({ category, id }: CategoryListItemProps) => {\n  const {\n    onClose: onCloseDeleteCategoryDialog,\n    onOpen: onOpenDeleteCategoryDialog,\n    open: openDeleteCategoryDialog,\n  } = useDialog();\n  const {\n    onClose: onCloseEditCategoryDialog,\n    onOpen: onOpenEditCategoryDialog,\n    open: openEditCategoryDialog,\n  } = useDialog();\n\n  const {\n    anchorEl: anchorElCategoryMenu,\n    onClose: onCloseCategoryMenu,\n    onOpen: onOpenCategoryMenu,\n    open: openCategoryMenu,\n  } = useMenu();\n\n  const imageCount = useSelector((state: State) => {\n    return state.project.images.filter((image: Image) => {\n      return image.categoryId === category.id;\n    }).length;\n  });\n\n  return (\n    <React.Fragment>\n      <ListItem dense key={id} id={id}>\n        <CategoryListItemCheckbox category={category} />\n\n        <ListItemText\n          id={id}\n          primary={category.name}\n          primaryTypographyProps={{ noWrap: true }}\n        />\n\n        <Chip\n          label={imageCount}\n          size=\"small\"\n          // className={classes.chip}\n          sx={{\n            height: \"20px\",\n            borderWidth: \"2px\",\n            fontSize: \"0.875rem\",\n            color: \"white\",\n            backgroundColor: category.color,\n          }}\n        />\n\n        <ListItemSecondaryAction>\n          <IconButton edge=\"end\" onClick={onOpenCategoryMenu}>\n            <MoreHorizIcon />\n          </IconButton>\n        </ListItemSecondaryAction>\n      </ListItem>\n\n      <CategoryMenu\n        anchorElCategoryMenu={anchorElCategoryMenu}\n        category={category}\n        onCloseCategoryMenu={onCloseCategoryMenu}\n        onOpenCategoryMenu={onOpenCategoryMenu}\n        onOpenDeleteCategoryDialog={onOpenDeleteCategoryDialog}\n        onOpenEditCategoryDialog={onOpenEditCategoryDialog}\n        openCategoryMenu={openCategoryMenu}\n      />\n\n      <DeleteCategoryDialog\n        category={category}\n        onClose={onCloseDeleteCategoryDialog}\n        open={openDeleteCategoryDialog}\n      />\n\n      <EditCategoryDialog\n        category={category}\n        onCloseDialog={onCloseEditCategoryDialog}\n        openDialog={openEditCategoryDialog}\n      />\n    </React.Fragment>\n  );\n};\n","import React, { ChangeEvent, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { ColorIcon } from \"../ColorIcon\";\nimport { ColorResult } from \"react-color\";\nimport { sample } from \"lodash\";\nimport { createCategory } from \"../../store/slices\";\nimport { availableColorsSelector } from \"../../store/selectors/availableColorsSelecor\";\nimport { categoriesSelector } from \"../../store/selectors/categoriesSelector\";\nimport { Category } from \"../../types/Category\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Grid,\n  TextField,\n  Box,\n} from \"@mui/material\";\n\ntype CreateCategoryDialogProps = {\n  onClose: () => void;\n  open: boolean;\n};\n\nexport const CreateCategoryDialog = ({\n  onClose,\n  open,\n}: CreateCategoryDialogProps) => {\n  const dispatch = useDispatch();\n\n  const availableColors = useSelector(availableColorsSelector);\n  const usedCategoryNames = useSelector(categoriesSelector).map(\n    (category: Category) => category.name\n  );\n\n  const [color, setColor] = React.useState<string>(sample(availableColors)!);\n  const [name, setName] = useState<string>(\"\");\n  const [errorHelperText, setErrorHelperText] = useState<string>(\"\");\n  const [invalidName, setInvalidName] = useState<boolean>(false);\n\n  const onCloseDialog = () => {\n    setErrorHelperText(\"\");\n    setName(\"\");\n    setInvalidName(false);\n    setColor(sample(availableColors)!);\n\n    onClose();\n  };\n\n  const onCreate = () => {\n    if (validateInput(name)) {\n      dispatch(createCategory({ name: name, color: color }));\n\n      onCloseDialog();\n    }\n  };\n\n  const onColorChange = (color: ColorResult) => {\n    setColor(color.hex);\n  };\n\n  const onNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n\n    validateInput(event.target.value);\n  };\n\n  const validateInput = (categoryName: string) => {\n    let validInput = true;\n    let helperText = \"\";\n\n    if (categoryName === \"\") {\n      helperText = \"Please type a category name.\";\n      validInput = false;\n    } else if (usedCategoryNames.includes(categoryName)) {\n      helperText =\n        \"Category names must be unique. A category with this name already exits.\";\n      validInput = false;\n    }\n\n    setErrorHelperText(helperText);\n    setInvalidName(!validInput);\n    return validInput;\n  };\n\n  return (\n    <Dialog fullWidth maxWidth=\"xs\" onClose={onClose} open={open}>\n      <DialogTitle>Create category</DialogTitle>\n\n      <DialogContent sx={{ paddingLeft: \"0 !important\" }}>\n        <Box sx={{ margin: (theme) => theme.spacing(1) }}>\n          <Grid container spacing={1}>\n            <Grid item xs={2}>\n              <ColorIcon color={color} onColorChange={onColorChange} />\n            </Grid>\n            <Grid item xs={10}>\n              <TextField\n                error={invalidName}\n                autoFocus\n                fullWidth\n                id=\"name\"\n                label=\"Name\"\n                margin=\"dense\"\n                onChange={onNameChange}\n                helperText={errorHelperText}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onCloseDialog} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onCreate} color=\"primary\">\n          Create\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React from \"react\";\nimport { CreateCategoryDialog } from \"../CreateCategoryDialog\";\nimport { useDialog } from \"../../hooks\";\nimport { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport AddIcon from \"@mui/icons-material/Add\";\n\nexport const CreateCategoryListItem = () => {\n  const { onClose, onOpen, open } = useDialog();\n\n  return (\n    <>\n      <ListItem button onClick={onOpen}>\n        <ListItemIcon>\n          <AddIcon />\n        </ListItemIcon>\n\n        <ListItemText primary=\"Create category\" />\n      </ListItem>\n\n      <CreateCategoryDialog onClose={onClose} open={open} />\n    </>\n  );\n};\n","import { CollapsibleList } from \"../CollapsibleList\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { CategoryListItem } from \"../CategoryListItem\";\nimport { Category } from \"../../types/Category\";\nimport { CreateCategoryListItem } from \"../CreateCategoryListItem\";\nimport {\n  createdCategoriesSelector,\n  unknownCategorySelector,\n} from \"../../store/selectors\";\n\nexport const CategoriesList = () => {\n  const categories = useSelector(createdCategoriesSelector);\n  const unknownCategory = useSelector(unknownCategorySelector);\n\n  return (\n    <CollapsibleList primary=\"Categories\">\n      {categories.map((category: Category) => {\n        return (\n          <CategoryListItem\n            category={category}\n            key={category.id}\n            id={category.id}\n          />\n        );\n      })}\n      <CategoryListItem\n        category={unknownCategory}\n        key={unknownCategory.id}\n        id={unknownCategory.id}\n      />\n      <CreateCategoryListItem />\n    </CollapsibleList>\n  );\n};\n","import { Classifier } from \"../../types/Classifier\";\n\nexport const trainingFlagSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): boolean => {\n  return classifier.fitting;\n};\n","import * as React from \"react\";\nimport { AppBar, Box, IconButton, Toolbar, Tooltip } from \"@mui/material\";\nimport { ArrowBack, PlayCircleOutline, Stop } from \"@mui/icons-material\";\nimport { compiledSelector } from \"../../../store/selectors\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { classifierSlice } from \"../../../store/slices\";\nimport { trainingFlagSelector } from \"../../../store/selectors/trainingFlagSelector\";\n\nexport const FitClassifierDialogAppBar = (props: any) => {\n  const { closeDialog, fit, disableFitting } = props;\n\n  const dispatch = useDispatch();\n\n  const compiled = useSelector(compiledSelector);\n  const training = useSelector(trainingFlagSelector);\n\n  const onStopFitting = () => {\n    if (!compiled) return;\n    compiled.stopTraining = true;\n    dispatch(classifierSlice.actions.updateCompiled({ compiled: compiled }));\n  };\n\n  return (\n    <AppBar\n      sx={{\n        position: \"relative\",\n        backgroundColor: \"transparent\",\n        boxShadow: \"none\",\n        borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n      }}\n    >\n      <Toolbar>\n        <Tooltip title=\"Close Dialog\" placement=\"bottom\">\n          <IconButton\n            edge=\"start\"\n            color=\"primary\"\n            onClick={closeDialog}\n            aria-label=\"Close\"\n            href={\"\"}\n          >\n            <ArrowBack />\n          </IconButton>\n        </Tooltip>\n\n        <Box sx={{ flexGrow: 1 }} />\n\n        <Tooltip\n          title={\n            disableFitting\n              ? \"Plaese label images before fitting a model.\"\n              : \"Fit the model\"\n          }\n          placement=\"bottom\"\n        >\n          <span>\n            <IconButton onClick={fit} href={\"\"} disabled={disableFitting}>\n              <PlayCircleOutline />\n            </IconButton>\n          </span>\n        </Tooltip>\n\n        <Tooltip title=\"Stop fitting the model\" placement=\"bottom\">\n          <span>\n            <IconButton onClick={onStopFitting} href={\"\"} disabled={!training}>\n              <Stop />\n            </IconButton>\n          </span>\n        </Tooltip>\n      </Toolbar>\n    </AppBar>\n  );\n};\n","import { styled } from \"@mui/material/styles\";\nimport FormControl, { FormControlProps } from \"@mui/material/FormControl\";\n\n// type StyledFormControlProps = FormControlProps & { component: string };\n\nexport const StyledFormControl = styled(FormControl)<FormControlProps>(\n  ({ theme }) => ({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    margin: theme.spacing(1),\n    width: \"100%\",\n    minWidth: 120,\n  })\n);\n","import { Classifier } from \"../../types/Classifier\";\n\nexport const learningRateSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): number => {\n  return classifier.learningRate;\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { OptimizationAlgorithm } from \"../../types/OptimizationAlgorithm\";\n\nexport const optimizationAlgorithmSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): OptimizationAlgorithm => {\n  return classifier.optimizationAlgorithm;\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { LossFunction } from \"../../types/LossFunction\";\n\nexport const lossFunctionSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}):\n  | LossFunction\n  | Array<LossFunction>\n  | { [outputName: string]: LossFunction } => {\n  return classifier.lossFunction;\n};\n","import { TextField } from \"@mui/material\";\nimport * as React from \"react\";\n\nconst intRegExpr = new RegExp(\"^[0-9]+$\");\nconst floatRegExpr = new RegExp(\"^[0-9]+(.[0-9]*)?$\");\n\ntype CustomNumberTextFieldProps = {\n  id: string;\n  label: string;\n  value: number;\n  dispatchCallBack: (arg: number) => void;\n  min?: number;\n  max?: number;\n  enableFloat?: boolean;\n  disabled?: boolean;\n};\n\n/**\n * @param {string} id\n * @param {string} label\n * @param {number} value\n * @param {(arg: number) => void} dispatchCallBack callback to dispatch the selected value to the store\n * @param {number} [min=Number.MIN_SAFE_INTEGER]\n * @param {number} [max=Number.MIN_SAFE_INTEGER]\n * @param {boolean} [enableFloat=false] allow floating point values\n * @param {boolean} [disabled=false] disable the input field\n * @returns\n */\nexport const CustomNumberTextField = ({\n  id,\n  label,\n  value,\n  dispatchCallBack,\n  min = Number.MIN_SAFE_INTEGER,\n  max = Number.MAX_SAFE_INTEGER,\n  enableFloat = false,\n  disabled = false,\n}: CustomNumberTextFieldProps) => {\n  const [valueString, setValueString] = React.useState<string>(\n    value.toString()\n  );\n\n  const regExp = enableFloat ? floatRegExpr : intRegExpr;\n\n  const onInputChange = (event: React.FormEvent<EventTarget>) => {\n    const target = event.target as HTMLInputElement;\n    const inputString = target.value;\n\n    if (!regExp.test(target.value)) {\n      return;\n    }\n\n    const arg = Number(inputString);\n\n    if (isNaN(arg) || arg < min || arg > max) {\n      return;\n    }\n\n    setValueString(inputString);\n    dispatchCallBack(arg);\n  };\n\n  return (\n    <TextField\n      id={id}\n      label={label}\n      sx={(theme) => ({\n        marginRight: theme.spacing(1),\n        flexBasis: 300,\n        marginTop: theme.spacing(2.75),\n        width: \"100%\",\n      })}\n      value={valueString}\n      onChange={onInputChange}\n      type=\"text\"\n      margin=\"normal\"\n      autoComplete=\"off\"\n      disabled={disabled}\n    />\n  );\n};\n","import {\n  FormHelperText,\n  Grid,\n  MenuItem,\n  Select,\n  SelectChangeEvent,\n} from \"@mui/material\";\nimport { StyledFormControl } from \"../../StyledFormControl\";\nimport * as React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { classifierSlice } from \"../../../../store/slices\";\nimport { LossFunction } from \"../../../../types/LossFunction\";\nimport { fitOptionsSelector } from \"../../../../store/selectors\";\nimport { learningRateSelector } from \"../../../../store/selectors/learningRateSelector\";\nimport { OptimizationAlgorithm } from \"../../../../types/OptimizationAlgorithm\";\nimport { optimizationAlgorithmSelector } from \"../../../../store/selectors/optimizationAlgorithmSelector\";\nimport { lossFunctionSelector } from \"../../../../store/selectors/lossFunctionSelector\";\nimport { CustomNumberTextField } from \"../../../CustomNumberTextField/CustomNumberTextField\";\n\nconst enumKeys = <O extends object, K extends keyof O = keyof O>(\n  obj: O\n): K[] => {\n  return Object.keys(obj).filter((k) => Number.isNaN(+k)) as K[];\n};\n\nexport const OptimizerSettingsGrid = () => {\n  const dispatch = useDispatch();\n\n  const fitOptions = useSelector(fitOptionsSelector);\n  const optimizationAlgorithm = useSelector(optimizationAlgorithmSelector);\n  const lossFunction = useSelector(lossFunctionSelector);\n  const learningRate = useSelector(learningRateSelector);\n\n  const dispatchBatchSize = (batchSize: number) => {\n    dispatch(classifierSlice.actions.updateBatchSize({ batchSize: batchSize }));\n  };\n\n  const dispatchLearningRate = (learningRate: number) => {\n    dispatch(\n      classifierSlice.actions.updateLearningRate({ learningRate: learningRate })\n    );\n  };\n\n  const dispatchEpochs = (arg: number) => {\n    dispatch(classifierSlice.actions.updateEpochs({ epochs: arg }));\n  };\n\n  const onOptimizationAlgorithmChange = (event: SelectChangeEvent) => {\n    const target = event.target as HTMLInputElement; //target.value is string\n    const optimizationAlgorithm = target.value as OptimizationAlgorithm;\n\n    dispatch(\n      classifierSlice.actions.updateOptimizationAlgorithm({\n        optimizationAlgorithm: optimizationAlgorithm,\n      })\n    );\n  };\n\n  const onLossFunctionChange = (event: SelectChangeEvent) => {\n    const target = event.target as HTMLInputElement; //target.value is string\n    const lossFunction = target.value as LossFunction;\n\n    dispatch(\n      classifierSlice.actions.updateLossFunction({\n        lossFunction: lossFunction,\n      })\n    );\n  };\n\n  return (\n    <>\n      <StyledFormControl>\n        <Grid container spacing={2}>\n          <Grid item xs={4}>\n            <FormHelperText>Optimization Algorithm</FormHelperText>\n            <Select\n              value={optimizationAlgorithm as string}\n              onChange={onOptimizationAlgorithmChange}\n              displayEmpty\n              inputProps={{ \"aria-label\": \"Without label\" }}\n              sx={(theme) => ({\n                flexBasis: 300,\n                width: \"100%\",\n                marginRight: theme.spacing(1),\n                marginTop: theme.spacing(0),\n              })}\n            >\n              {enumKeys(OptimizationAlgorithm).map((k) => {\n                return (\n                  <MenuItem key={k} value={OptimizationAlgorithm[k]}>\n                    {OptimizationAlgorithm[k]}\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </Grid>\n        </Grid>\n        <Grid container spacing={2}>\n          <Grid item xs={4}>\n            <CustomNumberTextField\n              id=\"learning-rate\"\n              label=\"Learning rate\"\n              value={learningRate}\n              dispatchCallBack={dispatchLearningRate}\n              min={0}\n              enableFloat={true}\n            />\n          </Grid>\n        </Grid>\n      </StyledFormControl>\n      <StyledFormControl>\n        <Grid container spacing={2}>\n          <Grid item xs={4}>\n            <FormHelperText>Loss Function</FormHelperText>\n            <Select\n              value={lossFunction as string} //TODO #130 fix so that multiple lossFunctions are shown, if we do have multiple loss functions\n              onChange={onLossFunctionChange}\n              displayEmpty\n              inputProps={{ \"aria-label\": \"Without label\" }}\n              sx={(theme) => ({\n                flexBasis: 300,\n                width: \"100%\",\n                marginRight: theme.spacing(1),\n                marginTop: theme.spacing(0),\n              })}\n            >\n              {enumKeys(LossFunction).map((k) => {\n                return (\n                  <MenuItem key={k} value={LossFunction[k]}>\n                    {LossFunction[k]}\n                  </MenuItem>\n                );\n              })}\n            </Select>\n          </Grid>\n        </Grid>\n        <Grid container direction={\"row\"} spacing={2}>\n          <Grid item xs={2}>\n            <CustomNumberTextField\n              id=\"batch-size\"\n              label=\"Batch size\"\n              value={fitOptions.batchSize}\n              dispatchCallBack={dispatchBatchSize}\n              min={1}\n            />\n          </Grid>\n\n          <Grid item xs={2}>\n            <CustomNumberTextField\n              id=\"epochs\"\n              label=\"Epochs\"\n              value={fitOptions.epochs}\n              dispatchCallBack={dispatchEpochs}\n              min={1}\n            />\n          </Grid>\n        </Grid>\n      </StyledFormControl>\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport { OptimizerSettingsGrid } from \"./OptimizerSettingsGrid/OptimizerSettingsGrid\";\nimport { Collapse, ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\n\nexport const OptimizerSettingsListItem = () => {\n  const [collapsedClassifierSettingsList, setCollapsedClassifierSettingsList] =\n    useState<boolean>(false);\n\n  const onClasssifierSettingsListClick = () => {\n    setCollapsedClassifierSettingsList(!collapsedClassifierSettingsList);\n  };\n\n  return (\n    <>\n      <ListItem\n        button\n        onClick={onClasssifierSettingsListClick}\n        style={{ padding: \"12px 0px\" }}\n      >\n        <ListItemIcon>\n          {collapsedClassifierSettingsList ? (\n            <ExpandLessIcon />\n          ) : (\n            <ExpandMoreIcon />\n          )}\n        </ListItemIcon>\n\n        <ListItemText\n          primary=\"Optimization Settings\"\n          style={{ fontSize: \"20px\" }}\n        />\n      </ListItem>\n      <Collapse\n        in={collapsedClassifierSettingsList}\n        timeout=\"auto\"\n        unmountOnExit\n      >\n        <OptimizerSettingsGrid />\n      </Collapse>\n    </>\n  );\n};\n","import { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { trainingPercentageSelector } from \"../../../store/selectors\";\nimport { classifierSlice } from \"../../../store/slices\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport {\n  Collapse,\n  Grid,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography,\n} from \"@mui/material\";\nimport { CustomNumberTextField } from \"../../CustomNumberTextField/CustomNumberTextField\";\n\nexport const DatasetSettingsListItem = () => {\n  const dispatch = useDispatch();\n\n  const [collapsedDatasetSettingsList, setCollapsedDatasetSettingsList] =\n    useState<boolean>(false);\n\n  const onDatasetSettingsListClick = () => {\n    setCollapsedDatasetSettingsList(!collapsedDatasetSettingsList);\n  };\n\n  const trainingPercentage = useSelector(trainingPercentageSelector);\n\n  const dispatchTrainingPercentage = (trainPercentage: number) => {\n    dispatch(\n      classifierSlice.actions.updateTrainingPercentage({\n        trainingPercentage: trainPercentage,\n      })\n    );\n  };\n\n  return (\n    <>\n      <ListItem\n        button\n        onClick={onDatasetSettingsListClick}\n        style={{ padding: \"12px 0px\" }}\n      >\n        <ListItemIcon>\n          {collapsedDatasetSettingsList ? (\n            <ExpandLessIcon />\n          ) : (\n            <ExpandMoreIcon />\n          )}\n        </ListItemIcon>\n\n        <ListItemText primary=\"Dataset Settings\" style={{ fontSize: \"1em\" }} />\n      </ListItem>\n      <Collapse in={collapsedDatasetSettingsList} timeout=\"auto\" unmountOnExit>\n        <div style={{ padding: \"12px 0px\", width: \"300\" }}>\n          <Typography id=\"range-slider\" gutterBottom>\n            What fraction of the labeled images should be used for training?\n            (The rest is used for validation)\n          </Typography>\n          <Grid item xs={2}>\n            <CustomNumberTextField\n              id=\"test-split\"\n              label=\"Train percentage\"\n              value={trainingPercentage}\n              dispatchCallBack={dispatchTrainingPercentage}\n              min={0}\n              max={1}\n              enableFloat={true}\n            />\n          </Grid>\n        </div>\n      </Collapse>\n    </>\n  );\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { ArchitectureOptions } from \"../../types/ArchitectureOptions\";\n\nexport const architectureOptionsSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): ArchitectureOptions => {\n  return {\n    inputShape: classifier.inputShape,\n    selectedModel: classifier.selectedModel,\n  };\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { Shape } from \"../../types/Shape\";\n\nexport const inputShapeSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): Shape => {\n  return classifier.inputShape;\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { ClassifierModelProps } from \"../../types/ClassifierModelType\";\n\nexport const uploadedModelSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): ClassifierModelProps | undefined => {\n  return classifier.userUploadedModel;\n};\n","import { Grid, TextField, Alert } from \"@mui/material\";\nimport { StyledFormControl } from \"../../StyledFormControl\";\nimport Autocomplete from \"@mui/material/Autocomplete\";\nimport * as React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { classifierSlice } from \"../../../../store/slices\";\nimport { architectureOptionsSelector } from \"../../../../store/selectors/architectureOptionsSelector\";\nimport { inputShapeSelector } from \"../../../../store/selectors/inputShapeSelector\";\nimport {\n  availableModels,\n  ClassifierModelProps,\n} from \"../../../../types/ClassifierModelType\";\nimport { SyntheticEvent } from \"react\";\nimport { uploadedModelSelector } from \"../../../../store/selectors/uploadedModelSelector\";\nimport { CustomNumberTextField } from \"../../../CustomNumberTextField/CustomNumberTextField\";\n\nexport const ArchitectureSettingsGrid = () => {\n  const architectureOptions = useSelector(architectureOptionsSelector);\n  const userUploadedModel = useSelector(uploadedModelSelector);\n  const inputShape = useSelector(inputShapeSelector);\n\n  const [selectedModel, setSelectedModel] =\n    React.useState<ClassifierModelProps>(architectureOptions.selectedModel);\n\n  const [fixedNumberOfChannels, setFixedNumberOfChannels] =\n    React.useState<boolean>(false);\n  const [fixedNumberOfChannelsHelperText, setFixedNumberOfChannelsHelperText] =\n    React.useState<string>(\"\");\n\n  const dispatch = useDispatch();\n\n  const modelOptions: ClassifierModelProps[] = availableModels.slice();\n\n  if (userUploadedModel) {\n    modelOptions.push(userUploadedModel);\n  }\n\n  React.useEffect(() => {\n    if (selectedModel.requiredChannels) {\n      setFixedNumberOfChannels(true);\n      setFixedNumberOfChannelsHelperText(\n        `${selectedModel.modelName} requires ${selectedModel.requiredChannels} channels!`\n      );\n    } else {\n      setFixedNumberOfChannels(false);\n      setFixedNumberOfChannelsHelperText(\"\");\n    }\n  }, [selectedModel]);\n\n  const onSelectedModelChange = (\n    event: SyntheticEvent<Element, Event>,\n    value: ClassifierModelProps | null\n  ) => {\n    const selectedModel = value as ClassifierModelProps;\n    setSelectedModel(selectedModel);\n\n    // if the selected model requires a specific number of input channels, dispatch that number to the store\n    if (selectedModel.requiredChannels) {\n      dispatch(\n        classifierSlice.actions.updateInputShape({\n          inputShape: {\n            ...inputShape,\n            channels: selectedModel.requiredChannels,\n          },\n        })\n      );\n    }\n\n    dispatch(\n      classifierSlice.actions.updateSelectedModel({ model: selectedModel })\n    );\n  };\n\n  const dispatchRows = (height: number) => {\n    dispatch(\n      classifierSlice.actions.updateInputShape({\n        inputShape: { ...inputShape, height: height },\n      })\n    );\n  };\n\n  const dispatchCols = (cols: number) => {\n    dispatch(\n      classifierSlice.actions.updateInputShape({\n        inputShape: { ...inputShape, width: cols },\n      })\n    );\n  };\n\n  const dispatchChannels = (channels: number) => {\n    dispatch(\n      classifierSlice.actions.updateInputShape({\n        inputShape: { ...inputShape, channels: channels },\n      })\n    );\n  };\n\n  return (\n    <StyledFormControl>\n      <Grid container spacing={2}>\n        <Grid item xs={2}>\n          <Autocomplete\n            disableClearable={true}\n            options={modelOptions}\n            onChange={onSelectedModelChange}\n            getOptionLabel={(option: ClassifierModelProps) => option.modelName}\n            sx={{ width: 300 }}\n            renderInput={(params) => (\n              <TextField\n                {...params}\n                autoComplete=\"off\"\n                label=\"Model architecture\"\n              />\n            )}\n            value={selectedModel}\n          />\n        </Grid>\n      </Grid>\n      <Grid container direction={\"row\"} spacing={2}>\n        <Grid item xs={1}>\n          <CustomNumberTextField\n            id=\"shape-rows\"\n            label=\"Input rows\"\n            value={inputShape.height}\n            dispatchCallBack={dispatchRows}\n            min={1}\n          />\n        </Grid>\n        <Grid item xs={1}>\n          <CustomNumberTextField\n            id=\"shape-cols\"\n            label=\"Input cols\"\n            value={inputShape.width}\n            dispatchCallBack={dispatchCols}\n            min={1}\n          />\n        </Grid>\n        <Grid item xs={1}>\n          <CustomNumberTextField\n            id=\"shape-channels\"\n            label=\"Input channels\"\n            value={inputShape.channels}\n            dispatchCallBack={dispatchChannels}\n            min={1}\n            disabled={fixedNumberOfChannels}\n          />\n        </Grid>\n      </Grid>\n\n      <Grid container spacing={1}>\n        <Grid item xs={3} marginTop={1}>\n          {fixedNumberOfChannels ? (\n            <Alert severity=\"info\">{fixedNumberOfChannelsHelperText}</Alert>\n          ) : (\n            <></>\n          )}\n        </Grid>\n      </Grid>\n    </StyledFormControl>\n  );\n};\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport { ArchitectureSettingsGrid } from \"./ArchitectureSettingsGrid/ArchitectureSettingsGrid\";\nimport {\n  Collapse,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  styled,\n} from \"@mui/material\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\n\nexport const ArchitectureSettingsListItem = () => {\n  const [collapsedClassifierSettingsList, setCollapsedClassifierSettingsList] =\n    useState<boolean>(false);\n\n  const onClasssifierSettingsListClick = () => {\n    setCollapsedClassifierSettingsList(!collapsedClassifierSettingsList);\n  };\n\n  const StyledForm = styled(\"form\")({\n    // width: '100%',\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  });\n\n  return (\n    <>\n      <ListItem\n        button\n        onClick={onClasssifierSettingsListClick}\n        style={{ padding: \"12px 0px\" }}\n      >\n        <ListItemIcon>\n          {collapsedClassifierSettingsList ? (\n            <ExpandLessIcon />\n          ) : (\n            <ExpandMoreIcon />\n          )}\n        </ListItemIcon>\n\n        <ListItemText\n          primary=\"Architecture Settings\"\n          style={{ fontSize: \"20px\" }}\n        />\n      </ListItem>\n      <Collapse\n        in={collapsedClassifierSettingsList}\n        timeout=\"auto\"\n        unmountOnExit\n      >\n        <StyledForm noValidate autoComplete=\"off\">\n          <ArchitectureSettingsGrid />\n        </StyledForm>\n      </Collapse>\n    </>\n  );\n};\n","import { Classifier } from \"../../types/Classifier\";\nimport { RescaleOptions } from \"../../types/RescaleOptions\";\n\nexport const rescaleOptionsSelector = ({\n  classifier,\n}: {\n  classifier: Classifier;\n}): RescaleOptions => {\n  return classifier.rescaleOptions;\n};\n","import * as React from \"react\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  TextField,\n  styled,\n} from \"@mui/material\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { classifierSlice } from \"../../store/slices\";\nimport { rescaleOptionsSelector } from \"../../store/selectors/rescaleOptionsSelector\";\n\nexport const RescalingForm = () => {\n  const rescaleOptions = useSelector(rescaleOptionsSelector);\n  const dispatch = useDispatch();\n\n  const [disabled, setDisabled] = React.useState<boolean>(\n    !rescaleOptions.rescale\n  );\n\n  const onCheckboxChange = () => {\n    setDisabled(!disabled);\n    dispatch(\n      classifierSlice.actions.updateRescaleOptions({\n        rescaleOptions: { ...rescaleOptions, rescale: !rescaleOptions.rescale },\n      })\n    );\n  };\n\n  const onMaxChange = (event: React.FormEvent<EventTarget>) => {\n    const target = event.target as HTMLInputElement;\n    var value = Number(target.value);\n    if (!value) return;\n    dispatch(\n      classifierSlice.actions.updateRescaleOptions({\n        rescaleOptions: {\n          ...rescaleOptions,\n          rescaleMinMax: { ...rescaleOptions.rescaleMinMax, max: value },\n        },\n      })\n    );\n  };\n\n  const onMinChange = (event: React.FormEvent<EventTarget>) => {\n    const target = event.target as HTMLInputElement;\n    var value = Number(target.value);\n    if (!value) return;\n    dispatch(\n      classifierSlice.actions.updateRescaleOptions({\n        rescaleOptions: {\n          ...rescaleOptions,\n          rescaleMinMax: { ...rescaleOptions.rescaleMinMax, min: value },\n        },\n      })\n    );\n  };\n\n  const StyledForm = styled(\"form\")({\n    // width: '100%',\n    display: \"flex\",\n    flexWrap: \"wrap\",\n  });\n\n  const StyledTextField = styled(TextField)(({ theme }) => ({\n    // marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    flexBasis: 300,\n    width: \"100%\",\n  }));\n\n  return (\n    <StyledForm noValidate autoComplete=\"off\">\n      <Grid container spacing={2}>\n        <Grid item xs={2}>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={rescaleOptions.rescale}\n                onChange={onCheckboxChange}\n                name=\"rescale\"\n                color=\"primary\"\n              />\n            }\n            label=\"Rescale pixels?\"\n          />\n        </Grid>\n        <Grid item xs={2}>\n          <StyledTextField\n            id=\"minimum\"\n            label=\"Minimum pixel value\"\n            disabled={disabled}\n            value={rescaleOptions.rescaleMinMax.min}\n            onChange={onMinChange}\n            type=\"number\"\n            margin=\"normal\"\n            defaultValue=\"0\"\n          />\n        </Grid>\n\n        <Grid item xs={2}>\n          <StyledTextField\n            id=\"maximum\"\n            label=\"Maximum pixel value\"\n            disabled={disabled}\n            value={rescaleOptions.rescaleMinMax.max}\n            onChange={onMaxChange}\n            margin=\"normal\"\n            type=\"number\"\n            defaultValue=\"100\"\n          />\n        </Grid>\n      </Grid>\n    </StyledForm>\n  );\n};\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport {\n  Button,\n  Checkbox,\n  Collapse,\n  FormControlLabel,\n  FormGroup,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n  Typography,\n} from \"@mui/material\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { RescalingForm } from \"../RescalingForm/RescalingForm\";\n\ntype PreprocessingSettingsListItemProps = {\n  closeDialog: () => void;\n  openedDialog: boolean;\n};\n\nexport const PreprocessingSettingsListItem = ({\n  closeDialog,\n  openedDialog,\n}: PreprocessingSettingsListItemProps) => {\n  const [collapsedPreprocessingList, setCollapsedPreprocessingList] =\n    useState<boolean>(false);\n\n  const onPreprocessingListClick = () => {\n    // shows or hides preprocessing list in interface\n    setCollapsedPreprocessingList(!collapsedPreprocessingList);\n  };\n\n  // // Preprocessing clicks\n  // const [paddingOption1, setPaddingOption1] = React.useState<boolean>(false);\n  // const onPaddingOption1Click = () => {\n  //   setPaddingOption1(!paddingOption1);\n  // };\n  //\n  // const [paddingOption2, setPaddingOption2] = React.useState<boolean>(false);\n  // const onpaddingOption2Click = () => {\n  //   setPaddingOption2(!paddingOption2);\n  // };\n\n  // Skeleton\n  // const onPreprocessingClick = async (\n  //   lowerPercentile: number,\n  //   upperPercentile: number,\n  //   labeledData: ImageType[]\n  // ) => {\n  //   //does actual preprocessing upon clicking button\n  //\n  //   const rescaledSet = await rescaleData(\n  //     lowerPercentile,\n  //     upperPercentile,\n  //     labeledData\n  //   );\n  //   const resizedSet = await resizeData(\n  //     paddingOption1,\n  //     paddingOption2,\n  //     labeledData\n  //   );\n  //   const augmentedSet = await augmentData(dataAugmentation, labeledData);\n  // };\n  //\n  // const [dataAugmentation, setDataAugmentation] =\n  //   React.useState<boolean>(false);\n  // const onDataAugmentationClick = () => {\n  //   setDataAugmentation(!dataAugmentation);\n  // };\n\n  return (\n    <>\n      <ListItem\n        disabled\n        button\n        onClick={onPreprocessingListClick}\n        style={{ padding: \"12px 0px\" }}\n      >\n        <ListItemIcon>\n          {collapsedPreprocessingList ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        </ListItemIcon>\n\n        <ListItemText primary=\"Preprocessing\" style={{ fontSize: \"1em\" }} />\n      </ListItem>\n      <Collapse in={collapsedPreprocessingList} timeout=\"auto\" unmountOnExit>\n        <Typography id=\"rescaling\" gutterBottom>\n          Pixel Intensity Rescaling\n        </Typography>\n\n        <RescalingForm />\n\n        <Typography id=\"augmentation\" gutterBottom>\n          Data Augmentation\n        </Typography>\n\n        <FormGroup row>\n          <FormControlLabel\n            control={\n              // @ts-ignore\n              <Checkbox value=\"randomDataAugmentation\" />\n            }\n            label=\"Random Data Augmentation\"\n          ></FormControlLabel>\n        </FormGroup>\n\n        <Typography id=\"resizing\" gutterBottom>\n          Resizing\n        </Typography>\n\n        <FormGroup row>\n          <FormControlLabel\n            // @ts-ignore\n            control={<Checkbox value=\"paddingOption1\" />}\n            label=\"Padding Option 1\"\n          ></FormControlLabel>\n        </FormGroup>\n\n        <FormGroup row>\n          <FormControlLabel\n            // @ts-ignore\n            control={<Checkbox value=\"paddingOption2\" />}\n            label=\"Padding Option 2\"\n          ></FormControlLabel>\n        </FormGroup>\n        <Tooltip title=\"Apply Preprocessing Settings\" placement=\"bottom\">\n          <div>\n            <Button variant=\"contained\" color=\"primary\" onClick={() => {}}>\n              Apply preprocessing\n            </Button>\n          </div>\n        </Tooltip>\n      </Collapse>\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { TransitionProps } from \"@mui/material/transitions\";\nimport { Slide } from \"@mui/material\";\n\nexport const DialogTransition = React.forwardRef<unknown, TransitionProps>(\n  function Transition(props: any, ref: any) {\n    return <Slide direction=\"right\" ref={ref} {...props} />;\n  }\n);\n","import * as React from \"react\";\nimport { FitClassifierDialogAppBar } from \"../FitClassifierDialogAppBar\";\nimport { OptimizerSettingsListItem } from \"../OptimizerSettingsListItem/OptimizerSettingsListItem\";\nimport { DatasetSettingsListItem } from \"../DatasetSettingsListItem/DatasetSettingsListItem\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { classifierSlice, projectSlice } from \"../../../store/slices\";\nimport { Alert, Dialog, DialogContent, List } from \"@mui/material\";\nimport { ArchitectureSettingsListItem } from \"../ArchitectureSettingsListItem\";\nimport { PreprocessingSettingsListItem } from \"../../PreprocessingSettingsListItem/PreprocessingSettingsListItem\";\nimport { DialogTransition } from \"../../DialogTransition\";\nimport {\n  categorizedImagesSelector,\n  trainingPercentageSelector,\n} from \"../../../store/selectors\";\nimport { Image } from \"../../../types/Image\";\nimport * as _ from \"lodash\";\nimport { Partition } from \"../../../types/Partition\";\nimport { useEffect, useState } from \"react\";\n\ntype FitClassifierDialogProps = {\n  closeDialog: () => void;\n  openedDialog: boolean;\n  openedDrawer: boolean;\n};\n\nexport const FitClassifierDialog = (props: FitClassifierDialogProps) => {\n  const { closeDialog, openedDialog, openedDrawer } = props;\n\n  const [noCategorizedImagesAlert, setNoCategorizedImagesAlert] =\n    useState<boolean>(false);\n  const [showWarning, setShowWarning] = useState<boolean>(true);\n\n  const trainingPercentage = useSelector(trainingPercentageSelector);\n  const categorizedImages = useSelector(categorizedImagesSelector);\n\n  useEffect(() => {\n    setNoCategorizedImagesAlert(categorizedImages.length === 0);\n  }, [categorizedImages]);\n\n  const dispatch = useDispatch();\n\n  const onFit = async () => {\n    //first assign train and val partition to all categorized images\n    const categorizedImagesIds = _.shuffle(categorizedImages).map(\n      (image: Image) => {\n        return image.id;\n      }\n    );\n\n    //separate ids into train and val datasets\n    const trainDataLength = Math.round(\n      trainingPercentage * categorizedImagesIds.length\n    );\n    const valDataLength = categorizedImagesIds.length - trainDataLength;\n\n    const trainDataIds = _.take(categorizedImagesIds, trainDataLength);\n    const valDataIds = _.takeRight(categorizedImagesIds, valDataLength);\n\n    dispatch(\n      projectSlice.actions.updateImagesPartition({\n        ids: trainDataIds,\n        partition: Partition.Training,\n      })\n    );\n    dispatch(\n      projectSlice.actions.updateImagesPartition({\n        ids: valDataIds,\n        partition: Partition.Validation,\n      })\n    );\n\n    dispatch(\n      classifierSlice.actions.fit({\n        onEpochEnd: (epoch: number, logs: any) => {\n          console.info(logs);\n          console.info(epoch + \":\" + logs.loss);\n        },\n      })\n    );\n  };\n\n  // specifies interface\n  return (\n    // @ts-ignore\n    <Dialog\n      disableEscapeKeyDown\n      fullScreen\n      onClose={closeDialog}\n      open={openedDialog}\n      TransitionComponent={DialogTransition}\n      style={{ zIndex: 1203 }}\n    >\n      <FitClassifierDialogAppBar\n        closeDialog={closeDialog}\n        fit={onFit}\n        openedDrawer={openedDrawer}\n        disableFitting={noCategorizedImagesAlert}\n      />\n\n      {noCategorizedImagesAlert && showWarning ? (\n        <Alert\n          onClose={() => {\n            setShowWarning(false);\n          }}\n          severity=\"info\"\n        >\n          {\"Please label images to train a model.\"}\n        </Alert>\n      ) : (\n        <></>\n      )}\n\n      <DialogContent>\n        <List dense>\n          <PreprocessingSettingsListItem\n            closeDialog={closeDialog}\n            openedDialog={openedDialog}\n          />\n\n          <ArchitectureSettingsListItem />\n\n          <OptimizerSettingsListItem />\n\n          <DatasetSettingsListItem />\n        </List>\n        <div id={\"tfvis-container\"} />\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import ListItem from \"@mui/material/ListItem\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ScatterPlotIcon from \"@mui/icons-material/ScatterPlot\";\nimport React from \"react\";\nimport { useDialog } from \"../../hooks\";\nimport { FitClassifierDialog } from \"../FitClassifierDialog/FitClassifierDialog\";\nimport { IconButton } from \"@mui/material\";\nimport SettingsIcon from \"@mui/icons-material/Settings\";\n\nexport const FitClassifierListItem = () => {\n  const { onClose, onOpen, open } = useDialog();\n\n  const onFitClick = () => {\n    onOpen();\n  };\n\n  return (\n    <>\n      <ListItem onClick={() => {}}>\n        <ListItemIcon>\n          <ScatterPlotIcon />\n        </ListItemIcon>\n\n        <ListItemText primary=\"Fit\" />\n        <IconButton edge=\"end\" onClick={onFitClick}>\n          <SettingsIcon />\n        </IconButton>\n      </ListItem>\n      <FitClassifierDialog\n        openedDialog={open}\n        openedDrawer={true}\n        closeDialog={onClose}\n      />\n    </>\n  );\n};\n","import React from \"react\";\nimport { ListItem, Tooltip } from \"@mui/material\";\n\ntype DisabledClassifierListItemProps = {\n  disabled: boolean;\n  helperText: string;\n  children?: React.ReactNode;\n};\n\nexport const DisabledClassifierListItem = ({\n  disabled,\n  helperText,\n  children,\n}: DisabledClassifierListItemProps) => {\n  return (\n    <Tooltip\n      // can't use \"sx\" prop directly to access tooltip\n      // see: https://github.com/mui-org/material-ui/issues/28679\n      componentsProps={{\n        tooltip: {\n          sx: { backgroundColor: \"#565656\", fontSize: \"0.85rem\" },\n        },\n        arrow: { sx: { color: \"#565656\" } },\n      }}\n      title={disabled ? helperText : \"\"}\n      placement=\"right\"\n      arrow\n    >\n      <ListItem disabled={disabled}>{children}</ListItem>\n    </Tooltip>\n  );\n};\n","import { IconButton, ListItemIcon, ListItemText } from \"@mui/material\";\nimport KeyboardArrowRightIcon from \"@mui/icons-material/KeyboardArrowRight\";\nimport AssessmentIcon from \"@mui/icons-material/Assessment\";\nimport { DisabledClassifierListItem } from \"./DisabledClassifierListItem\";\n\ntype EvaluateClassifierListItemProps = {\n  disabled: boolean;\n  helperText: string;\n};\n\nexport const EvaluateClassifierListItem = (\n  props: EvaluateClassifierListItemProps\n) => {\n  const onEvaluateClick = () => {\n    alert(\"Not yet implemented\");\n  };\n\n  return (\n    <DisabledClassifierListItem {...props}>\n      <ListItemIcon>\n        <AssessmentIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Evaluate\" />\n      <IconButton\n        onClick={onEvaluateClick}\n        edge=\"end\"\n        disabled={props.disabled}\n      >\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </DisabledClassifierListItem>\n  );\n};\n","import { ListItemIcon, ListItemText } from \"@mui/material\";\nimport LabelImportantIcon from \"@mui/icons-material/LabelImportant\";\nimport IconButton from \"@mui/material/IconButton\";\nimport KeyboardArrowRightIcon from \"@mui/icons-material/KeyboardArrowRight\";\nimport { useDispatch } from \"react-redux\";\nimport { classifierSlice } from \"../../store/slices\";\nimport { DisabledClassifierListItem } from \"./DisabledClassifierListItem\";\n\ntype PredictClassifierListItemProps = {\n  disabled: boolean;\n  helperText: string;\n};\n\nexport const PredictClassifierListItem = (\n  props: PredictClassifierListItemProps\n) => {\n  const dispatch = useDispatch();\n\n  const onPredict = async () => {\n    dispatch(classifierSlice.actions.predict({}));\n  };\n\n  return (\n    <DisabledClassifierListItem {...props}>\n      <ListItemIcon>\n        <LabelImportantIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Predict\" />\n      <IconButton onClick={onPredict} edge=\"end\" disabled={props.disabled}>\n        <KeyboardArrowRightIcon />\n      </IconButton>\n    </DisabledClassifierListItem>\n  );\n};\n","import React, { useEffect } from \"react\";\nimport {\n  FitClassifierListItem,\n  PredictClassifierListItem,\n  EvaluateClassifierListItem,\n} from \"../ClassifierListItems\";\nimport {\n  Collapse,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from \"@mui/material\";\nimport ExpandLessIcon from \"@mui/icons-material/ExpandLess\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { useSelector } from \"react-redux\";\nimport { fittedSelector } from \"../../store/selectors/fittedSelector\";\nimport { trainingFlagSelector } from \"../../store/selectors/trainingFlagSelector\";\n\nexport const ClassifierList = () => {\n  const [collapsed, setCollapsed] = React.useState(false);\n\n  const [disabled, setDisabled] = React.useState<boolean>(true);\n  const [helperText, setHelperText] = React.useState<string>(\n    \"disabled: no trained model\"\n  );\n\n  const fitted = useSelector(fittedSelector);\n  const training = useSelector(trainingFlagSelector);\n\n  useEffect(() => {\n    if (training) {\n      setDisabled(true);\n      setHelperText(\"disabled during training.\");\n    } else {\n    }\n  }, [training]);\n\n  useEffect(() => {\n    if (fitted) {\n      setDisabled(false);\n    }\n  }, [fitted]);\n\n  const onCollapseClick = () => {\n    setCollapsed(!collapsed);\n  };\n\n  return (\n    <List dense>\n      <ListItem button dense onClick={onCollapseClick}>\n        <ListItemIcon>\n          {collapsed ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n        </ListItemIcon>\n\n        <ListItemText primary=\"Classifier\" />\n      </ListItem>\n\n      <Collapse in={collapsed} timeout=\"auto\" unmountOnExit>\n        <List component=\"div\" dense disablePadding>\n          <FitClassifierListItem />\n\n          <PredictClassifierListItem\n            disabled={disabled}\n            helperText={helperText}\n          />\n\n          <EvaluateClassifierListItem\n            disabled={disabled}\n            helperText={helperText}\n          />\n        </List>\n      </Collapse>\n    </List>\n  );\n};\n","import { styled } from \"@mui/material\";\n\n/*\nThis styled component is mostly for addressing fixed placement of AppBar components\nsee: https://mui.com/components/app-bar/#fixed-placement\n*/\n\nexport const AppBarOffset = styled(\"div\")(({ theme }) => theme.mixins.toolbar);\n","import { Settings } from \"../../types/Settings\";\nimport { ThemeMode } from \"types/ThemeMode\";\n\nexport const themeModeSelector = ({\n  settings,\n}: {\n  settings: Settings;\n}): ThemeMode => {\n  return settings.themeMode;\n};\n","export default __webpack_public_path__ + \"static/media/Sun.81cb4cfc.svg\";","export default __webpack_public_path__ + \"static/media/Moon.593035e9.svg\";","import React from \"react\";\nimport Dialog from \"@mui/material/Dialog\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Typography from \"@mui/material/Typography\";\nimport IconButton from \"@mui/material/IconButton\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport {\n  Container,\n  DialogContent,\n  FormControlLabel,\n  FormGroup,\n  Switch,\n} from \"@mui/material\";\nimport { styled } from \"@mui/material/styles\";\nimport { AppBarOffset } from \"components/styled/AppBarOffset\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { themeModeSelector } from \"store/selectors/themeModeSelector\";\nimport { setThemeMode } from \"store/slices\";\nimport { ThemeMode } from \"types/ThemeMode\";\nimport Sun from \"icons/Sun.svg\";\nimport Moon from \"icons/Moon.svg\";\n\ntype SettingsDialogProps = {\n  onClose: () => void;\n  open: boolean;\n};\n\nexport const SettingsDialog = ({ onClose, open }: SettingsDialogProps) => {\n  const dispatch = useDispatch();\n  const themeMode = useSelector(themeModeSelector);\n\n  const onToggle = (mode: ThemeMode) => {\n    dispatch(setThemeMode({ mode }));\n  };\n\n  return (\n    <Dialog fullScreen onClose={onClose} open={open}>\n      <AppBar\n        sx={{\n          borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n          boxShadow: \"none\",\n        }}\n        color=\"inherit\"\n        position=\"fixed\"\n      >\n        <Toolbar>\n          <Typography sx={{ flexGrow: 1 }} variant=\"h6\">\n            Settings\n          </Typography>\n\n          <IconButton onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n\n      <AppBarOffset />\n\n      <DialogContent sx={{ marginTop: (theme) => theme.spacing(2) }}>\n        <Container maxWidth=\"md\">\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <MaterialUISwitch\n                  checked={themeMode === ThemeMode.Dark}\n                  onChange={() =>\n                    onToggle(\n                      themeMode === ThemeMode.Dark\n                        ? ThemeMode.Light\n                        : ThemeMode.Dark\n                    )\n                  }\n                />\n              }\n              label={\n                <Typography variant=\"h6\">\n                  {themeMode === ThemeMode.Dark ? \"Dark Mode\" : \"Light Mode\"}\n                </Typography>\n              }\n            />\n          </FormGroup>\n        </Container>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\n// source: https://mui.com/components/switches/\nconst MaterialUISwitch = styled(Switch)(({ theme }) => ({\n  width: 62,\n  height: 34,\n  padding: 7,\n  \"& .MuiSwitch-switchBase\": {\n    margin: 1,\n    padding: 0,\n    transform: \"translateX(6px)\",\n    \"&.Mui-checked\": {\n      color: \"#fff\",\n      transform: \"translateX(22px)\",\n      \"& .MuiSwitch-thumb:before\": {\n        backgroundImage: `url(${Moon})`,\n      },\n      \"& + .MuiSwitch-track\": {\n        opacity: 1,\n        backgroundColor: theme.palette.mode === \"dark\" ? \"#8796A5\" : \"#aab4be\",\n      },\n    },\n  },\n  \"& .MuiSwitch-thumb\": {\n    backgroundColor: theme.palette.mode === \"dark\" ? \"#003892\" : \"#001e3c\",\n    width: 32,\n    height: 32,\n    \"&:before\": {\n      content: \"''\",\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      left: 0,\n      top: 0,\n      backgroundRepeat: \"no-repeat\",\n      backgroundPosition: \"center\",\n      backgroundImage: `url(${Sun})`,\n    },\n  },\n  \"& .MuiSwitch-track\": {\n    opacity: 1,\n    backgroundColor: theme.palette.mode === \"dark\" ? \"#8796A5\" : \"#aab4be\",\n    borderRadius: 20 / 2,\n  },\n}));\n","import React from \"react\";\nimport { SettingsDialog } from \"../SettingsDialog\";\nimport { useDialog } from \"../../hooks\";\nimport { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport SettingsIcon from \"@mui/icons-material/Settings\";\n\nexport const SettingsListItem = () => {\n  const { onClose, onOpen, open } = useDialog();\n\n  return (\n    <>\n      <ListItem button onClick={onOpen}>\n        <ListItemIcon>\n          <SettingsIcon />\n        </ListItemIcon>\n\n        <ListItemText primary=\"Settings\" />\n      </ListItem>\n\n      <SettingsDialog onClose={onClose} open={open} />\n    </>\n  );\n};\n","import { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport React from \"react\";\nimport HelpIcon from \"@mui/icons-material/Help\";\n\nexport const HelpListItem = () => {\n  return (\n    <ListItem button disabled>\n      <ListItemIcon>\n        <HelpIcon />\n      </ListItemIcon>\n\n      <ListItemText primary=\"Help\" />\n    </ListItem>\n  );\n};\n","import React from \"react\";\nimport { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport FeedbackIcon from \"@mui/icons-material/Feedback\";\n\nexport const SendFeedbackListItem = () => {\n  return (\n    <ListItem button disabled>\n      <ListItemIcon>\n        <FeedbackIcon />\n      </ListItemIcon>\n\n      <ListItemText primary=\"Send feedback\" />\n    </ListItem>\n  );\n};\n","import React from \"react\";\nimport { SettingsListItem } from \"../SettingsListItem\";\nimport { HelpListItem } from \"../HelpListItem\";\nimport { SendFeedbackListItem } from \"../SendFeedbackListItem\";\nimport { List } from \"@mui/material\";\n\nexport const ApplicationList = () => {\n  return (\n    <List dense>\n      <SettingsListItem />\n\n      <SendFeedbackListItem />\n\n      <HelpListItem />\n    </List>\n  );\n};\n","import { FileList } from \"../FileList\";\nimport { CategoriesList } from \"../CategoriesList\";\nimport { ClassifierList } from \"../ClassifierList\";\nimport { ApplicationList } from \"../ApplicationList\";\nimport React from \"react\";\nimport { Divider, Drawer } from \"@mui/material\";\nimport { AppBarOffset } from \"components/styled/AppBarOffset\";\n\nexport const ApplicationDrawer = () => {\n  return (\n    <Drawer\n      anchor=\"left\"\n      sx={{\n        flexShrink: 0,\n        width: (theme) => theme.spacing(32),\n        \"& > \t.MuiDrawer-paper\": {\n          zIndex: 0,\n          width: (theme) => theme.spacing(32),\n        },\n      }}\n      open\n      variant=\"persistent\"\n    >\n      <AppBarOffset />\n\n      <FileList />\n\n      <Divider />\n\n      <CategoriesList />\n\n      <Divider />\n\n      <ClassifierList />\n      {/*<SegmenterList />*/}\n\n      <Divider />\n\n      <ApplicationList />\n    </Drawer>\n  );\n};\n","import { Settings } from \"../../types/Settings\";\n\nexport const tileSizeSelector = ({\n  settings,\n}: {\n  settings: Settings;\n}): number => {\n  return settings.tileSize;\n};\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Category } from \"../../types/Category\";\nimport { categoriesSelector } from \"../../store/selectors\";\nimport { applicationSlice, updateImageCategories } from \"../../store/slices\";\nimport { Menu, MenuItem, MenuList } from \"@mui/material\";\nimport LabelIcon from \"@mui/icons-material/Label\";\n\ntype ImageCategoryMenuProps = {\n  anchorEl: HTMLElement;\n  imageIds: Array<string>;\n  onClose: () => void;\n};\n\nexport const ImageCategoryMenu = ({\n  anchorEl,\n  imageIds,\n  onClose,\n}: ImageCategoryMenuProps) => {\n  const categories = useSelector(categoriesSelector);\n\n  const dispatch = useDispatch();\n\n  const onClick = (\n    event: React.MouseEvent<HTMLLIElement>,\n    categoryId: string\n  ) => {\n    onClose();\n\n    dispatch(updateImageCategories({ ids: imageIds, categoryId: categoryId }));\n    dispatch(applicationSlice.actions.clearSelectedImages());\n  };\n\n  return (\n    <Menu\n      anchorOrigin={{\n        horizontal: \"center\",\n        vertical: \"bottom\",\n      }}\n      transformOrigin={{\n        horizontal: \"center\",\n        vertical: \"top\",\n      }}\n      anchorEl={anchorEl}\n      open={Boolean(anchorEl)}\n      onClose={onClose}\n    >\n      <MenuList dense variant=\"menu\">\n        {categories.map((category: Category) => (\n          <MenuItem\n            key={category.id}\n            onClick={(event: any) => onClick(event, category.id)}\n          >\n            <LabelIcon style={{ color: category.color, paddingRight: \"8px\" }} />\n            {category.name}\n          </MenuItem>\n        ))}\n      </MenuList>\n    </Menu>\n  );\n};\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n} from \"@mui/material\";\nimport React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { applicationSlice, projectSlice } from \"../../store/slices\";\n\ntype DeleteImagesDialogProps = {\n  imageIds: Array<string>;\n  onClose: () => void;\n  open: boolean;\n};\n\nexport const DeleteImagesDialog = ({\n  imageIds,\n  onClose,\n  open,\n}: DeleteImagesDialogProps) => {\n  const dispatch = useDispatch();\n\n  const onDelete = () => {\n    dispatch(projectSlice.actions.deleteImages({ ids: imageIds }));\n    dispatch(applicationSlice.actions.clearSelectedImages());\n    onClose();\n  };\n\n  return (\n    <Dialog fullWidth onClose={onClose} open={open}>\n      <DialogTitle>\n        Delete {imageIds.length} image{imageIds.length > 1 && \"s\"}?\n      </DialogTitle>\n\n      <DialogContent>Images will be deleted from the project.</DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} color=\"primary\">\n          Cancel\n        </Button>\n\n        <Button onClick={onDelete} color=\"primary\">\n          Delete\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React from \"react\";\n// import { useNavigate } from \"react-router-dom\";\nimport { batch, useDispatch, useSelector } from \"react-redux\";\nimport { ImageCategoryMenu } from \"../ImageCategoryMenu\";\nimport {\n  selectedImagesSelector,\n  visibleImagesSelector,\n} from \"../../store/selectors\";\nimport {\n  applicationSlice,\n  imageViewerSlice,\n  setActiveImage,\n  setSelectedAnnotations,\n} from \"../../store/slices\";\nimport { useDialog } from \"../../hooks\";\nimport { DeleteImagesDialog } from \"../DeleteImagesDialog\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport {\n  AppBar,\n  Chip,\n  IconButton,\n  Slide,\n  Toolbar,\n  Tooltip,\n  Typography,\n  Box,\n} from \"@mui/material\";\nimport ViewComfyIcon from \"@mui/icons-material/ViewComfy\";\nimport GestureIcon from \"@mui/icons-material/Gesture\";\nimport LabelOutlinedIcon from \"@mui/icons-material/LabelOutlined\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport { Image } from \"../../types/Image\";\nimport { Partition } from \"../../types/Partition\";\n\nexport const ImageGridAppBar = () => {\n  const dispatch = useDispatch();\n\n  // const navigate = useNavigate();\n\n  const images = useSelector(visibleImagesSelector);\n\n  const selectedImages: Array<string> = useSelector(selectedImagesSelector);\n\n  const [categoryMenuAnchorEl, setCategoryMenuAnchorEl] =\n    React.useState<null | HTMLElement>(null);\n\n  const { onClose, onOpen, open } = useDialog();\n\n  const onOpenCategoriesMenu = (event: React.MouseEvent<HTMLDivElement>) => {\n    setCategoryMenuAnchorEl(event.currentTarget);\n  };\n\n  const onCloseCategoryMenu = () => {\n    setCategoryMenuAnchorEl(null);\n  };\n\n  const onOpenAnnotatorDialog = (event: React.MouseEvent<HTMLDivElement>) => {\n    const selected = selectedImages.map((id: string, idx: number) => {\n      const projectImage = images.find((image: Image) => {\n        return image.id === id;\n      });\n\n      const annotatorImage: Image = {\n        categoryId: projectImage!.categoryId,\n        id: projectImage!.id,\n        annotations: projectImage!.annotations,\n        name: projectImage!.name,\n        partition: Partition.Inference,\n        shape: projectImage!.shape,\n        originalSrc: projectImage!.originalSrc,\n        src: projectImage!.src,\n      };\n\n      if (idx === 0) {\n        batch(() => {\n          dispatch(\n            setActiveImage({\n              image: annotatorImage.id,\n            })\n          );\n          dispatch(\n            setSelectedAnnotations({\n              selectedAnnotations: [],\n              selectedAnnotation: undefined,\n            })\n          );\n        });\n      }\n\n      return annotatorImage;\n    });\n\n    if (!selected) return;\n\n    dispatch(imageViewerSlice.actions.setImages({ images: selected }));\n    // navigate(\"/annotator\");\n  };\n\n  const selectAllImages = () => {\n    const newSelected = images.map((image) => image.id);\n    dispatch(applicationSlice.actions.selectAllImages({ ids: newSelected }));\n  };\n\n  const selectNoImages = () => {\n    dispatch(applicationSlice.actions.clearSelectedImages());\n  };\n\n  return (\n    <>\n      <Slide appear={false} direction=\"down\" in={selectedImages.length > 0}>\n        <AppBar color=\"inherit\" position=\"fixed\">\n          <Toolbar>\n            <IconButton\n              sx={{ marginRight: (theme) => theme.spacing(2) }}\n              edge=\"start\"\n              color=\"inherit\"\n              onClick={selectNoImages}\n            >\n              <ClearIcon />\n            </IconButton>\n\n            <Typography sx={{ flexGrow: 1 }}>\n              {selectedImages.length} selected images\n            </Typography>\n\n            <Box sx={{ flexGrow: 1 }} />\n\n            <Chip\n              avatar={<LabelOutlinedIcon color=\"inherit\" />}\n              label=\"Categorise\"\n              onClick={onOpenCategoriesMenu}\n              variant=\"outlined\"\n              style={{ marginRight: 15 }}\n            />\n            <Chip\n              avatar={<GestureIcon color=\"inherit\" />}\n              label=\"Annotate\"\n              onClick={onOpenAnnotatorDialog}\n              variant=\"outlined\"\n            />\n\n            <IconButton color=\"inherit\" onClick={selectAllImages}>\n              <ViewComfyIcon />\n            </IconButton>\n\n            <Tooltip title=\"Delete\">\n              <IconButton color=\"inherit\" onClick={onOpen}>\n                <DeleteIcon />\n              </IconButton>\n            </Tooltip>\n          </Toolbar>\n        </AppBar>\n      </Slide>\n\n      <ImageCategoryMenu\n        anchorEl={categoryMenuAnchorEl as HTMLElement}\n        imageIds={selectedImages}\n        onClose={onCloseCategoryMenu}\n      />\n\n      <DeleteImagesDialog\n        imageIds={selectedImages}\n        onClose={onClose}\n        open={open}\n      />\n    </>\n  );\n};\n","import { Tooltip } from \"@mui/material\";\nimport LabelImportantIcon from \"@mui/icons-material/LabelImportant\";\nimport LabelIcon from \"@mui/icons-material/Label\";\nimport { useSelector } from \"react-redux\";\nimport { Category, UNKNOWN_CATEGORY_ID } from \"../../types/Category\";\nimport { Image } from \"../../types/Image\";\nimport { Partition } from \"../../types/Partition\";\nimport { categoriesSelector } from \"../../store/selectors/categoriesSelector\";\n\ntype ImageIconLabelProps = {\n  image: Image;\n};\n\nexport const ImageIconLabel = ({ image }: ImageIconLabelProps) => {\n  const categories = useSelector(categoriesSelector);\n\n  const { color: categoryColor, name: categoryName } = categories.find(\n    (category: Category) => {\n      return category.id === image.categoryId;\n    }\n  ) ?? { color: \"undefined\", name: \"undefined\" };\n\n  const actionIconStyle = {\n    color: categoryColor,\n    marginLeft: \"8px\",\n    marginTop: \"8px\",\n  };\n\n  const predictedLabel =\n    image.partition === Partition.Inference &&\n    image.categoryId !== UNKNOWN_CATEGORY_ID;\n\n  return (\n    <Tooltip\n      title={categoryName}\n      placement=\"right\"\n      arrow\n      // can't use \"sx\" prop directly to access tooltip\n      // see: https://github.com/mui-org/material-ui/issues/28679\n      componentsProps={{\n        tooltip: {\n          sx: {\n            borderRadius: 2,\n            backgroundColor: categoryColor,\n          },\n        },\n        arrow: {\n          sx: {\n            color: categoryColor,\n          },\n        },\n      }}\n    >\n      {predictedLabel ? (\n        <LabelImportantIcon sx={actionIconStyle} />\n      ) : (\n        <LabelIcon sx={actionIconStyle} />\n      )}\n    </Tooltip>\n  );\n};\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { Image } from \"../../types/Image\";\nimport {\n  selectedImagesSelector,\n  visibleImagesSelector,\n} from \"../../store/selectors\";\nimport { tileSizeSelector } from \"../../store/selectors/tileSizeSelector\";\nimport { applicationSlice } from \"../../store/slices\";\nimport { ImageGridAppBar } from \"../ImageGridAppBar\";\nimport {\n  Container,\n  ImageList,\n  ImageListItem,\n  ImageListItemBar,\n  Box,\n} from \"@mui/material\";\nimport { DropTargetMonitor, useDrop } from \"react-dnd\";\nimport { NativeTypes } from \"react-dnd-html5-backend\";\nimport { ImageIconLabel } from \"./ImageIconLabel\";\n\ntype ImageGridProps = {\n  onDrop: (item: { files: any[] }) => void;\n};\n\nexport const ImageGrid = ({ onDrop }: ImageGridProps) => {\n  const dispatch = useDispatch();\n\n  const images = useSelector(visibleImagesSelector);\n\n  const selectedImages: Array<string> = useSelector(selectedImagesSelector);\n\n  const max_images = 1000; //number of images from the project that we'll show\n\n  const [{ isOver }, drop] = useDrop(\n    () => ({\n      accept: [NativeTypes.FILE],\n      drop(item: { files: any[] }) {\n        if (onDrop) {\n          onDrop(item);\n        }\n      },\n      collect: (monitor: DropTargetMonitor) => ({\n        isOver: monitor.isOver(),\n        canDrop: monitor.canDrop(),\n      }),\n    }),\n    []\n  );\n\n  const onSelectImage = (image: Image) => {\n    if (selectedImages.includes(image.id)) {\n      dispatch(applicationSlice.actions.deselectImage({ id: image.id }));\n    } else {\n      dispatch(applicationSlice.actions.selectImage({ id: image.id }));\n    }\n  };\n\n  const scaleFactor = useSelector(tileSizeSelector);\n\n  const getSize = (scaleFactor: number) => {\n    const width = (220 * scaleFactor).toString() + \"px\";\n    const height = (220 * scaleFactor).toString() + \"px\";\n\n    return {\n      width: width,\n      height: height,\n      margin: \"2px\",\n    };\n  };\n\n  const getSelectionStatus = (imageId: string) => {\n    return selectedImages.includes(imageId)\n      ? { border: \"solid 2px blue\", borderRadius: \"3px\" }\n      : { border: \"none\" };\n  };\n\n  return (\n    <Box\n      component=\"main\"\n      ref={drop}\n      sx={(theme) => ({\n        flexGrow: 1,\n        height: \"100%\",\n        paddingTop: theme.spacing(3),\n        marginLeft: theme.spacing(32),\n        transition: theme.transitions.create(\"margin\", {\n          duration: theme.transitions.duration.enteringScreen,\n          easing: theme.transitions.easing.easeOut,\n        }),\n      })}\n      style={{\n        border: isOver ? \"5px solid blue\" : \"\",\n      }}\n    >\n      <Container\n        sx={(theme) => ({\n          paddingBottom: theme.spacing(8),\n          paddingTop: theme.spacing(8),\n          height: \"100%\",\n        })}\n        maxWidth={false}\n      >\n        <ImageList\n          sx={{ transform: \"translateZ(0)\", height: \"100%\" }}\n          cols={Math.floor(6 / scaleFactor)}\n          rowHeight={\"auto\"}\n        >\n          {images.slice(0, max_images).map((image: Image) => (\n            <ImageListItem\n              key={image.id}\n              onClick={() => onSelectImage(image)}\n              style={getSize(scaleFactor)}\n              sx={getSelectionStatus(image.id)}\n            >\n              <Box\n                component=\"img\"\n                alt=\"\"\n                src={image.src}\n                sx={{\n                  width: \"100%\",\n                  height: \"100%\",\n                  objectFit: \"contain\",\n                  top: 0,\n                  transform: \"none\",\n                }}\n              />\n\n              <ImageListItemBar\n                position=\"top\"\n                actionIcon={<ImageIconLabel image={image} />}\n                actionPosition=\"left\"\n                sx={{\n                  background: \"transparent\",\n                }}\n              />\n            </ImageListItem>\n          ))}\n        </ImageList>\n\n        <ImageGridAppBar />\n      </Container>\n    </Box>\n  );\n};\n","import { styled } from \"@mui/material/styles\";\nimport MenuItem, { MenuItemProps } from \"@mui/material/MenuItem\";\n\ntype StyledMenuItemProps = MenuItemProps & { component: string };\n\nexport const StyledMenuItem = styled(MenuItem)<StyledMenuItemProps>(() => ({\n  maxWidth: 320,\n}));\n","import React from \"react\";\nimport useDropboxChooser from \"use-dropbox-chooser\";\nimport { ListItemIcon, ListItemText } from \"@mui/material\";\nimport ComputerIcon from \"@mui/icons-material/Computer\";\nimport { StyledMenuItem } from \"./StyledMenuItem\";\n\ntype DropboxMenuItemProps = {\n  onClose: (event: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n};\n\nexport const DropboxMenuItem = ({ onClose }: DropboxMenuItemProps) => {\n  // const dispatch = useDispatch();\n\n  const { open } = useDropboxChooser({\n    appKey: \"tetle78x244mpkz\",\n    chooserOptions: { multiselect: true, linkType: \"direct\" },\n    onSelected: (items: readonly Dropbox.ChooserFile[]) => {\n      //onClose();\n\n      items.forEach((item: Dropbox.ChooserFile) => {\n        //dispatch(createImage({ src: item.link as string }));\n      });\n    },\n  });\n\n  return (\n    <StyledMenuItem component=\"span\" dense onClick={open}>\n      <ListItemIcon>\n        <ComputerIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Dropbox\" />\n    </StyledMenuItem>\n  );\n};\n","import React from \"react\";\nimport { Menu } from \"@mui/material\";\nimport Fade from \"@mui/material/Fade\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport ComputerIcon from \"@mui/icons-material/Computer\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport ListSubheader from \"@mui/material/ListSubheader\";\nimport { useDispatch } from \"react-redux\";\nimport { createImage } from \"../../store/slices\";\nimport { DropboxMenuItem } from \"./DropboxMenuItem\";\nimport { convertFileToImage } from \"../../image/imageHelper\";\nimport { StyledMenuItem } from \"./StyledMenuItem\";\n\ntype UploadMenuProps = {\n  anchorEl: HTMLElement | null;\n  onClose: (event: any) => void;\n  open: boolean;\n};\n\nexport const UploadMenu = ({ anchorEl, onClose }: UploadMenuProps) => {\n  const dispatch = useDispatch();\n\n  const onUploadFromComputerChange = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    onClose(event);\n    event.persist();\n\n    if (!event.currentTarget.files) return;\n\n    const files = event.currentTarget.files;\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n\n      const image = await convertFileToImage(file);\n\n      //if length of images is > 1, then the user selected a z-stack --> only show center image\n      dispatch(createImage({ image: image }));\n    }\n  };\n\n  return (\n    <>\n      <input\n        accept=\"image/*\"\n        hidden\n        type=\"file\"\n        multiple\n        id=\"upload-images\"\n        onChange={onUploadFromComputerChange}\n      />\n      <Menu\n        PaperProps={{ style: { width: 320 } }}\n        TransitionComponent={Fade}\n        anchorEl={anchorEl}\n        anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n        onClose={onClose}\n        open={Boolean(anchorEl)}\n        transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n      >\n        <ListSubheader\n          sx={{\n            color: \"#80868b\",\n            margin: \"16px\",\n            letterSpacing: \".07272727em\",\n            fontSize: \".6875rem\",\n            fontWeight: 500,\n            lineHeight: \"1rem\",\n            textTransform: \"uppercase\",\n            maxWidth: 320,\n          }}\n        >\n          Upload from\n        </ListSubheader>\n\n        <label htmlFor=\"upload-images\">\n          <StyledMenuItem component=\"span\" dense onClick={onClose}>\n            <ListItemIcon>\n              <ComputerIcon />\n            </ListItemIcon>\n            <ListItemText primary=\"Computer\" />\n          </StyledMenuItem>\n        </label>\n\n        <DropboxMenuItem onClose={onClose} />\n      </Menu>\n    </>\n  );\n};\n","import React from \"react\";\nimport { useMenu } from \"../../hooks\";\nimport { UploadMenu } from \"../UploadMenu\";\nimport { Button, Tooltip } from \"@mui/material\";\nimport CloudUploadIcon from \"@mui/icons-material/CloudUpload\";\n\nexport const UploadButton = () => {\n  const { anchorEl, onClose, onOpen, open } = useMenu();\n\n  return (\n    <>\n      <Tooltip title=\"Open image\">\n        <Button\n          sx={{\n            margin: (theme) => theme.spacing(1),\n            textTransform: \"none\",\n          }}\n          onClick={onOpen}\n          startIcon={<CloudUploadIcon />}\n        >\n          Open image\n        </Button>\n      </Tooltip>\n\n      <UploadMenu anchorEl={anchorEl} onClose={onClose} open={open} />\n    </>\n  );\n};\n","import React from \"react\";\nimport { Typography } from \"@mui/material\";\n\nexport const Logo = () => {\n  return (\n    <Typography\n      sx={(theme) => ({\n        display: \"none\",\n        [theme.breakpoints.up(\"sm\")]: {\n          display: \"block\",\n        },\n      })}\n      color=\"inherit\"\n      noWrap\n      variant=\"h6\"\n    >\n      Piximi\n    </Typography>\n  );\n};\n","import React from \"react\";\nimport { UploadButton } from \"../UploadButton\";\nimport { Logo } from \"../Logo\";\nimport { applicationSlice } from \"../../store/slices\";\nimport { useDispatch } from \"react-redux\";\nimport { Slider, Toolbar, Box } from \"@mui/material\";\nimport ZoomOutIcon from \"@mui/icons-material/ZoomOut\";\nimport ZoomInIcon from \"@mui/icons-material/ZoomIn\";\n\nexport const ApplicationToolbar = () => {\n  const dispatch = useDispatch();\n  const [value, setValue] = React.useState<number>(1);\n  const onChange = (event: Event, newValue: number | number[]) => {\n    setValue(newValue as number);\n    dispatch(\n      applicationSlice.actions.updateTileSize({\n        newValue: newValue as number,\n      })\n    );\n  };\n  // const onChangeCommitted = (\n  //   event: React.ChangeEvent<{}>,\n  //   newValue: number | number[]\n  // ) => {\n  //   dispatch(\n  //     applicationSlice.actions.updateTileSize({\n  //       newValue: newValue as number,\n  //     })\n  //   );\n  // };\n  return (\n    <Toolbar>\n      <Logo />\n      {/*<TaskSelect />*/}\n      <Box sx={{ flexGrow: 1 }} />\n      <ZoomOutIcon\n        sx={(theme) => ({\n          marginLeft: theme.spacing(1),\n          marginRight: theme.spacing(1),\n        })}\n      />\n      <Slider\n        value={value}\n        min={0.6}\n        max={4}\n        step={0.1}\n        onChange={onChange}\n        sx={{ width: \"10%\" }}\n      />\n      <ZoomInIcon\n        sx={(theme) => ({\n          marginLeft: theme.spacing(1),\n          marginRight: theme.spacing(1),\n        })}\n      />\n      {/*<SearchInput />*/}\n      <UploadButton />\n    </Toolbar>\n  );\n};\n","import React from \"react\";\nimport { ApplicationToolbar } from \"../ApplicationToolbar\";\nimport { AppBar, Box } from \"@mui/material\";\n\nexport const ApplicationAppBar = () => {\n  return (\n    <Box>\n      <AppBar\n        sx={{\n          borderBottom: \"1px solid rgba(0, 0, 0, 0.12)\",\n          boxShadow: \"none\",\n        }}\n        color=\"inherit\"\n        position=\"fixed\"\n      >\n        <ApplicationToolbar />\n      </AppBar>\n    </Box>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport { ApplicationDrawer } from \"../ApplicationDrawer\";\nimport { ImageGrid } from \"../ImageGrid\";\nimport { ApplicationAppBar } from \"../ApplicationAppBar\";\nimport { Box, CssBaseline } from \"@mui/material\";\nimport { createImage } from \"../../store/slices\";\nimport { useDispatch } from \"react-redux\";\nimport { convertFileToImage } from \"../../image/imageHelper\";\n\nexport const MainView = () => {\n  const dispatch = useDispatch();\n\n  const onUnload = (e: any) => {\n    if (process.env.NODE_ENV === \"development\") {\n      return;\n    } else {\n      e.preventDefault();\n      return (e.returnValue = \"Are you sure you want to exit?\");\n    }\n  };\n\n  React.useEffect(() => {\n    window.addEventListener(\"beforeunload\", onUnload);\n    return () => {\n      window.removeEventListener(\"beforeunload\", onUnload);\n    };\n  }, []);\n\n  const onDrop = useCallback(\n    async (item) => {\n      if (item) {\n        for (let i = 0; i < item.files.length; i++) {\n          const image = await convertFileToImage(item.files[i]);\n          dispatch(createImage({ image: image }));\n        }\n      }\n    },\n    [dispatch]\n  );\n\n  return (\n    <Box sx={{ height: \"100vh\" }}>\n      <CssBaseline />\n\n      <ApplicationAppBar />\n\n      <ApplicationDrawer />\n\n      <ImageGrid onDrop={onDrop} />\n    </Box>\n  );\n};\n","import { createTheme } from \"@mui/material/styles\";\n\nexport const lightTheme = createTheme({\n  components: {\n    MuiListItemIcon: {\n      styleOverrides: {\n        root: {\n          minWidth: 36,\n        },\n      },\n    },\n  },\n});\n\nexport const darkTheme = createTheme({\n  components: {\n    MuiDrawer: {\n      styleOverrides: {\n        paperAnchorDockedLeft: {\n          borderRight: \"1px solid rgba(16, 16, 16)\",\n        },\n        paperAnchorDockedRight: {\n          borderLeft: \"1px solid rgba(16, 16, 16)\",\n        },\n        paper: {\n          // boxShadow: \"inset 0 0 16px #000000\",\n        },\n      },\n    },\n    MuiListItem: {\n      styleOverrides: {\n        root: {\n          \"&.Mui-selected\": {\n            backgroundColor: \"rgba(60, 61, 62)\",\n          },\n        },\n      },\n    },\n    MuiListItemIcon: {\n      styleOverrides: {\n        root: {\n          minWidth: 36,\n        },\n      },\n    },\n    MuiSlider: {\n      styleOverrides: {\n        rail: {\n          color: \"rgba(73, 73, 73)\",\n        },\n        thumb: {\n          color: \"rgba(201, 201, 201)\",\n        },\n        track: {\n          color: \"rgba(159, 159, 159)\",\n        },\n      },\n    },\n  },\n  palette: {\n    background: {\n      paper: \"rgba(40, 40, 40)\",\n      default: \"rgba(50, 50, 50)\",\n    },\n    divider: \"rgba(72, 72, 72)\",\n    text: {\n      primary: \"rgba(190, 190, 190)\",\n    },\n    mode: \"dark\",\n  },\n});\n","import React from \"react\";\n// import { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport { ThemeProvider } from \"@mui/material/styles\";\nimport { StyledEngineProvider } from \"@mui/material/styles\";\nimport { MainView } from \"../MainView\";\n// import { AnnotatorView } from \"../annotator\";\nimport { usePreferredTheme } from \"hooks/useTheme/usePreferredTheme\";\n\nexport const Application = () => {\n  const theme = usePreferredTheme();\n\n  return (\n    <StyledEngineProvider injectFirst>\n      <ThemeProvider theme={theme}>\n        <MainView />\n        {/* <BrowserRouter>\n          <Routes>\n            <Route path=\"/\" element={<MainView />} />\n            <Route path=\"annotator\" element={<AnnotatorView />} />\n          </Routes>\n        </BrowserRouter> */}\n      </ThemeProvider>\n    </StyledEngineProvider>\n  );\n};\n","import { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { ThemeMode } from \"types/ThemeMode\";\nimport { themeModeSelector } from \"store/selectors/themeModeSelector\";\nimport { setThemeMode } from \"store/slices\";\nimport { lightTheme, darkTheme } from \"theme\";\n\nexport const usePreferredTheme = () => {\n  const dispatch = useDispatch();\n\n  const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  const [theme, setTheme] = useState(prefersDarkMode ? darkTheme : lightTheme);\n\n  const themeMode = useSelector(themeModeSelector);\n\n  useEffect(() => {\n    dispatch(\n      setThemeMode({\n        mode: prefersDarkMode ? ThemeMode.Dark : ThemeMode.Light,\n      })\n    );\n  }, [prefersDarkMode, dispatch]);\n\n  useEffect(() => {\n    if (themeMode === ThemeMode.Light) {\n      setTheme(lightTheme);\n    } else {\n      setTheme(darkTheme);\n    }\n  }, [themeMode]);\n\n  return theme;\n};\n","import { combineReducers } from \"redux\";\nimport {\n  imageViewerSlice,\n  classifierSlice,\n  projectSlice,\n  applicationSlice,\n  toolOptionsSlice,\n} from \"../slices\";\n\nconst reducers = {\n  classifier: classifierSlice.reducer,\n  imageViewer: imageViewerSlice.reducer,\n  project: projectSlice.reducer,\n  settings: applicationSlice.reducer,\n  toolOptions: toolOptionsSlice.reducer,\n};\n\nexport const reducer = combineReducers(reducers);\n","import { ImageViewer } from \"../../types/ImageViewer\";\nimport { AnnotationType } from \"../../types/AnnotationType\";\n\nexport const selectedAnnotationSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}): AnnotationType | undefined => {\n  return imageViewer.selectedAnnotation;\n};\n","import { ImageViewer } from \"../../types/ImageViewer\";\n\nexport const activeImagePlaneSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}): number => {\n  return imageViewer.activeImagePlane;\n};\n","import { put, select } from \"redux-saga/effects\";\nimport { imageViewerSlice } from \"../../slices\";\nimport { AnnotationTool } from \"../../../annotator/image/Tool\";\nimport { AnnotationModeType } from \"../../../types/AnnotationModeType\";\nimport { AnnotationStateType } from \"../../../types/AnnotationStateType\";\nimport { ToolType } from \"../../../types/ToolType\";\nimport { selectionModeSelector } from \"../../selectors\";\nimport { selectedCategorySelector } from \"../../selectors\";\nimport { toolTypeSelector } from \"../../selectors\";\nimport { selectedAnnotationSelector } from \"../../selectors/selectedAnnotationSelector\";\nimport { activeImagePlaneSelector } from \"../../selectors/activeImagePlaneSelector\";\n\nexport function* annotationStateChangeSaga({\n  payload: { annotationState, annotationTool },\n}: {\n  type: string;\n  payload: {\n    annotationState: AnnotationStateType;\n    annotationTool: AnnotationTool | undefined;\n  };\n}): any {\n  if (!annotationTool) return;\n\n  if (annotationState !== AnnotationStateType.Annotated) return;\n\n  const selectionMode = yield select(selectionModeSelector);\n  const activeImagePlane = yield select(activeImagePlaneSelector);\n\n  if (selectionMode === AnnotationModeType.New) {\n    const selectedCategory = yield select(selectedCategorySelector);\n\n    annotationTool.annotate(selectedCategory, activeImagePlane);\n\n    if (!annotationTool.annotation) return;\n\n    yield put(\n      imageViewerSlice.actions.setSelectedAnnotations({\n        selectedAnnotations: [annotationTool.annotation],\n        selectedAnnotation: annotationTool.annotation,\n      })\n    );\n  } else {\n    const toolType = yield select(toolTypeSelector);\n    if (toolType === ToolType.Zoom) return;\n\n    const selectedAnnotation = yield select(selectedAnnotationSelector);\n\n    if (annotationTool.annotationState !== AnnotationStateType.Annotated)\n      return;\n\n    let combinedMask, combinedBoundingBox;\n\n    if (!selectedAnnotation) return;\n\n    if (selectionMode === AnnotationModeType.Add) {\n      [combinedMask, combinedBoundingBox] = annotationTool.add(\n        selectedAnnotation.mask,\n        selectedAnnotation.boundingBox\n      );\n    } else if (selectionMode === AnnotationModeType.Subtract) {\n      [combinedMask, combinedBoundingBox] = annotationTool.subtract(\n        selectedAnnotation.mask,\n        selectedAnnotation.boundingBox\n      );\n    } else if (selectionMode === AnnotationModeType.Intersect) {\n      [combinedMask, combinedBoundingBox] = annotationTool.intersect(\n        selectedAnnotation.mask,\n        selectedAnnotation.boundingBox\n      );\n    }\n\n    annotationTool.mask = combinedMask;\n\n    annotationTool.boundingBox = combinedBoundingBox;\n\n    if (!annotationTool.boundingBox || !annotationTool.mask) return;\n\n    yield put(\n      imageViewerSlice.actions.setSelectedAnnotations({\n        selectedAnnotations: [\n          {\n            ...selectedAnnotation,\n            boundingBox: annotationTool.boundingBox,\n            mask: annotationTool.mask,\n          },\n        ],\n        selectedAnnotation: {\n          ...selectedAnnotation,\n          boundingBox: annotationTool.boundingBox,\n          mask: annotationTool.mask,\n        },\n      })\n    );\n\n    const selectedCategory = yield select(selectedCategorySelector);\n\n    annotationTool.annotate(selectedCategory, activeImagePlane);\n  }\n}\n","import { takeEvery } from \"redux-saga/effects\";\nimport { annotationStateChangeSaga } from \"./annotationStateChangeSaga\";\nimport { imageViewerSlice } from \"../../slices\";\n\nexport function* watchAnnotationStateChangeSaga() {\n  yield takeEvery(\n    imageViewerSlice.actions.setAnnotationState,\n    annotationStateChangeSaga\n  );\n}\n","import { ImageViewer } from \"../../types/ImageViewer\";\nimport { AnnotationType } from \"../../types/AnnotationType\";\n\nexport const selectedAnnotationsIdsSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}): Array<string> => {\n  return imageViewer.selectedAnnotations.map((annotation: AnnotationType) => {\n    return annotation.id;\n  });\n};\n","import { ImageViewer } from \"../../types/ImageViewer\";\nimport { AnnotationType } from \"../../types/AnnotationType\";\n\nexport const selectedAnnotationsSelector = ({\n  imageViewer,\n}: {\n  imageViewer: ImageViewer;\n}): Array<AnnotationType> => {\n  return imageViewer.selectedAnnotations;\n};\n","import { put, select } from \"redux-saga/effects\";\nimport * as _ from \"lodash\";\nimport { imageViewerSlice } from \"../../slices\";\nimport { selectedAnnotationsIdsSelector } from \"../../selectors/selectedAnnotationsIdsSelector\";\nimport { imageInstancesSelector } from \"../../selectors/imageInstancesSelector\";\nimport { selectedAnnotationsSelector } from \"../../selectors/selectedAnnotationsSelector\";\nimport { selectedAnnotationSelector } from \"../../selectors/selectedAnnotationSelector\";\nimport { selectedCategorySelector } from \"../../selectors/selectedCategorySelector\";\nimport { AnnotationType } from \"../../../types/AnnotationType\";\n\n// eslint-disable-next-line no-empty-pattern\nexport function* selectedCategorySaga({}: {\n  type: string;\n  payload: { selectedCategoryId: string };\n}): any {\n  const selectedAnnotationsIds = yield select(selectedAnnotationsIdsSelector);\n  if (!selectedAnnotationsIds) return;\n\n  const annotations = yield select(imageInstancesSelector);\n  if (!annotations) return;\n\n  const selectedAnnotations = yield select(selectedAnnotationsSelector);\n  const selectedCategory = yield select(selectedCategorySelector);\n\n  const updatedAnnotations = _.map(\n    selectedAnnotations,\n    (annotation: AnnotationType) => {\n      return { ...annotation, categoryId: selectedCategory.id };\n    }\n  );\n\n  const selectedAnnotation = yield select(selectedAnnotationSelector);\n  if (!selectedAnnotation) return;\n\n  yield put(\n    imageViewerSlice.actions.setSelectedAnnotations({\n      selectedAnnotations: updatedAnnotations,\n      selectedAnnotation: {\n        ...selectedAnnotation,\n        categoryId: selectedCategory.id,\n      },\n    })\n  );\n}\n","import { takeEvery } from \"redux-saga/effects\";\nimport { imageViewerSlice } from \"../../slices\";\nimport { selectedCategorySaga } from \"./selectedCategorySaga\";\n\nexport function* watchSelectedCategorySaga() {\n  yield takeEvery(\n    imageViewerSlice.actions.setSelectedCategoryId,\n    selectedCategorySaga\n  );\n}\n","import * as tensorflow from \"@tensorflow/tfjs\";\nimport { CompileOptions } from \"../../../types/CompileOptions\";\nimport { LossFunction } from \"../../../types/LossFunction\";\nimport { OptimizationAlgorithm } from \"../../../types/OptimizationAlgorithm\";\nimport { Metric } from \"../../../types/Metric\";\n\nexport const compile = (\n  opened: tensorflow.LayersModel,\n  options: CompileOptions\n) => {\n  const compiled = opened;\n\n  const loss = () => {\n    switch (options.lossFunction) {\n      case LossFunction.AbsoluteDifference: {\n        return \"absoluteDifference\";\n      }\n      case LossFunction.CategoricalCrossEntropy: {\n        return \"categoricalCrossentropy\";\n      }\n      case LossFunction.CosineDistance: {\n        return \"cosineDistance\";\n      }\n      case LossFunction.Hinge: {\n        return \"hingeLoss\";\n      }\n      case LossFunction.Huber: {\n        return \"huberLoss\";\n      }\n      case LossFunction.Log: {\n        return \"logLoss\";\n      }\n      case LossFunction.MeanSquaredError: {\n        return \"meanSquaredError\";\n      }\n      case LossFunction.SigmoidCrossEntropy: {\n        return \"sigmoidCrossEntropy\";\n      }\n      default: {\n        return \"softmaxCrossEntropy\";\n      }\n    }\n  };\n\n  const metrics = () => {\n    // eslint-disable-next-line array-callback-return\n    return options.metrics.map((metric: Metric) => {\n      switch (metric) {\n        case Metric.BinaryAccuracy:\n          return \"binaryAccuracy\";\n        case Metric.BinaryCrossEntropy:\n          return \"binaryCrossentropy\";\n        case Metric.CategoricalAccuracy:\n          return \"categoricalAccuracy\";\n        case Metric.CategoricalCrossEntropy:\n          return \"categoricalCrossentropy\";\n        case Metric.CosineProximity:\n          return \"categoricalCrossentropy\";\n        case Metric.MeanAbsoluteError:\n          return \"meanAbsoluteError\";\n        case Metric.MeanAbsolutePercentageError:\n          return \"meanAbsolutePercentageError\";\n        case Metric.MeanSquaredError:\n          return \"meanSquaredError\";\n        case Metric.Precision:\n          return \"precision\";\n        case Metric.Recall:\n          return \"recall\";\n        case Metric.SparseCategoricalAccuracy:\n          return \"sparseCategoricalAccuracy\";\n      }\n    });\n  };\n\n  const optimizer = (): tensorflow.Optimizer => {\n    switch (options.optimizationAlgorithm) {\n      case OptimizationAlgorithm.Adadelta: {\n        return tensorflow.train.adadelta(options.learningRate);\n      }\n      case OptimizationAlgorithm.Adagrad: {\n        return tensorflow.train.adagrad(options.learningRate);\n      }\n      case OptimizationAlgorithm.Adam: {\n        return tensorflow.train.adam(options.learningRate);\n      }\n      case OptimizationAlgorithm.Adamax: {\n        return tensorflow.train.adamax(options.learningRate);\n      }\n      case OptimizationAlgorithm.RMSProp: {\n        return tensorflow.train.rmsprop(options.learningRate);\n      }\n      case OptimizationAlgorithm.StochasticGradientDescent: {\n        return tensorflow.train.sgd(options.learningRate);\n      }\n      default: {\n        return tensorflow.train.sgd(options.learningRate);\n      }\n    }\n  };\n\n  compiled.compile({\n    loss: loss(),\n    metrics: metrics(),\n    optimizer: optimizer(),\n  });\n\n  return compiled;\n};\n","import { History, LayersModel } from \"@tensorflow/tfjs\";\nimport { FitOptions } from \"../../../types/FitOptions\";\nimport * as tensorflow from \"@tensorflow/tfjs\";\nimport * as tfvis from \"@tensorflow/tfjs-vis\";\n\n/*\n * Fix for issue #90.\n * TL;DR: Preact pollutes the global namespace, and now we have to too.\n *\n * An unfortunately dirty solution to a nasty mix of using react alongside tfjs-vis, which in turn uses preact.\n * Preact v8 populates the global namespace with an extension of the Element type.\n * React also has an Element type, which it extends as ReactElement.\n * The two do no mix well, and cause all sorts of weird type issues whenever tfjs-vis is imported.\n * tfjs is not maintained so have not updated to v10+, and is also not likely to accept any pull requests.\n * Hence the messy solution below.\n *\n * See: https://github.com/preactjs/preact/issues/2748\n * Or see: line 129 of \"node_modules/preact/src/preact.d.ts\"\n */\ndeclare global {\n  namespace React {\n    interface ReactElement {\n      nodeName: any;\n      attributes: any;\n      children: any;\n    }\n  }\n}\n\nexport const fit = async (\n  compiled: LayersModel,\n  data: {\n    val: tensorflow.data.Dataset<{\n      xs: tensorflow.Tensor;\n      ys: tensorflow.Tensor;\n    }>;\n    train: tensorflow.data.Dataset<{\n      xs: tensorflow.Tensor;\n      ys: tensorflow.Tensor;\n    }>;\n  },\n  options: FitOptions,\n  onEpochEnd: any\n): Promise<{ fitted: LayersModel; status: History }> => {\n  const compiledMetrics = compiled.metrics as Array<string>;\n  const metrics = compiledMetrics.concat(\n    compiledMetrics.map((metric: string) => {\n      return \"val_\" + metric;\n    }),\n    \"loss\",\n    \"val_loss\"\n  );\n\n  //Visualization\n  const container = document.getElementById(\"tfvis-container\") as HTMLElement;\n  tfvis.show.modelSummary(container, compiled);\n\n  const args = {\n    callbacks: [\n      {\n        onEpochEnd: onEpochEnd,\n      },\n      tfvis.show.fitCallbacks(container, metrics, {\n        callbacks: [\"onEpochEnd\"],\n      }),\n    ],\n    epochs: options.epochs,\n    validationData: data.val.batch(options.batchSize),\n  };\n\n  const status = await compiled.fitDataset(\n    data.train.batch(options.batchSize),\n    args\n  );\n\n  return { fitted: compiled, status: status };\n};\n","import * as tensorflow from \"@tensorflow/tfjs\";\nimport { Shape } from \"../../../types/Shape\";\n\n/**\n * Creates simple convolutional neural network, for example used for mnist classification problem\n * from: https://codelabs.developers.google.com/codelabs/tfjs-training-classfication/\n *\n * @param inputShape array of number specifying the input shape [imageWidth, imageHeight, imageChannels]\n * @param numClasses shape of the output layer (i.e. number of classes to predict)\n * @returns tensorflow.sequential model\n */\nexport const createSimpleCNN = (inputShape: Shape, numClasses: number) => {\n  const imageWidth = inputShape.width;\n  const imageHeight = inputShape.height;\n  const imageChannels = inputShape.channels;\n\n  const model = tensorflow.sequential();\n\n  // In the first layer of our convolutional neural network we have\n  // to specify the input shape. Then we specify some parameters for\n  // the convolution operation that takes place in this layer.\n  model.add(\n    tensorflow.layers.conv2d({\n      inputShape: [imageWidth, imageHeight, imageChannels],\n      kernelSize: 5,\n      filters: 8,\n      strides: 1,\n      activation: \"relu\",\n      kernelInitializer: \"varianceScaling\",\n    })\n  );\n\n  // The MaxPooling layer acts as a sort of downsampling using max values\n  // in a region instead of averaging.\n  model.add(\n    tensorflow.layers.maxPooling2d({ poolSize: [2, 2], strides: [2, 2] })\n  );\n\n  // Repeat another conv2d + maxPooling stack.\n  // Note that we have more filters in the convolution.\n  model.add(\n    tensorflow.layers.conv2d({\n      kernelSize: 5,\n      filters: 16,\n      strides: 1,\n      activation: \"relu\",\n      kernelInitializer: \"varianceScaling\",\n    })\n  );\n  model.add(\n    tensorflow.layers.maxPooling2d({ poolSize: [2, 2], strides: [2, 2] })\n  );\n\n  // Now we flatten the output from the 2D filters into a 1D vector to prepare\n  // it for input into our last layer. This is common practice when feeding\n  // higher dimensional data to a final classification output layer.\n  model.add(tensorflow.layers.flatten());\n\n  // Our last layer is a dense layer which has `numClasses` output units, one for each output class\n  model.add(\n    tensorflow.layers.dense({\n      units: numClasses,\n      kernelInitializer: \"varianceScaling\",\n      activation: \"softmax\",\n    })\n  );\n\n  return model;\n};\n","import * as tensorflow from \"@tensorflow/tfjs\";\n\nexport const changeInputShape = async (\n  model: tensorflow.Sequential,\n  inputShape: number[]\n) => {\n  const newModel = tensorflow.sequential();\n  newModel.add(tensorflow.layers.inputLayer({ inputShape: inputShape }));\n  const map = tensorflow.serialization.SerializationMap.getMap().classNameMap;\n  for (let i = 1; i < model.layers.length; i++) {\n    const layer = model.layers[i];\n    const className: string = layer.getClassName();\n    const [cls, fromConfig] = map[className];\n    let cfg = layer.getConfig();\n    const newlayer = fromConfig(cls, cfg);\n    // @ts-ignore\n    newModel.add(newlayer);\n\n    // @ts-ignore\n    newlayer.setWeights(layer.getWeights());\n  }\n\n  return newModel;\n};\n","import * as tensorflow from \"@tensorflow/tfjs\";\nimport { Shape } from \"../../../types/Shape\";\nimport { changeInputShape } from \"./changeInputShape\";\n\n/**\n *\n * @param inputShape array of number specifying the input shape [imageWidth, imageHeight, imageChannels]\n * @param numClasses shape of the output layer (i.e. number of classes to predict)\n * @param freeze flag to freeze the layers in the model, i.e. not training them\n * @param useCustomTopLayer flag to use a custom top layer specific to the shape of your training\n * @returns tensorflow.sequential model\n */\nexport const createMobileNet = async (\n  input_shape: Shape,\n  numClasses: number,\n  freeze: boolean = true,\n  useCustomTopLayer: boolean = true\n) => {\n  const imageWidth = input_shape.width;\n  const imageHeight = input_shape.height;\n\n  // the number of input channels cannot be changed\n  const inputShape: number[] = [imageWidth, imageHeight, 3];\n\n  const resource =\n    \"https://storage.googleapis.com/tfjs-models/tfjs/mobilenet_v1_0.25_224/model.json\";\n\n  const mobilenet = await tensorflow.loadLayersModel(resource);\n\n  const layerName = \"conv_pw_13_relu\";\n\n  const backbone = tensorflow.sequential();\n  for (const l of mobilenet.layers) {\n    backbone.add(l);\n    if (l.name === layerName) {\n      break;\n    }\n  }\n\n  let model = backbone;\n  if (inputShape !== [224, 224, 3]) {\n    model = await changeInputShape(model, inputShape);\n  }\n\n  if (freeze) {\n    model.layers.forEach(function (l) {\n      l.trainable = false;\n    });\n  }\n\n  if (useCustomTopLayer) {\n    model.add(tensorflow.layers.globalAveragePooling2d({}));\n\n    const numfeat = model.layers[model.layers.length - 1].outputShape[1];\n    model.add(\n      tensorflow.layers.reshape({\n        targetShape: [1, 1, numfeat as number],\n      })\n    );\n\n    model.add(tensorflow.layers.dropout({ rate: 0.001 }));\n\n    model.add(\n      tensorflow.layers.conv2d({\n        filters: numClasses,\n        kernelSize: [1, 1],\n      })\n    );\n\n    model.add(\n      tensorflow.layers.reshape({\n        targetShape: [numClasses],\n      })\n    );\n\n    model.add(\n      tensorflow.layers.activation({\n        activation: \"softmax\",\n      })\n    );\n  }\n  return model;\n};\n","import { ArchitectureOptions } from \"../../../types/ArchitectureOptions\";\nimport { ModelType } from \"../../../types/ClassifierModelType\";\nimport { createSimpleCNN } from \"../models/simpleCNN\";\nimport { createMobileNet } from \"../models/mobileNet\";\n\nexport const open = async (\n  modelOptions: ArchitectureOptions,\n  classes: number\n) => {\n  switch (modelOptions.selectedModel.modelType) {\n    case ModelType.SimpleCNN: {\n      return createSimpleCNN(modelOptions.inputShape, classes);\n    }\n    case ModelType.MobileNet: {\n      return createMobileNet(modelOptions.inputShape, classes);\n    }\n    default: {\n      alert(\"Invalid model selected!\");\n    }\n  }\n};\n","import * as tensorflow from \"@tensorflow/tfjs\";\nimport * as ImageJS from \"image-js\";\nimport { Category, UNKNOWN_CATEGORY_ID } from \"../../../types/Category\";\nimport { Image } from \"../../../types/Image\";\nimport { Shape } from \"../../../types/Shape\";\nimport { RescaleOptions } from \"../../../types/RescaleOptions\";\n\nexport const decodeCategory = (categories: number) => {\n  return (item: {\n    xs: string;\n    ys: number;\n  }): { xs: string; ys: tensorflow.Tensor } => {\n    return { ...item, ys: tensorflow.oneHot(item.ys, categories) };\n  };\n};\n\nexport const decodeImage = async (\n  channels: number,\n  rescale: boolean,\n  item: {\n    xs: string; //dataURL\n    ys: tensorflow.Tensor;\n  }\n): Promise<{ xs: tensorflow.Tensor; ys: tensorflow.Tensor }> => {\n  const fetched = await tensorflow.util.fetch(item.xs);\n\n  const buffer: ArrayBuffer = await fetched.arrayBuffer();\n\n  let data: ImageJS.Image = await ImageJS.Image.load(buffer);\n\n  const canvas: HTMLCanvasElement = data.getCanvas();\n\n  let xs: tensorflow.Tensor3D = tensorflow.browser.fromPixels(canvas, channels);\n\n  if (rescale) {\n    xs = xs.div(255); //Because xs is string, values are encoded by uint8array by default\n  }\n\n  return new Promise((resolve) => {\n    return resolve({ ...item, xs: xs });\n  });\n};\n\nexport const resize = async (\n  inputShape: Shape,\n  item: {\n    xs: tensorflow.Tensor;\n    ys: tensorflow.Tensor;\n  }\n): Promise<{ xs: tensorflow.Tensor; ys: tensorflow.Tensor }> => {\n  const resized = tensorflow.image.resizeBilinear(\n    item.xs as tensorflow.Tensor3D,\n    [inputShape.height, inputShape.width]\n  );\n\n  return new Promise((resolve) => {\n    return resolve({ ...item, xs: resized });\n  });\n};\n\nexport const generator = (\n  images: Array<Image>,\n  categories: Array<Category>\n) => {\n  const count = images.length;\n\n  return function* () {\n    let index = 0;\n\n    while (index < count) {\n      const image = images[index];\n\n      // eslint-disable-next-line array-callback-return\n      const ys = categories.findIndex((category: Category) => {\n        if (category.id !== UNKNOWN_CATEGORY_ID) {\n          return category.id === image.categoryId;\n        }\n      });\n\n      yield {\n        xs: image.src,\n        ys: ys,\n      };\n\n      index++;\n    }\n  };\n};\n\nexport const preprocess = async (\n  trainImages: Array<Image>,\n  valImages: Array<Image>,\n  categories: Array<Category>,\n  inputShape: Shape,\n  rescaleOptions: RescaleOptions\n): Promise<{\n  val: tensorflow.data.Dataset<{\n    xs: tensorflow.Tensor;\n    ys: tensorflow.Tensor;\n  }>;\n  train: tensorflow.data.Dataset<{\n    xs: tensorflow.Tensor;\n    ys: tensorflow.Tensor;\n  }>;\n}> => {\n  const trainData = tensorflow.data\n    .generator(generator(trainImages, categories))\n    .map(decodeCategory(categories.length))\n    .mapAsync(\n      decodeImage.bind(null, inputShape.channels, rescaleOptions.rescale)\n    )\n    .mapAsync(resize.bind(null, inputShape))\n    .shuffle(32);\n\n  const valData = tensorflow.data\n    .generator(generator(valImages, categories))\n    .map(decodeCategory(categories.length))\n    .mapAsync(\n      decodeImage.bind(null, inputShape.channels, rescaleOptions.rescale)\n    )\n    .mapAsync(resize.bind(null, inputShape))\n    .shuffle(32);\n\n  return { val: valData, train: trainData };\n};\n","import { Project } from \"../../types/Project\";\nimport { Image } from \"../../types/Image\";\nimport { Partition } from \"../../types/Partition\";\n\nexport const trainImagesSelector = ({\n  project,\n}: {\n  project: Project;\n}): Array<Image> => {\n  return project.images.filter((image: Image) => {\n    return image.partition === Partition.Training;\n  });\n};\n","import { Project } from \"../../types/Project\";\nimport { Image } from \"../../types/Image\";\nimport { Partition } from \"../../types/Partition\";\n\nexport const valImagesSelector = ({\n  project,\n}: {\n  project: Project;\n}): Array<Image> => {\n  return project.images.filter((image: Image) => {\n    return image.partition === Partition.Validation;\n  });\n};\n","import { put, select } from \"redux-saga/effects\";\nimport { compile, fit, open, preprocess } from \"../../coroutines/classifier\";\nimport { classifierSlice } from \"../../slices\";\nimport {\n  compiledSelector,\n  compileOptionsSelector,\n  createdCategoriesCountSelector,\n  createdCategoriesSelector,\n  fitOptionsSelector,\n} from \"../../selectors\";\nimport { architectureOptionsSelector } from \"../../selectors/architectureOptionsSelector\";\nimport { rescaleOptionsSelector } from \"../../selectors/rescaleOptionsSelector\";\nimport { trainImagesSelector } from \"../../selectors/trainImagesSelector\";\nimport { valImagesSelector } from \"../../selectors/valImagesSelector\";\nimport * as tensorflow from \"@tensorflow/tfjs\";\nimport { RescaleOptions } from \"../../../types/RescaleOptions\";\nimport { ArchitectureOptions } from \"../../../types/ArchitectureOptions\";\nimport { CompileOptions } from \"../../../types/CompileOptions\";\nimport { Category } from \"../../../types/Category\";\nimport { Image } from \"../../../types/Image\";\nimport { FitOptions } from \"../../../types/FitOptions\";\nimport { ModelType } from \"../../../types/ClassifierModelType\";\n\nexport function* fitSaga(action: any): any {\n  const { onEpochEnd } = action.payload;\n\n  const architectureOptions: ArchitectureOptions = yield select(\n    architectureOptionsSelector\n  );\n  const classes: number = yield select(createdCategoriesCountSelector);\n\n  var model: tensorflow.LayersModel;\n  if (architectureOptions.selectedModel.modelType === ModelType.UserUploaded) {\n    model = yield select(compiledSelector);\n  } else {\n    model = yield open(architectureOptions, classes);\n  }\n\n  const compileOptions: CompileOptions = yield select(compileOptionsSelector);\n  const compiledModel: tensorflow.LayersModel = yield compile(\n    model,\n    compileOptions\n  );\n\n  yield put(\n    classifierSlice.actions.updateCompiled({ compiled: compiledModel })\n  );\n\n  const categories: Category[] = yield select(createdCategoriesSelector);\n  const trainImages: Image[] = yield select(trainImagesSelector);\n  const valImages: Image[] = yield select(valImagesSelector);\n  const rescaleOptions: RescaleOptions = yield select(rescaleOptionsSelector);\n\n  const data = yield preprocess(\n    trainImages,\n    valImages,\n    categories,\n    architectureOptions.inputShape,\n    rescaleOptions\n  );\n\n  yield put(classifierSlice.actions.updatePreprocessed({ data: data }));\n\n  const options: FitOptions = yield select(fitOptionsSelector);\n\n  const { fitted, status } = yield fit(\n    compiledModel,\n    data,\n    options,\n    onEpochEnd\n  );\n\n  const payload = { fitted: fitted, status: status };\n\n  yield put(classifierSlice.actions.updateFitted(payload));\n}\n","import { takeEvery } from \"redux-saga/effects\";\nimport { fitSaga } from \"./fitSaga\";\nimport { classifierSlice } from \"../../slices\";\n\nexport function* watchFitSaga(): any {\n  yield takeEvery(classifierSlice.actions.fit.type, fitSaga);\n}\n","import * as tensorflow from \"@tensorflow/tfjs\";\nimport * as ImageJS from \"image-js\";\nimport { Image } from \"../../../types/Image\";\nimport { Shape } from \"../../../types/Shape\";\nimport { RescaleOptions } from \"../../../types/RescaleOptions\";\n\nexport const decodeImage = async (\n  channels: number,\n  rescale: boolean,\n  item: {\n    xs: string; //dataURL\n    id: string;\n  }\n): Promise<{ xs: tensorflow.Tensor; id: string }> => {\n  const fetched = await tensorflow.util.fetch(item.xs);\n\n  const buffer: ArrayBuffer = await fetched.arrayBuffer();\n\n  let data: ImageJS.Image = await ImageJS.Image.load(buffer);\n\n  const canvas: HTMLCanvasElement = data.getCanvas();\n\n  let xs: tensorflow.Tensor3D = tensorflow.browser.fromPixels(canvas, channels);\n\n  if (rescale) {\n    xs = xs.div(255); //Because xs is string, values are encoded by uint8array by default\n  }\n\n  return new Promise((resolve) => {\n    return resolve({ ...item, xs: xs });\n  });\n};\n\nexport const resize = async (\n  inputShape: Shape,\n  item: {\n    xs: tensorflow.Tensor;\n    id: string;\n  }\n): Promise<{ xs: tensorflow.Tensor; id: string }> => {\n  const resized = tensorflow.image.resizeBilinear(\n    item.xs as tensorflow.Tensor3D,\n    [inputShape.height, inputShape.width]\n  );\n\n  return new Promise((resolve) => {\n    return resolve({ ...item, xs: resized });\n  });\n};\n\nexport const generator = (images: Array<Image>) => {\n  const count = images.length;\n\n  return function* () {\n    let index = 0;\n\n    while (index < count) {\n      const image = images[index];\n\n      yield {\n        xs: image.src,\n        id: image.id,\n      };\n\n      index++;\n    }\n  };\n};\n\nexport const preprocess_predict = async (\n  images: Array<Image>,\n  rescaleOptions: RescaleOptions,\n  inputShape: Shape\n): Promise<\n  tensorflow.data.Dataset<{\n    xs: tensorflow.Tensor;\n    id: string;\n  }>\n> => {\n  const data = tensorflow.data\n    .generator(generator(images))\n    .mapAsync(\n      decodeImage.bind(null, inputShape.channels, rescaleOptions.rescale)\n    )\n    .mapAsync(resize.bind(null, inputShape));\n\n  return data;\n};\n","import * as tensorflow from \"@tensorflow/tfjs\";\nimport { LayersModel } from \"@tensorflow/tfjs\";\nimport { Category } from \"../../../types/Category\";\n\nexport const predictCategories = async (\n  model: LayersModel,\n  data: tensorflow.data.Dataset<{\n    xs: tensorflow.Tensor;\n    id: string;\n  }>,\n  categories: Array<Category>\n): Promise<{ imageIds: Array<string>; categoryIds: Array<string> }> => {\n  const imageIds: Array<string> = [];\n  const categoryIds: Array<string> = [];\n\n  await data.forEachAsync((item: { xs: tensorflow.Tensor; id: string }) => {\n    const input = item.xs;\n    const y = model.predict(input.expandDims()); //gives vector of probabilities\n\n    //convert to index\n    //get corresponding categories[index] in categories array, get category ID\n    const idx = tensorflow.argMax(y as tensorflow.Tensor, 1).dataSync()[0];\n\n    imageIds.push(item.id);\n    categoryIds.push(categories[idx].id);\n  });\n\n  return { imageIds, categoryIds };\n};\n","import { Project } from \"../../types/Project\";\nimport { Image } from \"../../types/Image\";\nimport { Partition } from \"../../types/Partition\";\n\nexport const testImagesSelector = ({\n  project,\n}: {\n  project: Project;\n}): Array<Image> => {\n  return project.images.filter((image: Image) => {\n    return image.partition === Partition.Inference;\n  });\n};\n","import { put, select } from \"redux-saga/effects\";\nimport { projectSlice } from \"../../slices\";\nimport { createdCategoriesSelector } from \"../../selectors\";\nimport { rescaleOptionsSelector } from \"../../selectors/rescaleOptionsSelector\";\nimport { preprocess_predict } from \"../../coroutines/classifier/preprocess_predict\";\nimport { predictCategories } from \"../../coroutines/classifier/predictCategories\";\nimport { testImagesSelector } from \"../../selectors/testImagesSelector\";\nimport { fittedSelector } from \"../../selectors/fittedSelector\";\nimport { architectureOptionsSelector } from \"../../selectors/architectureOptionsSelector\";\nimport { Category } from \"../../../types/Category\";\n\nexport function* predictSaga(action: any): any {\n  const rescaleOptions = yield select(rescaleOptionsSelector);\n\n  let model = yield select(fittedSelector);\n\n  const architectureOptions = yield select(architectureOptionsSelector);\n\n  const categories: Category[] = yield select(createdCategoriesSelector);\n\n  const testImages = yield select(testImagesSelector);\n\n  if (!testImages.length) {\n    alert(\"No unlabled images to predict!\");\n    return;\n  }\n\n  const outputLayerSize = model.outputs[0].shape[1] as number;\n  if (outputLayerSize !== categories.length) {\n    alert(\n      \"The output shape of your model does not correspond to the number of categories!\"\n    );\n    return;\n  }\n\n  const data = yield preprocess_predict(\n    testImages,\n    rescaleOptions,\n    architectureOptions.inputShape\n  );\n\n  const { imageIds, categoryIds } = yield predictCategories(\n    model,\n    data,\n    categories\n  ); //returns an array of Image ID and an array of corresponding categories ID\n\n  yield put(\n    projectSlice.actions.updateImagesCategories({\n      ids: imageIds,\n      categoryIds: categoryIds,\n    })\n  );\n}\n","import { takeEvery } from \"redux-saga/effects\";\nimport { classifierSlice } from \"../../slices\";\nimport { predictSaga } from \"./predictSaga\";\n\nexport function* watchPredictSaga(): any {\n  yield takeEvery(classifierSlice.actions.predict.type, predictSaga);\n}\n","import { all, fork } from \"redux-saga/effects\";\nimport {\n  watchAnnotationStateChangeSaga,\n  watchSelectedCategorySaga,\n} from \"./annotator\";\nimport { watchFitSaga } from \"./classifier\";\nimport { watchPredictSaga } from \"./classifier/watchPredictSaga\";\n\nexport function* rootSaga() {\n  const classifierEffects = [fork(watchFitSaga), fork(watchPredictSaga)];\n\n  const annotaterEffects = [\n    fork(watchAnnotationStateChangeSaga),\n    fork(watchSelectedCategorySaga),\n  ];\n\n  yield all([...classifierEffects, ...annotaterEffects]);\n}\n","import { reducer } from \"../reducer\";\nimport {\n  configureStore,\n  EnhancedStore,\n  Middleware,\n  StoreEnhancer,\n} from \"@reduxjs/toolkit\";\nimport logger from \"redux-logger\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { rootSaga } from \"../sagas\";\nimport * as Sentry from \"@sentry/react\";\nimport thunk from \"redux-thunk\";\n\nexport const saga = createSagaMiddleware();\n\nconst sentryReduxEnhancer = Sentry.createReduxEnhancer({});\n\nconst enhancers: StoreEnhancer[] = [sentryReduxEnhancer];\n\nconst middleware: Middleware[] = [logger, saga, thunk];\n\nconst preloadedState = {};\n\nconst options = {\n  devTools: true,\n  enhancers: enhancers,\n  middleware: middleware,\n  preloadedState: preloadedState,\n  reducer: reducer,\n};\n\nexport const productionStore: EnhancedStore = configureStore(options);\n\nsaga.run(rootSaga);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n// import * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { Application } from \"./components/Application\";\nimport { productionStore } from \"store/stores\";\n\nReactDOM.render(\n  <Provider store={productionStore}>\n    <DndProvider backend={HTML5Backend}>\n      <Application />\n    </DndProvider>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// serviceWorker.register();\n"],"sourceRoot":""}